{"version":3,"file":"static/js/196.d4286c38.chunk.js","mappings":"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","sources":["components/Admin/StatusManager.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { collection, getDocs, getDoc, doc, updateDoc, addDoc, query, where, orderBy, serverTimestamp, writeBatch } from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { useNotification } from './NotificationSystem';\nimport { useAuth } from '../../context/AuthContext';\nimport { \n  FiCheckCircle, FiClock, FiAlertCircle, FiXCircle, FiEdit2, \n  FiUser, FiFileText, FiCalendar, FiFilter, FiSearch, FiRefreshCw,\n  FiActivity, FiEye, FiTrendingUp, FiArrowRight, FiPlay, FiPause,\n  FiCheck, FiX, FiCpu, FiZap, FiTarget, FiBell,\n  FiGrid, FiList, FiMoreVertical, FiChevronDown, FiChevronUp,\n  FiDownload, FiUpload, FiSettings, FiSliders, FiMaximize2,\n  FiMinimize2, FiMenu, FiPhone, FiTablet, FiMonitor,\n  FiTool, FiPackage, FiTruck, FiBarChart2, FiPlus, FiMinus\n} from 'react-icons/fi';\n\n// Machine operations with detailed configuration\nconst MACHINE_OPERATIONS = {\n  HBL: { name: 'Horizontal Boring', icon: FiTool, color: 'blue' },\n  VTL: { name: 'Vertical Turning', icon: FiCpu, color: 'purple' },\n  Drilling: { name: 'Drilling', icon: FiZap, color: 'green' },\n  VMC: { name: 'Vertical Machining', icon: FiTarget, color: 'indigo' }\n};\n\n// Operation Status Service (atomic & auditable)\nconst updatePOOperationStatusService = async (poId, operation, newStatus, user, notes = '') => {\n  try {\n    const poRef = doc(db, 'purchaseOrders', poId);\n    const poSnap = await getDoc(poRef);\n    if (!poSnap.exists()) throw new Error('Purchase order not found');\n\n    const currentData = poSnap.data() || {};\n    const currentStatus = currentData.operationsStatus?.[operation] || 'pending';\n\n    // Build updated maps\n    const updatedOperationsStatus = {\n      ...(currentData.operationsStatus || {}),\n      [operation]: newStatus,\n    };\n\n    // Calculate progress and derived status\n    const totalOperations = Object.keys(MACHINE_OPERATIONS).length;\n    const completedOperations = Object.values(updatedOperationsStatus).filter((s) => s === 'completed').length;\n    const progress = Math.round((completedOperations / totalOperations) * 100);\n    let derivedStatus = currentData.status || 'pending';\n    if (completedOperations === totalOperations) derivedStatus = 'completed';\n    else if (completedOperations > 0 || Object.values(updatedOperationsStatus).some((s) => s === 'in_progress')) derivedStatus = 'in_progress';\n\n    const batch = writeBatch(db);\n\n    // Build per-operation meta\n    const baseMeta = {\n      status: newStatus,\n      notes: notes || '',\n      updatedAt: serverTimestamp(),\n      updatedBy: {\n        uid: user?.uid || null,\n        email: user?.email || null,\n        name: user?.displayName || null,\n      },\n    };\n    const extraMeta = {};\n    if (newStatus === 'in_progress') extraMeta.startedAt = serverTimestamp();\n    if (newStatus === 'completed') extraMeta.completedAt = serverTimestamp();\n\n    batch.update(poRef, {\n      operationsStatus: updatedOperationsStatus,\n      [`operationsMeta.${operation}`]: { ...(currentData.operationsMeta?.[operation] || {}), ...baseMeta, ...extraMeta },\n      status: derivedStatus,\n      progress,\n      updatedAt: serverTimestamp(),\n    });\n\n    // 0) Auto-create Industrial Task based on status update\n    try {\n      const vendorId = currentData.vendorId || null;\n      const vendorName = currentData.vendorName || currentData.vendor || '';\n      const poNumber = currentData.poNumber || poId;\n\n      // Build a meaningful title/description\n      let title = '';\n      let priority = 'medium';\n      let taskStatus = 'pending';\n      if (newStatus === 'in_progress') {\n        title = `Start ${MACHINE_OPERATIONS[operation]?.name || operation} for PO ${poNumber}`;\n        priority = 'high';\n        taskStatus = 'in-progress';\n      } else if (newStatus === 'completed') {\n        title = `Verify completion: ${MACHINE_OPERATIONS[operation]?.name || operation} for PO ${poNumber}`;\n        priority = 'medium';\n        taskStatus = 'completed';\n      } else if (newStatus === 'pending') {\n        title = `Plan ${MACHINE_OPERATIONS[operation]?.name || operation} for PO ${poNumber}`;\n        priority = 'low';\n        taskStatus = 'pending';\n      }\n\n      if (title) {\n        const dateKey = new Date().toISOString().slice(0, 10); // YYYY-MM-DD\n        const deterministicId = `${poId}_${operation}_${newStatus}_${dateKey}`;\n        const taskRef = doc(db, 'industrialTasks', deterministicId);\n        batch.set(taskRef, {\n          title,\n          description: notes || `Vendor: ${vendorName || 'N/A'} | Operation: ${MACHINE_OPERATIONS[operation]?.name || operation}`,\n          priority,\n          assignedTo: vendorName || '',\n          dueDate: serverTimestamp(),\n          category: 'production',\n          completed: taskStatus === 'completed',\n          status: taskStatus,\n          progress: taskStatus === 'completed' ? 100 : 0,\n          department: 'manufacturing',\n          equipment: '',\n          estimatedTime: 0,\n          safetyNotes: '',\n          sequence: [{ step: `${MACHINE_OPERATIONS[operation]?.name || operation}`, completed: taskStatus === 'completed' }],\n          createdAt: serverTimestamp(),\n          updatedAt: serverTimestamp(),\n          // linkage fields for context\n          vendorId,\n          vendorName: vendorName || null,\n          poId,\n          poNumber,\n          operation,\n          newStatus,\n          source: 'statusManager',\n          autoGenerated: true,\n        });\n      }\n    } catch (e) {\n      console.warn('Todo auto-create skipped/failed:', e?.message || e);\n    }\n\n    // Propagate to related entities (relational updates)\n    // 1) Delivery Challans linked by poId\n    try {\n      const dcsSnap = await getDocs(\n        query(collection(db, 'deliveryChallans'), where('poId', '==', poId))\n      );\n      dcsSnap.forEach((dcDoc) => {\n        batch.update(doc(db, 'deliveryChallans', dcDoc.id), {\n          poStatus: derivedStatus,\n          poProgress: progress,\n          updatedAt: serverTimestamp(),\n        });\n      });\n    } catch (e) {\n      console.warn('DC propagation skipped/failed:', e?.message || e);\n    }\n\n    // 2) Job Assignments linked by poId or reference == poNumber\n    const mapPOToJobStatus = (poStatus) => {\n      switch (poStatus) {\n        case 'completed':\n          return 'completed';\n        case 'in_progress':\n          return 'in-progress';\n        case 'pending':\n        default:\n          return 'assigned';\n      }\n    };\n\n    try {\n      const updates = [];\n      // By poId\n      const jobsByPoId = await getDocs(\n        query(collection(db, 'jobAssignments'), where('poId', '==', poId))\n      );\n      jobsByPoId.forEach((j) => updates.push(j.id));\n\n      // Fallback by reference == poNumber (if present)\n      const poNumber = currentData.poNumber;\n      if (updates.length === 0 && poNumber) {\n        const jobsByRef = await getDocs(\n          query(collection(db, 'jobAssignments'), where('reference', '==', poNumber))\n        );\n        jobsByRef.forEach((j) => updates.push(j.id));\n      }\n\n      const jobStatus = mapPOToJobStatus(derivedStatus);\n      updates.forEach((jobId) => {\n        batch.update(doc(db, 'jobAssignments', jobId), {\n          status: jobStatus,\n          updatedAt: serverTimestamp(),\n        });\n      });\n    } catch (e) {\n      console.warn('Job propagation skipped/failed:', e?.message || e);\n    }\n\n    // History record\n    const historyRef = doc(collection(db, 'operationHistory'));\n    batch.set(historyRef, {\n      itemId: poId,\n      itemType: 'po_operation',\n      operation,\n      oldStatus: currentStatus,\n      newStatus,\n      notes: notes || '',\n      userId: user?.uid || null,\n      userName: user?.displayName || user?.email || 'Unknown',\n      timestamp: serverTimestamp(),\n    });\n\n    await batch.commit();\n    return true;\n  } catch (error) {\n    console.error('Error in operation status service:', error);\n    throw error;\n  }\n};\n\n// Operation Tracker Component\nconst OperationTracker = ({ item, history, onClose, getStatusColor, getStatusIcon, getVendorName }) => {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6 border-b border-gray-200 flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Operation History - {item.poNumber}</h2>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\">\n            <FiX size={24} />\n          </button>\n        </div>\n        \n        <div className=\"p-6\">\n          <div className=\"mb-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-500\">Vendor</h3>\n              <p className=\"text-lg font-medium\">{getVendorName(item.vendorId)}</p>\n            </div>\n            <div>\n              <h3 className=\"text-sm font-medium text-gray-500\">Current Status</h3>\n              <p className={`inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${getStatusColor(item.status)}`}>\n                {getStatusIcon(item.status)}\n                <span className=\"ml-1 capitalize\">{item.status?.replace('_', ' ')}</span>\n              </p>\n            </div>\n          </div>\n          \n          <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Operation Timeline</h3>\n          \n          {history.length > 0 ? (\n            <div className=\"space-y-4\">\n              {history.map((record, index) => (\n                <div key={record.id || index} className=\"flex\">\n                  <div className=\"flex flex-col items-center mr-4\">\n                    <div className={`w-3 h-3 rounded-full ${\n                      record.newStatus === 'completed' ? 'bg-green-500' :\n                      record.newStatus === 'in_progress' ? 'bg-blue-500' :\n                      record.newStatus === 'pending' ? 'bg-yellow-500' : 'bg-gray-500'\n                    }`}></div>\n                    {index < history.length - 1 && (\n                      <div className=\"w-0.5 h-16 bg-gray-300 my-1\"></div>\n                    )}\n                  </div>\n                  <div className=\"flex-1 pb-4\">\n                    <div className=\"flex justify-between\">\n                      <span className=\"text-sm font-medium text-gray-900\">\n                        {MACHINE_OPERATIONS[record.operation]?.name || record.operation}\n                      </span>\n                      <span className=\"text-sm text-gray-500\">\n                        {record.timestamp?.toDate?.().toLocaleString() || 'N/A'}\n                      </span>\n                    </div>\n                    <p className=\"text-sm text-gray-600 mt-1\">\n                      Changed from <span className=\"font-medium\">{record.oldStatus}</span> to <span className=\"font-medium\">{record.newStatus}</span>\n                      {record.notes && ` - ${record.notes}`}\n                    </p>\n                    <p className=\"text-xs text-gray-500 mt-1\">By: {record.userName}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n          ) : (\n            <div className=\"text-center py-8 text-gray-500\">\n              No history available for this operation\n            </div>\n          )}\n        </div>\n        \n        <div className=\"p-6 border-t border-gray-200 flex justify-end\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Status Update Modal Component\nconst StatusUpdateModal = ({ isOpen, onClose, operation, currentStatus, onStatusUpdate }) => {\n  const [notes, setNotes] = useState('');\n  const [selectedStatus, setSelectedStatus] = useState(currentStatus);\n  const [updating, setUpdating] = useState(false);\n\n  useEffect(() => {\n    if (isOpen) {\n      setSelectedStatus(currentStatus);\n      setNotes('');\n    }\n  }, [isOpen, currentStatus]);\n\n  const handleSubmit = async () => {\n    if (selectedStatus === currentStatus) {\n      onClose();\n      return;\n    }\n\n    setUpdating(true);\n    try {\n      await onStatusUpdate(selectedStatus, notes);\n      onClose();\n    } catch (error) {\n      console.error('Error updating status:', error);\n    } finally {\n      setUpdating(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\n      <div className=\"bg-white rounded-xl shadow-xl max-w-md w-full\">\n        <div className=\"p-6 border-b border-gray-200\">\n          <h2 className=\"text-xl font-bold text-gray-900\">Update Operation Status</h2>\n          <p className=\"text-sm text-gray-600 mt-1\">\n            {MACHINE_OPERATIONS[operation]?.name || operation}\n          </p>\n        </div>\n        \n        <div className=\"p-6 space-y-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Status</label>\n            <div className=\"grid grid-cols-3 gap-2\">\n              <button\n                onClick={() => setSelectedStatus('pending')}\n                className={`p-3 rounded-lg border text-center ${\n                  selectedStatus === 'pending'\n                    ? 'bg-yellow-100 border-yellow-500 text-yellow-700'\n                    : 'bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <FiClock className=\"mx-auto mb-1\" />\n                <span className=\"text-xs\">Pending</span>\n              </button>\n              <button\n                onClick={() => setSelectedStatus('in_progress')}\n                className={`p-3 rounded-lg border text-center ${\n                  selectedStatus === 'in_progress'\n                    ? 'bg-blue-100 border-blue-500 text-blue-700'\n                    : 'bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <FiPlay className=\"mx-auto mb-1\" />\n                <span className=\"text-xs\">In Progress</span>\n              </button>\n              <button\n                onClick={() => setSelectedStatus('completed')}\n                className={`p-3 rounded-lg border text-center ${\n                  selectedStatus === 'completed'\n                    ? 'bg-green-100 border-green-500 text-green-700'\n                    : 'bg-gray-100 border-gray-300 text-gray-700 hover:bg-gray-200'\n                }`}\n              >\n                <FiCheckCircle className=\"mx-auto mb-1\" />\n                <span className=\"text-xs\">Completed</span>\n              </button>\n            </div>\n          </div>\n          \n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">Notes (Optional)</label>\n            <textarea\n              value={notes}\n              onChange={(e) => setNotes(e.target.value)}\n              placeholder=\"Add any notes about this status change...\"\n              className=\"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n              rows={3}\n            />\n          </div>\n        </div>\n        \n        <div className=\"p-6 border-t border-gray-200 flex justify-end space-x-3\">\n          <button\n            onClick={onClose}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n            disabled={updating}\n          >\n            Cancel\n          </button>\n          <button\n            onClick={handleSubmit}\n            disabled={updating || selectedStatus === currentStatus}\n            className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center\"\n          >\n            {updating ? (\n              <>\n                <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                Updating...\n              </>\n            ) : (\n              'Update Status'\n            )}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default function StatusManager() {\n  const { showSuccess, showError } = useNotification();\n  const { currentUser } = useAuth();\n  const [jobs, setJobs] = useState([]);\n  const [pos, setPOs] = useState([]);\n  const [vendors, setVendors] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [updating, setUpdating] = useState({});\n  const [activeTab, setActiveTab] = useState('operations');\n  const [selectedItem, setSelectedItem] = useState(null);\n  const [showTracker, setShowTracker] = useState(false);\n  const [operationHistory, setOperationHistory] = useState([]);\n  const [filters, setFilters] = useState({\n    status: 'all',\n    operation: 'all',\n    search: '',\n    dateRange: 'all',\n    vendor: 'all'\n  });\n  const [viewMode, setViewMode] = useState('table');\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [isMobile, setIsMobile] = useState(false);\n  const [sortConfig, setSortConfig] = useState({ key: 'createdAt', direction: 'desc' });\n  const [autoRefresh, setAutoRefresh] = useState(false);\n  const refreshIntervalRef = useRef(null);\n  const [completedOperations, setCompletedOperations] = useState([]);\n  const [vendorPerformance, setVendorPerformance] = useState({});\n  const [statusUpdateModal, setStatusUpdateModal] = useState({\n    isOpen: false,\n    poId: null,\n    operation: null,\n    currentStatus: null\n  });\n\n  useEffect(() => {\n    try {\n      const saved = localStorage.getItem('statusManagerFilters');\n      if (saved) {\n        const parsed = JSON.parse(saved);\n        setFilters(prev => ({ ...prev, ...parsed }));\n      }\n    } catch {}\n\n    fetchData();\n    \n    // Check if mobile\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768);\n    };\n    \n    checkMobile();\n    window.addEventListener('resize', checkMobile);\n    \n    return () => {\n      window.removeEventListener('resize', checkMobile);\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n      }\n    };\n  }, []);\n\n  useEffect(() => {\n    if (autoRefresh) {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n      }\n      refreshIntervalRef.current = setInterval(fetchData, 30000);\n    } else {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n        refreshIntervalRef.current = null;\n      }\n    }\n    return () => {\n      if (refreshIntervalRef.current) {\n        clearInterval(refreshIntervalRef.current);\n      }\n    };\n  }, [autoRefresh]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('statusManagerFilters', JSON.stringify(filters));\n    } catch {}\n  }, [filters]);\n\n  // Calculate vendor performance metrics\n  useEffect(() => {\n    if (pos.length > 0 && vendors.length > 0) {\n      const performance = {};\n      \n      vendors.forEach(vendor => {\n        const vendorPOs = pos.filter(po => po.vendorId === vendor.id);\n        const completedOps = [];\n        \n        vendorPOs.forEach(po => {\n          Object.entries(po.operationsStatus || {}).forEach(([operation, status]) => {\n            if (status === 'completed') {\n              completedOps.push({\n                poNumber: po.poNumber,\n                operation,\n                completionDate: po.updatedAt || po.createdAt,\n                vendor: vendor.name\n              });\n            }\n          });\n        });\n        \n        performance[vendor.id] = {\n          name: vendor.name,\n          totalPOs: vendorPOs.length,\n          totalOperations: completedOps.length,\n          completedOperations: completedOps,\n          efficiency: vendorPOs.length > 0 \n            ? (completedOps.length / (vendorPOs.length * Object.keys(MACHINE_OPERATIONS).length)) * 100 \n            : 0,\n          averageCompletionTime: calculateAverageCompletionTime(vendorPOs)\n        };\n      });\n      \n      setVendorPerformance(performance);\n      setCompletedOperations(\n        Object.values(performance)\n          .flatMap(v => v.completedOperations)\n          .sort((a, b) => new Date(b.completionDate) - new Date(a.completionDate))\n      );\n    }\n  }, [pos, vendors]);\n\n  const calculateAverageCompletionTime = (vendorPOs) => {\n    let totalTime = 0;\n    let count = 0;\n    \n    vendorPOs.forEach(po => {\n      Object.entries(po.operationsMeta || {}).forEach(([operation, meta]) => {\n        if (meta.completedAt && meta.startedAt) {\n          const startTime = meta.startedAt.toDate ? meta.startedAt.toDate() : new Date(meta.startedAt);\n          const endTime = meta.completedAt.toDate ? meta.completedAt.toDate() : new Date(meta.completedAt);\n          totalTime += (endTime - startTime);\n          count++;\n        }\n      });\n    });\n    \n    return count > 0 ? totalTime / count : 0;\n  };\n\n  const fetchData = async () => {\n    try {\n      setLoading(true);\n      const [jobsSnapshot, posSnapshot, vendorsSnapshot] = await Promise.all([\n        getDocs(collection(db, 'jobAssignments')),\n        getDocs(query(collection(db, 'purchaseOrders'), orderBy('createdAt', 'desc'))),\n        getDocs(collection(db, 'vendors'))\n      ]);\n      \n      const jobsData = [];\n      jobsSnapshot.forEach((doc) => {\n        jobsData.push({ id: doc.id, ...doc.data() });\n      });\n      \n      const posData = [];\n      posSnapshot.forEach((doc) => {\n        const data = doc.data();\n        posData.push({ \n          id: doc.id, \n          ...data,\n          // Ensure operationsStatus exists and has all operations\n          operationsStatus: {\n            ...Object.keys(MACHINE_OPERATIONS).reduce((acc, op) => ({ \n              ...acc, \n              [op]: data.operationsStatus?.[op] || 'pending' \n            }), {}),\n            ...(data.operationsStatus || {})\n          }\n        });\n      });\n      \n      const vendorsData = [];\n      vendorsSnapshot.forEach((doc) => {\n        vendorsData.push({ id: doc.id, ...doc.data() });\n      });\n      \n      setJobs(jobsData);\n      setPOs(posData);\n      setVendors(vendorsData);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      showError('Failed to load data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const updatePOOperationStatus = async (poId, operation, newStatus, notes = '') => {\n    try {\n      setUpdating(prev => ({ ...prev, [`${poId}_${operation}`]: true }));\n      const po = pos.find(p => p.id === poId);\n      const oldStatus = po?.operationsStatus?.[operation] || 'pending';\n\n      // Call centralized atomic service with authenticated user context\n      await updatePOOperationStatusService(poId, operation, newStatus, currentUser || {}, notes);\n\n      // Update local state then compute derived overall status inline\n      setPOs(prev => prev.map(p => {\n        if (p.id !== poId) return p;\n        const updatedOps = { ...(p.operationsStatus || {}), [operation]: newStatus };\n        \n        // Calculate completion percentage\n        const totalOperations = Object.keys(MACHINE_OPERATIONS).length;\n        const completedOperations = Object.values(updatedOps).filter(status => status === 'completed').length;\n        const progress = Math.round((completedOperations / totalOperations) * 100);\n        \n        // Determine overall status\n        let derivedStatus = p.status || 'pending';\n        if (completedOperations === totalOperations) derivedStatus = 'completed';\n        else if (completedOperations > 0 || Object.values(updatedOps).some(status => status === 'in_progress')) {\n          derivedStatus = 'in_progress';\n        }\n        \n        return { \n          ...p, \n          operationsStatus: updatedOps, \n          status: derivedStatus,\n          progress \n        };\n      }));\n\n      showSuccess(`Updated ${MACHINE_OPERATIONS[operation].name} from ${oldStatus} to ${newStatus}`);\n    } catch (error) {\n      console.error('Error updating operation status:', error);\n      showError('Failed to update operation status');\n    } finally {\n      setUpdating(prev => ({ ...prev, [`${poId}_${operation}`]: false }));\n    }\n  };\n\n  const openStatusUpdateModal = (poId, operation, currentStatus) => {\n    setStatusUpdateModal({\n      isOpen: true,\n      poId,\n      operation,\n      currentStatus\n    });\n  };\n\n  const closeStatusUpdateModal = () => {\n    setStatusUpdateModal({\n      isOpen: false,\n      poId: null,\n      operation: null,\n      currentStatus: null\n    });\n  };\n\n  const handleStatusUpdate = async (newStatus, notes) => {\n    const { poId, operation } = statusUpdateModal;\n    await updatePOOperationStatus(poId, operation, newStatus, notes);\n  };\n\n  const getVendorName = (vendorId) => {\n    const vendor = vendors.find(v => v.id === vendorId);\n    return vendor ? vendor.name : 'Unknown Vendor';\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'completed':\n        return 'bg-green-100 text-green-800';\n      case 'in_progress':\n        return 'bg-blue-100 text-blue-800';\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'rejected':\n      case 'cancelled':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'completed':\n        return <FiCheckCircle className=\"text-green-500\" />;\n      case 'in_progress':\n        return <FiPlay className=\"text-blue-500\" />;\n      case 'pending':\n        return <FiClock className=\"text-yellow-500\" />;\n      case 'rejected':\n      case 'cancelled':\n        return <FiX className=\"text-red-500\" />;\n      default:\n        return <FiAlertCircle className=\"text-gray-500\" />;\n    }\n  };\n\n  const getOperationIcon = (operation) => {\n    const OperationIcon = MACHINE_OPERATIONS[operation]?.icon || FiTool;\n    const color = MACHINE_OPERATIONS[operation]?.color;\n    const colorClass =\n      color === 'blue' ? 'text-blue-500' :\n      color === 'purple' ? 'text-purple-500' :\n      color === 'green' ? 'text-green-500' :\n      color === 'indigo' ? 'text-indigo-500' :\n      'text-gray-500';\n    return <OperationIcon className={colorClass} />;\n  };\n\n  const fetchOperationHistory = async (itemId, itemType) => {\n    try {\n      const historyQuery = query(\n        collection(db, 'operationHistory'),\n        where('itemId', '==', itemId),\n        where('itemType', '==', itemType),\n        orderBy('timestamp', 'desc')\n      );\n      const snapshot = await getDocs(historyQuery);\n      const history = [];\n      snapshot.forEach(doc => {\n        history.push({ id: doc.id, ...doc.data() });\n      });\n      setOperationHistory(history);\n    } catch (error) {\n      console.error('Error fetching operation history:', error);\n      setOperationHistory([]);\n    }\n  };\n\n  const openTracker = (item, type) => {\n    setSelectedItem({ ...item, type });\n    setShowTracker(true);\n    fetchOperationHistory(item.id, type);\n  };\n\n  const filteredPOs = useMemo(() => {\n    let filtered = pos.filter(po => {\n      const matchesStatus = filters.status === 'all' || po.status === filters.status;\n      const matchesVendor = filters.vendor === 'all' || po.vendorId === filters.vendor;\n      const matchesOperation = filters.operation === 'all' || \n        (po.operationsStatus && filters.operation in po.operationsStatus);\n      const matchesSearch = po.poNumber?.toLowerCase().includes(filters.search.toLowerCase()) ||\n                           getVendorName(po.vendorId).toLowerCase().includes(filters.search.toLowerCase());\n      \n      let matchesDate = true;\n      if (filters.dateRange !== 'all' && po.createdAt) {\n        const poDate = po.createdAt.toDate ? po.createdAt.toDate() : new Date(po.createdAt);\n        const now = new Date();\n        const daysDiff = Math.floor((now - poDate) / (1000 * 60 * 60 * 24));\n        \n        switch (filters.dateRange) {\n          case 'today': matchesDate = daysDiff === 0; break;\n          case 'week': matchesDate = daysDiff <= 7; break;\n          case 'month': matchesDate = daysDiff <= 30; break;\n          default: matchesDate = true;\n        }\n      }\n      \n      return matchesStatus && matchesVendor && matchesOperation && matchesSearch && matchesDate;\n    });\n    \n    return filtered.sort((a, b) => {\n      const aVal = a[sortConfig.key];\n      const bVal = b[sortConfig.key];\n      \n      if (sortConfig.key === 'progress') {\n        return sortConfig.direction === 'asc' ? aVal - bVal : bVal - aVal;\n      }\n      \n      if (aVal < bVal) return sortConfig.direction === 'asc' ? -1 : 1;\n      if (aVal > bVal) return sortConfig.direction === 'asc' ? 1 : -1;\n      return 0;\n    });\n  }, [pos, filters, sortConfig]);\n\n  const uniqueVendors = useMemo(() => {\n    const vendorIds = [...new Set(pos.map(p => p.vendorId))];\n    return vendorIds.map(id => ({ id, name: getVendorName(id) })).filter(v => v.name !== 'Unknown Vendor');\n  }, [pos, vendors]);\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6\">\n        <div className=\"flex flex-col lg:flex-row lg:justify-between lg:items-start space-y-4 lg:space-y-0\">\n          <div className=\"flex items-center space-x-4\">\n            <div className=\"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center\">\n              <FiActivity className=\"text-white\" size={24} />\n            </div>\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-900\">Machine Operations Manager</h1>\n              <p className=\"text-base text-gray-600 mt-1\">Track and manage all machine operations</p>\n            </div>\n          </div>\n          \n          <div className=\"flex items-center space-x-3\">\n            <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n              <FiBell className=\"text-indigo-500\" size={16} />\n              <span>Live Updates</span>\n              <div className={`w-2 h-2 rounded-full animate-pulse ${\n                autoRefresh ? 'bg-green-400' : 'bg-gray-400'\n              }`} />\n            </div>\n            \n            <button\n              onClick={() => setAutoRefresh(!autoRefresh)}\n              className={`p-2 rounded-lg transition-all duration-200 ${\n                autoRefresh \n                  ? 'bg-green-100 text-green-600 hover:bg-green-200' \n                  : 'bg-gray-100 text-gray-600 hover:bg-gray-200'\n              }`}\n              title={autoRefresh ? 'Disable auto-refresh' : 'Enable auto-refresh'}\n            >\n              <FiRefreshCw className={autoRefresh ? 'animate-spin' : ''} size={16} />\n            </button>\n            \n            <button\n              onClick={fetchData}\n              className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl\"\n            >\n              <FiRefreshCw className=\"mr-2\" size={16} />\n              Refresh Data\n            </button>\n          </div>\n        </div>\n        \n        {/* Stats Overview */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n          <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg border border-blue-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-blue-600 text-sm font-medium\">Total POs</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{pos.length}</p>\n              </div>\n              <FiFileText className=\"text-blue-500\" size={24} />\n            </div>\n          </div>\n          \n          <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 p-4 rounded-lg border border-green-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-green-600 text-sm font-medium\">Completed Ops</p>\n                <p className=\"text-2xl font-bold text-green-900\">\n                  {completedOperations.length}\n                </p>\n              </div>\n              <FiCheckCircle className=\"text-green-500\" size={24} />\n            </div>\n          </div>\n          \n          <div className=\"bg-gradient-to-br from-yellow-50 to-orange-50 p-4 rounded-lg border border-yellow-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-yellow-600 text-sm font-medium\">In Progress</p>\n                <p className=\"text-2xl font-bold text-yellow-900\">\n                  {pos.filter(po => po.status === 'in_progress').length}\n                </p>\n              </div>\n              <FiPlay className=\"text-yellow-500\" size={24} />\n            </div>\n          </div>\n          \n          <div className=\"bg-gradient-to-br from-purple-50 to-pink-50 p-4 rounded-lg border border-purple-100\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-purple-600 text-sm font-medium\">Active Vendors</p>\n                <p className=\"text-2xl font-bold text-purple-900\">{uniqueVendors.length}</p>\n              </div>\n              <FiUser className=\"text-purple-500\" size={24} />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Tabs */}\n      <div className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-2\">\n        <nav className=\"flex space-x-2\">\n          {['operations', 'vendors', 'completed'].map(tab => (\n            <button\n              key={tab}\n              onClick={() => setActiveTab(tab)}\n              className={`flex-1 py-3 px-4 rounded-lg font-medium text-sm transition-all duration-200 ${\n                activeTab === tab\n                  ? 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg'\n                  : 'text-gray-600 hover:text-gray-900 hover:bg-gray-50'\n              }`}\n            >\n              <div className=\"flex items-center justify-center space-x-2\">\n                {tab === 'operations' && <FiActivity size={16} />}\n                {tab === 'vendors' && <FiBarChart2 size={16} />}\n                {tab === 'completed' && <FiCheckCircle size={16} />}\n                <span className=\"capitalize\">{tab}</span>\n              </div>\n            </button>\n          ))}\n        </nav>\n      </div>\n\n      {/* Main Content Area */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-6\">\n        {/* Filters Sidebar */}\n        <aside className=\"lg:col-span-1 space-y-4\">\n          <div className=\"bg-white p-4 rounded-lg shadow-sm border border-gray-200 sticky top-4\">\n            <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Filters</h3>\n            \n            <div className=\"space-y-4\">\n              <div className=\"relative\">\n                <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search POs or vendors...\"\n                  value={filters.search}\n                  onChange={(e) => setFilters(prev => ({ ...prev, search: e.target.value }))}\n                  className=\"w-full pl-10 pr-4 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Status</label>\n                <select\n                  value={filters.status}\n                  onChange={(e) => setFilters(prev => ({ ...prev, status: e.target.value }))}\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">All Status</option>\n                  <option value=\"pending\">Pending</option>\n                  <option value=\"in_progress\">In Progress</option>\n                  <option value=\"completed\">Completed</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Operation</label>\n                <select\n                  value={filters.operation}\n                  onChange={(e) => setFilters(prev => ({ ...prev, operation: e.target.value }))}\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">All Operations</option>\n                  {Object.keys(MACHINE_OPERATIONS).map(op => (\n                    <option key={op} value={op}>{MACHINE_OPERATIONS[op].name}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Vendor</label>\n                <select\n                  value={filters.vendor}\n                  onChange={(e) => setFilters(prev => ({ ...prev, vendor: e.target.value }))}\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">All Vendors</option>\n                  {uniqueVendors.map(vendor => (\n                    <option key={vendor.id} value={vendor.id}>{vendor.name}</option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-1\">Time Range</label>\n                <select\n                  value={filters.dateRange}\n                  onChange={(e) => setFilters(prev => ({ ...prev, dateRange: e.target.value }))}\n                  className=\"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                >\n                  <option value=\"all\">All Time</option>\n                  <option value=\"today\">Today</option>\n                  <option value=\"week\">This Week</option>\n                  <option value=\"month\">This Month</option>\n                </select>\n              </div>\n\n              <div className=\"flex items-center justify-between pt-2\">\n                <span className=\"text-xs text-gray-500\">{filteredPOs.length} POs</span>\n                <button\n                  className=\"text-xs text-indigo-600 hover:text-indigo-800\"\n                  onClick={() => setFilters({ status: 'all', operation: 'all', search: '', dateRange: 'all', vendor: 'all' })}\n                >\n                  Clear Filters\n                </button>\n              </div>\n            </div>\n          </div>\n\n          {/* Vendor Performance Summary */}\n         \n        </aside>\n\n        {/* Main Content */}\n        <section className=\"lg:col-span-3\">\n          {activeTab === 'operations' && (\n            <OperationsTable \n              pos={filteredPOs}\n              vendors={vendors}\n              updating={updating}\n              onUpdateOperationStatus={updatePOOperationStatus}\n              onOpenTracker={openTracker}\n              onOpenStatusUpdateModal={openStatusUpdateModal}\n              getVendorName={getVendorName}\n              getStatusColor={getStatusColor}\n              getStatusIcon={getStatusIcon}\n              getOperationIcon={getOperationIcon}\n            />\n          )}\n\n          {activeTab === 'vendors' && (\n            <VendorsPerformance \n              vendorPerformance={vendorPerformance}\n              getVendorName={getVendorName}\n            />\n          )}\n\n          {activeTab === 'completed' && (\n            <CompletedOperations \n              completedOperations={completedOperations}\n              vendors={vendors}\n              getVendorName={getVendorName}\n            />\n          )}\n        </section>\n      </div>\n\n      {/* Operation Tracker Modal */}\n      {showTracker && selectedItem && (\n        <OperationTracker\n          item={selectedItem}\n          history={operationHistory}\n          onClose={() => {\n            setShowTracker(false);\n            setSelectedItem(null);\n            fetchData();\n          }}\n          getStatusColor={getStatusColor}\n          getStatusIcon={getStatusIcon}\n          getVendorName={getVendorName}\n        />\n      )}\n\n      {/* Status Update Modal */}\n      <StatusUpdateModal\n        isOpen={statusUpdateModal.isOpen}\n        onClose={closeStatusUpdateModal}\n        operation={statusUpdateModal.operation}\n        currentStatus={statusUpdateModal.currentStatus}\n        onStatusUpdate={handleStatusUpdate}\n      />\n    </div>\n  );\n}\n\n// Operations Table Component\nfunction OperationsTable({ pos, vendors, updating, onUpdateOperationStatus, onOpenTracker, onOpenStatusUpdateModal, getVendorName, getStatusColor, getStatusIcon, getOperationIcon }) {\n  const [expandedRow, setExpandedRow] = useState(null);\n  \n  const toggleRowExpansion = (poId) => {\n    setExpandedRow(expandedRow === poId ? null : poId);\n  };\n\n  const handleStatusChange = (poId, operation, newStatus) => {\n    onUpdateOperationStatus(poId, operation, newStatus, `Status changed to ${newStatus}`);\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n      {/* Mobile Card List */}\n      <div className=\"md:hidden divide-y divide-gray-100\">\n        {pos.map((po) => (\n          <div key={po.id} className=\"p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <div className=\"text-sm text-gray-500\">PO</div>\n                <div className=\"text-base font-semibold text-gray-900\">{po.poNumber}</div>\n                <div className=\"text-xs text-gray-500\">{po.createdAt?.toDate?.()?.toLocaleDateString() || 'N/A'}</div>\n              </div>\n              <span className={`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${getStatusColor(po.status)}`}>\n                {getStatusIcon(po.status)}\n                <span className=\"ml-1 capitalize\">{po.status?.replace('_', ' ')}</span>\n              </span>\n            </div>\n            <div className=\"mt-3 flex items-center\">\n              <div className=\"w-32 bg-gray-200 rounded-full h-2 mr-2\">\n                <div className=\"bg-indigo-600 h-2 rounded-full\" style={{ width: `${po.progress || 0}%` }} />\n              </div>\n              <span className=\"text-xs text-gray-700\">{po.progress || 0}%</span>\n            </div>\n            <div className=\"mt-2 text-sm text-gray-700\">Vendor: <span className=\"font-medium\">{getVendorName(po.vendorId)}</span></div>\n\n            {/* Operations grid */}\n            <div className=\"mt-3 grid grid-cols-2 gap-2\">\n              {Object.entries(MACHINE_OPERATIONS).map(([opKey, opConfig]) => {\n                const status = po.operationsStatus?.[opKey] || 'pending';\n                const OperationIcon = opConfig.icon;\n                const isUpdating = updating[`${po.id}_${opKey}`];\n                return (\n                  <div key={opKey} className=\"border rounded-lg p-2\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center\">\n                        {getOperationIcon(opKey)}\n                        <span className=\"ml-2 text-xs font-medium\">{opConfig.name}</span>\n                      </div>\n                      <span className={`inline-flex items-center px-2 py-0.5 rounded-full text-[10px] font-medium ${getStatusColor(status)}`}>\n                        <span className=\"capitalize\">{status.replace('_', ' ')}</span>\n                      </span>\n                    </div>\n                    <div className=\"mt-2 grid grid-cols-3 gap-1\">\n                      <button\n                        onClick={() => onOpenStatusUpdateModal(po.id, opKey, status)}\n                        className=\"col-span-3 py-1 text-[11px] bg-indigo-600 text-white rounded hover:bg-indigo-700\"\n                      >Update</button>\n                      <button\n                        onClick={() => onUpdateOperationStatus(po.id, opKey, 'pending', 'Status changed to pending')}\n                        disabled={isUpdating || status === 'pending'}\n                        className={`py-1 text-[11px] rounded ${status==='pending'?'bg-yellow-100 text-yellow-800 border border-yellow-300':'bg-gray-100 text-gray-700'}`}\n                      >Pending</button>\n                      <button\n                        onClick={() => onUpdateOperationStatus(po.id, opKey, 'in_progress', 'Status changed to in_progress')}\n                        disabled={isUpdating || status === 'in_progress'}\n                        className={`py-1 text-[11px] rounded ${status==='in_progress'?'bg-blue-100 text-blue-800 border border-blue-300':'bg-gray-100 text-gray-700'}`}\n                      >Start</button>\n                      <button\n                        onClick={() => onUpdateOperationStatus(po.id, opKey, 'completed', 'Status changed to completed')}\n                        disabled={isUpdating || status === 'completed'}\n                        className={`py-1 text-[11px] rounded ${status==='completed'?'bg-green-100 text-green-800 border border-green-300':'bg-gray-100 text-gray-700'}`}\n                      >Complete</button>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n\n            <div className=\"mt-3\">\n              <button\n                onClick={() => onOpenTracker(po, 'po')}\n                className=\"w-full text-center py-2 text-indigo-600 border border-indigo-200 rounded-lg hover:bg-indigo-50\"\n              >View Details</button>\n            </div>\n          </div>\n        ))}\n        {pos.length === 0 && (\n          <div className=\"p-6 text-center text-gray-500\">No purchase orders found</div>\n        )}\n      </div>\n\n      {/* Desktop/Tablet Table */}\n      <div className=\"hidden md:block overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                PO Details\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Vendor\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Progress\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Status\n              </th>\n              <th scope=\"col\" className=\"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {pos.map((po) => (\n              <React.Fragment key={po.id}>\n                <tr className=\"hover:bg-gray-50 cursor-pointer\" onClick={() => toggleRowExpansion(po.id)}>\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"ml-4\">\n                        <div className=\"text-sm font-medium text-gray-900\">{po.poNumber}</div>\n                        <div className=\"text-sm text-gray-500\">\n                          {po.createdAt?.toDate?.()?.toLocaleDateString() || 'N/A'}\n                        </div>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{getVendorName(po.vendorId)}</div>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-32 bg-gray-200 rounded-full h-2.5 mr-4\">\n                        <div \n                          className=\"bg-indigo-600 h-2.5 rounded-full\" \n                          style={{ width: `${po.progress || 0}%` }}\n                        />\n                      </div>\n                      <span className=\"text-sm font-medium text-gray-700\">\n                        {po.progress || 0}%\n                      </span>\n                    </div>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap\">\n                    <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(po.status)}`}>\n                      {getStatusIcon(po.status)}\n                      <span className=\"ml-1 capitalize\">{po.status?.replace('_', ' ')}</span>\n                    </span>\n                  </td>\n                  <td className=\"px-4 py-4 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex space-x-2\">\n                      <button\n                        onClick={(e) => {\n                          e.stopPropagation();\n                          onOpenTracker(po, 'po');\n                        }}\n                        className=\"text-indigo-600 hover:text-indigo-900\"\n                      >\n                        View Details\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n                \n                {expandedRow === po.id && (\n                  <tr className=\"bg-gray-50\">\n                    <td colSpan={5} className=\"px-4 py-4\">\n                      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n                        {Object.entries(MACHINE_OPERATIONS).map(([opKey, opConfig]) => {\n                          const status = po.operationsStatus?.[opKey] || 'pending';\n                          const OperationIcon = opConfig.icon;\n                          const isUpdating = updating[`${po.id}_${opKey}`];\n                          \n                          return (\n                            <div key={opKey} className=\"bg-white rounded-lg p-4 shadow-sm border border-gray-200\">\n                              <div className=\"flex items-center justify-between mb-3\">\n                                <div className=\"flex items-center\">\n                                  {getOperationIcon(opKey)}\n                                  <div className=\"text-sm font-medium text-gray-900\">{opConfig.name}</div>\n                                </div>\n                                <span className={`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${getStatusColor(status)}`}>\n                                  {getStatusIcon(status)}\n                                  <span className=\"ml-1 capitalize\">{status.replace('_', ' ')}</span>\n                                </span>\n                              </div>\n                              \n                              <div className=\"flex flex-col space-y-2\">\n                                <button\n                                  onClick={() => onOpenStatusUpdateModal(po.id, opKey, status)}\n                                  className=\"w-full py-2 px-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors text-sm font-medium\"\n                                >\n                                  Update Status\n                                </button>\n                                \n                                <div className=\"flex space-x-1\">\n                                  <button\n                                    onClick={() => handleStatusChange(po.id, opKey, 'pending')}\n                                    disabled={isUpdating || status === 'pending'}\n                                    className={`flex-1 py-1 px-2 text-xs rounded ${\n                                      status === 'pending' \n                                        ? 'bg-yellow-100 text-yellow-800 border border-yellow-300' \n                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                                    } ${isUpdating ? 'opacity-50 cursor-not-allowed' : ''}`}\n                                  >\n                                    {isUpdating && status === 'pending' ? '...' : 'Pending'}\n                                  </button>\n                                  \n                                  <button\n                                    onClick={() => handleStatusChange(po.id, opKey, 'in_progress')}\n                                    disabled={isUpdating || status === 'in_progress'}\n                                    className={`flex-1 py-1 px-2 text-xs rounded ${\n                                      status === 'in_progress' \n                                        ? 'bg-blue-100 text-blue-800 border border-blue-300' \n                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                                    } ${isUpdating ? 'opacity-50 cursor-not-allowed' : ''}`}\n                                  >\n                                    {isUpdating && status === 'in_progress' ? '...' : 'Start'}\n                                  </button>\n                                  \n                                  <button\n                                    onClick={() => handleStatusChange(po.id, opKey, 'completed')}\n                                    disabled={isUpdating || status === 'completed'}\n                                    className={`flex-1 py-1 px-2 text-xs rounded ${\n                                      status === 'completed' \n                                        ? 'bg-green-100 text-green-800 border border-green-300' \n                                        : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n                                    } ${isUpdating ? 'opacity-50 cursor-not-allowed' : ''}`}\n                                  >\n                                    {isUpdating && status === 'completed' ? '...' : 'Complete'}\n                                  </button>\n                                </div>\n                              </div>\n                            </div>\n                          );\n                        })}\n                      </div>\n                    </td>\n                  </tr>\n                )}\n              </React.Fragment>\n            ))}\n          </tbody>\n        </table>\n        \n        {pos.length === 0 && (\n          <div className=\"text-center py-12\">\n            <FiFileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No purchase orders found</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">No purchase orders match your current filters.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Vendor Performance Component\nfunction VendorsPerformance({ vendorPerformance, getVendorName }) {\n  const formatTime = (milliseconds) => {\n    if (!milliseconds) return 'N/A';\n    \n    const hours = Math.floor(milliseconds / (1000 * 60 * 60));\n    const minutes = Math.floor((milliseconds % (1000 * 60 * 60)) / (1000 * 60));\n    \n    if (hours > 0) {\n      return `${hours}h ${minutes}m`;\n    }\n    return `${minutes}m`;\n  };\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Vendor Performance</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">Efficiency based on completed operations</p>\n      </div>\n      {/* Mobile Cards */}\n      <div className=\"md:hidden p-4 space-y-3\">\n        {Object.entries(vendorPerformance).length === 0 && (\n          <div className=\"text-center text-gray-500\">No vendor data available</div>\n        )}\n        {Object.entries(vendorPerformance)\n          .sort(([, a], [, b]) => b.efficiency - a.efficiency)\n          .map(([vendorId, data]) => (\n            <div key={vendorId} className=\"border rounded-xl p-4\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <div className=\"text-sm text-gray-500\">Vendor</div>\n                  <div className=\"text-base font-semibold text-gray-900\">{data.name}</div>\n                </div>\n                <div className=\"text-right\">\n                  <div className=\"text-sm text-gray-500\">POs</div>\n                  <div className=\"font-semibold\">{data.totalPOs}</div>\n                </div>\n              </div>\n              <div className=\"mt-2 text-sm text-gray-700\">Completed Ops: <span className=\"font-medium\">{data.totalOperations}</span></div>\n              <div className=\"mt-2 flex items-center\">\n                <div className=\"w-32 bg-gray-200 rounded-full h-2 mr-2\">\n                  <div className=\"bg-green-600 h-2 rounded-full\" style={{ width: `${Math.min(data.efficiency, 100)}%` }} />\n                </div>\n                <span className=\"text-xs text-gray-700\">{Math.round(data.efficiency)}%</span>\n              </div>\n              <div className=\"mt-2 text-xs text-gray-500\">Avg. Time: {formatTime(data.averageCompletionTime)}</div>\n            </div>\n          ))}\n      </div>\n\n      <div className=\"hidden md:block overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Vendor\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Total POs\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Completed Operations\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Efficiency\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Avg. Completion Time\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {Object.entries(vendorPerformance)\n              .sort(([, a], [, b]) => b.efficiency - a.efficiency)\n              .map(([vendorId, data]) => (\n                <tr key={vendorId} className=\"hover:bg-gray-50\">\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900\">{data.name}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{data.totalPOs}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900\">{data.totalOperations}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"flex items-center\">\n                      <div className=\"w-32 bg-gray-200 rounded-full h-2.5 mr-4\">\n                        <div \n                          className=\"bg-green-600 h-2.5 rounded-full\" \n                          style={{ width: `${Math.min(data.efficiency, 100)}%` }}\n                        />\n                      </div>\n                      <span className=\"text-sm font-medium text-gray-700\">\n                        {Math.round(data.efficiency)}%\n                      </span>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-500\">\n                      {formatTime(data.averageCompletionTime)}\n                    </div>\n                  </td>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        \n        {Object.keys(vendorPerformance).length === 0 && (\n          <div className=\"text-center py-12\">\n            <FiUser className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No vendor data available</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">Vendor performance data will appear here once operations are completed.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// Completed Operations Component\nfunction CompletedOperations({ completedOperations, getVendorName }) {\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n      <div className=\"px-6 py-4 border-b border-gray-200\">\n        <h3 className=\"text-lg font-medium text-gray-900\">Completed Operations</h3>\n        <p className=\"mt-1 text-sm text-gray-500\">All machine operations that have been completed</p>\n      </div>\n      {/* Mobile Cards */}\n      <div className=\"md:hidden p-4 space-y-3\">\n        {completedOperations.length === 0 && (\n          <div className=\"text-center text-gray-500\">No completed operations</div>\n        )}\n        {completedOperations.map((op, index) => (\n          <div key={index} className=\"border rounded-xl p-4\">\n            <div className=\"flex items-start justify-between\">\n              <div>\n                <div className=\"text-xs text-gray-500\">PO</div>\n                <div className=\"text-base font-semibold text-gray-900\">{op.poNumber}</div>\n                <div className=\"text-xs text-gray-500\">{op.completionDate?.toDate?.()?.toLocaleDateString() || 'N/A'}</div>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-xs text-gray-500\">Operation</div>\n                <div className=\"text-sm font-medium\">{MACHINE_OPERATIONS[op.operation]?.name || op.operation}</div>\n                <div className=\"text-xs text-gray-500 mt-1\">Vendor: {op.vendor}</div>\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      <div className=\"hidden md:block overflow-x-auto\">\n        <table className=\"min-w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                PO Number\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Operation\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Vendor\n              </th>\n              <th scope=\"col\" className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Completed On\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {completedOperations.map((op, index) => (\n              <tr key={index} className=\"hover:bg-gray-50\">\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm font-medium text-gray-900\">{op.poNumber}</div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900\">\n                    {MACHINE_OPERATIONS[op.operation]?.name || op.operation}\n                  </div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-900\">{op.vendor}</div>\n                </td>\n                <td className=\"px-6 py-4 whitespace-nowrap\">\n                  <div className=\"text-sm text-gray-500\">\n                    {op.completionDate?.toDate?.()?.toLocaleDateString() || 'N/A'}\n                  </div>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        \n        {completedOperations.length === 0 && (\n          <div className=\"text-center py-12\">\n            <FiCheckCircle className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No completed operations</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">Completed operations will appear here once they're finished.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":["MACHINE_OPERATIONS","HBL","name","icon","FiTool","color","VTL","FiCpu","Drilling","FiZap","VMC","FiTarget","updatePOOperationStatusService","async","poId","operation","newStatus","user","notes","arguments","length","undefined","_currentData$operatio","_currentData$operatio2","poRef","doc","db","poSnap","getDoc","exists","Error","currentData","data","currentStatus","operationsStatus","updatedOperationsStatus","totalOperations","Object","keys","completedOperations","values","filter","s","progress","Math","round","derivedStatus","status","some","batch","writeBatch","baseMeta","updatedAt","serverTimestamp","updatedBy","uid","email","displayName","extraMeta","startedAt","completedAt","update","operationsMeta","vendorId","vendorName","vendor","poNumber","title","priority","taskStatus","_MACHINE_OPERATIONS$o","_MACHINE_OPERATIONS$o2","_MACHINE_OPERATIONS$o3","_MACHINE_OPERATIONS$o4","_MACHINE_OPERATIONS$o5","deterministicId","Date","toISOString","slice","taskRef","set","description","assignedTo","dueDate","category","completed","department","equipment","estimatedTime","safetyNotes","sequence","step","createdAt","source","autoGenerated","e","console","warn","message","getDocs","query","collection","where","forEach","dcDoc","id","poStatus","poProgress","mapPOToJobStatus","updates","j","push","jobStatus","jobId","historyRef","itemId","itemType","oldStatus","userId","userName","timestamp","commit","error","OperationTracker","_ref","_item$status","item","history","onClose","getStatusColor","getStatusIcon","getVendorName","_jsx","className","children","_jsxs","onClick","FiX","size","replace","map","record","index","_MACHINE_OPERATIONS$r","_record$timestamp","_record$timestamp$toD","toDate","call","toLocaleString","StatusUpdateModal","_ref2","_MACHINE_OPERATIONS$o6","isOpen","onStatusUpdate","setNotes","useState","selectedStatus","setSelectedStatus","updating","setUpdating","useEffect","FiClock","FiPlay","FiCheckCircle","value","onChange","target","placeholder","rows","disabled","_Fragment","StatusManager","showSuccess","showError","useNotification","currentUser","useAuth","jobs","setJobs","pos","setPOs","vendors","setVendors","loading","setLoading","activeTab","setActiveTab","selectedItem","setSelectedItem","showTracker","setShowTracker","operationHistory","setOperationHistory","filters","setFilters","search","dateRange","viewMode","setViewMode","selectedItems","setSelectedItems","isMobile","setIsMobile","sortConfig","setSortConfig","key","direction","autoRefresh","setAutoRefresh","refreshIntervalRef","useRef","setCompletedOperations","vendorPerformance","setVendorPerformance","statusUpdateModal","setStatusUpdateModal","saved","localStorage","getItem","parsed","JSON","parse","prev","fetchData","checkMobile","window","innerWidth","addEventListener","removeEventListener","current","clearInterval","setInterval","setItem","stringify","performance","vendorPOs","po","completedOps","entries","_ref3","completionDate","totalPOs","efficiency","averageCompletionTime","calculateAverageCompletionTime","flatMap","v","sort","a","b","totalTime","count","_ref4","meta","startTime","endTime","jobsSnapshot","posSnapshot","vendorsSnapshot","Promise","all","orderBy","jobsData","posData","reduce","acc","op","_data$operationsStatu","vendorsData","updatePOOperationStatus","_po$operationsStatus","find","p","updatedOps","FiAlertCircle","filteredPOs","useMemo","_po$poNumber","matchesStatus","matchesVendor","matchesOperation","matchesSearch","toLowerCase","includes","matchesDate","poDate","now","daysDiff","floor","aVal","bVal","uniqueVendors","Set","FiActivity","FiBell","FiRefreshCw","FiFileText","FiUser","tab","FiBarChart2","FiSearch","type","OperationsTable","onUpdateOperationStatus","onOpenTracker","openTracker","historyQuery","snapshot","fetchOperationHistory","onOpenStatusUpdateModal","openStatusUpdateModal","getOperationIcon","_MACHINE_OPERATIONS$o7","_MACHINE_OPERATIONS$o8","OperationIcon","colorClass","VendorsPerformance","CompletedOperations","closeStatusUpdateModal","_ref5","expandedRow","setExpandedRow","handleStatusChange","_po$createdAt","_po$createdAt$toDate","_po$createdAt$toDate$","_po$status","toLocaleDateString","style","width","_ref6","_po$operationsStatus2","opKey","opConfig","isUpdating","scope","_po$createdAt2","_po$createdAt2$toDate","_po$createdAt2$toDate2","_po$status2","React","toggleRowExpansion","stopPropagation","colSpan","_ref7","_po$operationsStatus3","_ref8","formatTime","milliseconds","hours","minutes","_ref9","_ref0","_ref1","min","_ref10","_ref11","_ref12","_ref13","_op$completionDate","_op$completionDate$to","_op$completionDate$to2","_MACHINE_OPERATIONS$o9","_MACHINE_OPERATIONS$o0","_op$completionDate2","_op$completionDate2$t","_op$completionDate2$t2"],"sourceRoot":""}