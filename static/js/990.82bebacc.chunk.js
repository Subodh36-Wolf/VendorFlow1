"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[990],{9990:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});var s=a(5043),r=a(5475),n=a(5472),l=a(791),o=a(3505),i=a(5772),d=a(579);function c(){const{showSuccess:e,showError:t}=(0,o.hN)(),[a,c]=(0,s.useState)(!1),[x,m]=(0,s.useState)(null),[p,g]=(0,s.useState)({startDate:new Date((new Date).getFullYear(),(new Date).getMonth(),1).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0]}),[h,b]=(0,s.useState)("summary"),[u,j]=(0,s.useState)(!1),[v,y]=(0,s.useState)({refNumber:"M - 804 / 2025-26",date:(new Date).toLocaleDateString("en-GB"),vendorName:"Thorat Flow Controls Pvt Ltd.",vendorAddress:"Kirtakarwadi",subject:"Purchase Order for Valves.",attention:"Mr. Thorat Saheb.",items:[{no:1,description:"Project - Jaysruit Sugar\nCI Rubberlined Butterfly Valve as per D Table",valveSize:"150 mm",quantity:2,rateEach:"As Finalized"},{no:2,description:"Project - Harsha Sugar\nSS Knife Edge Gate Valve as per D Table",valveSize:"150 mm",quantity:1,rateEach:"As Finalized"}]}),[f,N]=(0,s.useState)([]),[w,S]=(0,s.useState)("all"),[P,T]=(0,s.useState)("all"),[O,A]=(0,s.useState)("all");(0,s.useEffect)(()=>{(async()=>{try{const e=(await(0,n.GG)((0,n.rJ)(l.db,"vendors"))).docs.map(e=>({id:e.id,...e.data()}));N(e)}catch(e){}})()},[]);const R=(e,t,a,s)=>{const r={total:e.length,active:e.filter(e=>"active"===e.status).length,inactive:e.filter(e=>"inactive"===e.status).length,byCategory:{}};e.forEach(e=>{const t=e.category||"Unknown";r.byCategory[t]=(r.byCategory[t]||0)+1});const n={total:t.length,totalValue:t.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),byStatus:{},byOperation:{},byMonth:{}};t.forEach(e=>{var t;if(n.byStatus[e.status]=(n.byStatus[e.status]||0)+1,n.byOperation[e.operation]=(n.byOperation[e.operation]||0)+1,null!==(t=e.createdAt)&&void 0!==t&&t.toDate){const t=e.createdAt.toDate().toLocaleDateString("en-US",{year:"numeric",month:"short"});n.byMonth[t]=(n.byMonth[t]||0)+(parseFloat(e.totalAmount)||0)}});const l={total:a.length,totalBudget:a.reduce((e,t)=>e+(parseFloat(t.budget)||0),0),byStatus:{},byPriority:{},completed:a.filter(e=>"completed"===e.status).length};a.forEach(e=>{l.byStatus[e.status]=(l.byStatus[e.status]||0)+1,l.byPriority[e.priority]=(l.byPriority[e.priority]||0)+1});const o={total:s.length,completed:s.filter(e=>e.completed).length,pending:s.filter(e=>!e.completed).length,byCategory:{},byPriority:{}};s.forEach(e=>{o.byCategory[e.category]=(o.byCategory[e.category]||0)+1,o.byPriority[e.priority]=(o.byPriority[e.priority]||0)+1});const i={poApprovalRate:t.length>0?(t.filter(e=>"approved"===e.status).length/t.length*100).toFixed(1):0,jobCompletionRate:a.length>0?(a.filter(e=>"completed"===e.status).length/a.length*100).toFixed(1):0,todoCompletionRate:s.length>0?(s.filter(e=>e.completed).length/s.length*100).toFixed(1):0,avgPOValue:t.length>0?(n.totalValue/t.length).toFixed(2):0},d=e.map(e=>{const a=t.filter(t=>t.vendorId===e.id),s=a.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),r=a.filter(e=>"completed"===(e.status||"").toLowerCase()).length;return{id:e.id,name:e.name||e.id,category:e.category||"Unknown",totalPOs:a.length,completedPOs:r,completionRate:a.length?Math.round(r/a.length*100):0,totalValue:s}}).sort((e,t)=>t.totalValue-e.totalValue);return{dateRange:p,vendorStats:r,poStats:n,jobStats:l,todoStats:o,performance:i,generatedAt:new Date,raw:{vendors:e,pos:t,jobs:a},vendorBreakdown:d}},C=(t,a)=>{if(!t||0===t.length)return;const s=Object.keys(t[0]),r=[s.join(",")].concat(t.map(e=>s.map(t=>{var a;return JSON.stringify(null!==(a=e[t])&&void 0!==a?a:"")}).join(","))).join("\n"),n=new Blob([r],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(n),o=document.createElement("a");o.href=l,o.setAttribute("download",a),document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(l),e("CSV exported")},k=()=>{window.print(),e("PO sent to printer")},V=()=>{const t=D(v),a=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`PO_${v.refNumber.replace(/\s+/g,"_")}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),e("PO downloaded successfully")},D=e=>`\nTHORAT VALVES PVT. LTD.\n607, Shaniwar Peth, Satara - 415002\nPhone: 02162-234567, Mobile: 9876543210\nEmail: thoratvalves@yahoo.com\nGST No.: 27AABCT7773A1ZF\n\nPO Thermal.jpg\n\nRef.: ${e.refNumber}                                    Date: ${e.date}\n\nTo:\n${e.vendorName}\n${e.vendorAddress}\n\nSub.: ${e.subject}\nAttn.: ${e.attention}\n\nSir,\nWe have pleasure to forward you our firm order for Valves.\n\n${e.items.map((e,t)=>`\n${e.no}. ${e.description}    ${e.valveSize}    ${e.quantity}    ${e.rateEach}\n`).join("")}\n\nInvoice, Delivery challan & Material test certificate required along with supplies.\n\nTerms & Conditions:\n1) Prices        : Ex Works K. vadi\n2) Taxes         : Extra as applicable\n3) Payment       : After receipt & approval of material.\n4) Delivery      : Urgent\n5) P & F         : Nil\n6) Invoice to    : THORAT VALVES PVT. LTD., 607, Shaniwar Peth, Satara - 415002.\n7) Dispatch to   : THORAT VALVES PVT. LTD., Plot No.2-2/14, Additional MIDC, Satara - 415004.\n\nThanking you,\n\nYours Faithfully,\nFor THORAT VALVES PVT. LTD.\n\nPrepared By\n(D.R. Naik)\n    `.trim(),$=e=>`\nVENDOR MANAGEMENT SYSTEM REPORT\nGenerated on: ${e.generatedAt.toLocaleString()}\nReport Period: ${e.dateRange.startDate} to ${e.dateRange.endDate}\n\n=====================================\nEXECUTIVE SUMMARY\n=====================================\nTotal Vendors: ${e.vendorStats.total}\nTotal Purchase Orders: ${e.poStats.total}\nTotal Job Assignments: ${e.jobStats.total}\nTotal Todos: ${e.todoStats.total}\n\nTotal PO Value: \u20b9${e.poStats.totalValue.toLocaleString()}\nAverage PO Value: \u20b9${e.performance.avgPOValue}\n\n=====================================\nVENDOR STATISTICS\n=====================================\nActive Vendors: ${e.vendorStats.active}\nInactive Vendors: ${e.vendorStats.inactive}\n\nVendors by Category:\n${Object.entries(e.vendorStats.byCategory).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\n=====================================\nPURCHASE ORDER STATISTICS\n=====================================\nTotal POs: ${e.poStats.total}\nTotal Value: \u20b9${e.poStats.totalValue.toLocaleString()}\n\nPOs by Status:\n${Object.entries(e.poStats.byStatus).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\nPOs by Operation:\n${Object.entries(e.poStats.byOperation).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\nMonthly PO Values:\n${Object.entries(e.poStats.byMonth).map(e=>{let[t,a]=e;return`  ${t}: \u20b9${a.toLocaleString()}`}).join("\n")}\n\n=====================================\nJOB ASSIGNMENT STATISTICS\n=====================================\nTotal Jobs: ${e.jobStats.total}\nCompleted Jobs: ${e.jobStats.completed}\nTotal Budget: \u20b9${e.jobStats.totalBudget.toLocaleString()}\n\nJobs by Status:\n${Object.entries(e.jobStats.byStatus).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\nJobs by Priority:\n${Object.entries(e.jobStats.byPriority).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\n=====================================\nTODO STATISTICS\n=====================================\nTotal Todos: ${e.todoStats.total}\nCompleted: ${e.todoStats.completed}\nPending: ${e.todoStats.pending}\n\nTodos by Category:\n${Object.entries(e.todoStats.byCategory).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\nTodos by Priority:\n${Object.entries(e.todoStats.byPriority).map(e=>{let[t,a]=e;return`  ${t}: ${a}`}).join("\n")}\n\n=====================================\nPERFORMANCE METRICS\n=====================================\nPO Approval Rate: ${e.performance.poApprovalRate}%\nJob Completion Rate: ${e.performance.jobCompletionRate}%\nTodo Completion Rate: ${e.performance.todoCompletionRate}%\nAverage PO Value: \u20b9${e.performance.avgPOValue}\n\n=====================================\nEND OF REPORT\n=====================================\n    `.trim();return u?(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center no-print",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Order"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Thorat Valves Format"})]}),(0,d.jsxs)("div",{className:"flex space-x-3",children:[(0,d.jsx)("button",{onClick:()=>j(!1),className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"Back to Reports"}),(0,d.jsxs)("button",{onClick:k,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[(0,d.jsx)(i.Mvz,{className:"mr-2",size:16}),"Print PO"]}),(0,d.jsxs)("button",{onClick:V,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,d.jsx)(i.a4x,{className:"mr-2",size:16}),"Download PO"]})]})]}),(0,d.jsxs)("div",{className:"print-container bg-white p-8 rounded-lg shadow-sm border border-gray-200 print:shadow-none print:border-none print:p-4 max-w-4xl mx-auto",children:[(0,d.jsx)("style",{jsx:!0,children:'\n            @media print {\n              /* Hide all non-PO elements */\n              .no-print { display: none !important; }\n              \n              /* Hide sidebar and header elements */\n              .sidebar, \n              .admin-sidebar,\n              .admin-header,\n              .main-header,\n              nav,\n              .navigation,\n              .menu,\n              .topbar,\n              .navbar,\n              header,\n              aside,\n              .sidebar-container,\n              .header-container,\n              .layout-sidebar,\n              .layout-header,\n              [class*="sidebar"],\n              [class*="header"],\n              [class*="nav"] { \n                display: none !important; \n              }\n              \n              /* Reset page margins and padding */\n              @page { \n                margin: 0.5in; \n                size: A4;\n              }\n              \n              /* Reset body styles for print */\n              body { \n                font-size: 12px; \n                margin: 0 !important;\n                padding: 0 !important;\n                background: white !important;\n              }\n              \n              /* Ensure only PO content is visible */\n              * { \n                visibility: hidden; \n              }\n              \n              /* Make PO container and its children visible */\n              .print-container,\n              .print-container * { \n                visibility: visible; \n              }\n              \n              /* Position PO container at top-left */\n              .print-container { \n                position: absolute; \n                left: 0; \n                top: 0; \n                width: 100% !important;\n                max-width: none !important;\n                margin: 0 !important;\n                padding: 1rem !important;\n                box-shadow: none !important;\n                border: none !important;\n                background: white !important;\n              }\n              \n              table { font-size: 11px; }\n            }\n          '}),(0,d.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,d.jsx)("div",{className:"w-1/3",children:(0,d.jsx)("div",{className:"text-5xl font-bold text-black tracking-widest",style:{fontFamily:"Arial, sans-serif"},children:"THORAT"})}),(0,d.jsxs)("div",{className:"w-2/3 text-right",children:[(0,d.jsx)("div",{className:"text-base font-bold text-black mb-1",children:"THORAT VALVES PVT. LTD."}),(0,d.jsxs)("div",{className:"text-xs text-black leading-tight",children:[(0,d.jsx)("div",{children:"607, Shaniwar Peth, Satara - 415002"}),(0,d.jsx)("div",{children:"Phone: 02162-234567, Mobile: 9876543210"}),(0,d.jsx)("div",{children:"Email: thoratvalves@yahoo.com"}),(0,d.jsx)("div",{children:"GST No.: 27AABCT7773A1ZF"})]})]})]}),(0,d.jsx)("div",{className:"text-center mb-3",children:(0,d.jsx)("div",{className:"text-xs text-gray-600",children:"PO Thermal.jpg"})}),(0,d.jsx)("div",{className:"border-t border-dotted border-gray-400 mb-3"}),(0,d.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,d.jsxs)("div",{className:"text-xs",children:[(0,d.jsx)("span",{children:"Ref.: "}),(0,d.jsx)("input",{type:"text",value:v.refNumber,onChange:e=>y(t=>({...t,refNumber:e.target.value})),className:"border-none outline-none bg-transparent"})]}),(0,d.jsxs)("div",{className:"text-xs",children:[(0,d.jsx)("span",{children:"Date: "}),(0,d.jsx)("input",{type:"text",value:v.date,onChange:e=>y(t=>({...t,date:e.target.value})),className:"border-none outline-none bg-transparent"})]})]}),(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsx)("div",{className:"text-xs mb-1",children:"To:"}),(0,d.jsxs)("div",{className:"ml-3 text-xs",children:[(0,d.jsx)("input",{type:"text",value:v.vendorName,onChange:e=>y(t=>({...t,vendorName:e.target.value})),className:"w-full border-none outline-none bg-transparent",placeholder:"Vendor Name"}),(0,d.jsx)("input",{type:"text",value:v.vendorAddress,onChange:e=>y(t=>({...t,vendorAddress:e.target.value})),className:"w-full border-none outline-none bg-transparent",placeholder:"Vendor Address"})]})]}),(0,d.jsxs)("div",{className:"mb-3 space-y-0 text-xs",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"Sub.: "}),(0,d.jsx)("input",{type:"text",value:v.subject,onChange:e=>y(t=>({...t,subject:e.target.value})),className:"border-none outline-none bg-transparent"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("span",{children:"Attn.: "}),(0,d.jsx)("input",{type:"text",value:v.attention,onChange:e=>y(t=>({...t,attention:e.target.value})),className:"border-none outline-none bg-transparent"})]})]}),(0,d.jsxs)("div",{className:"mb-3 text-xs",children:[(0,d.jsx)("p",{children:"Sir,"}),(0,d.jsx)("p",{children:"We have pleasure to forward you our firm order for Valves."})]}),(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-4 no-print",children:[(0,d.jsx)("h3",{className:"font-medium",children:"Items"}),(0,d.jsx)("button",{onClick:()=>{const e={no:v.items.length+1,description:"",valveSize:"",quantity:1,rateEach:"As Finalized"};y(t=>({...t,items:[...t.items,e]}))},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Add Item"})]}),(0,d.jsxs)("table",{className:"w-full border-collapse border border-black text-xs",children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white",style:{width:"8%"},children:"Sr.No"}),(0,d.jsx)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white",style:{width:"45%"},children:"Description"}),(0,d.jsx)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white",style:{width:"15%"},children:"Valve Size"}),(0,d.jsxs)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white",style:{width:"12%"},children:["Quantity",(0,d.jsx)("br",{}),"(Nos.)"]}),(0,d.jsx)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white",style:{width:"15%"},children:"Price"}),(0,d.jsx)("th",{className:"border border-black px-1 py-1 text-center font-normal bg-white no-print",style:{width:"5%"},children:"Actions"})]})}),(0,d.jsx)("tbody",{children:v.items.map((e,t)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{className:"border border-black px-1 py-1 text-center align-top",children:e.no}),(0,d.jsx)("td",{className:"border border-black px-1 py-1 align-top",children:(0,d.jsx)("textarea",{value:e.description,onChange:e=>{const a=[...v.items];a[t].description=e.target.value,y(e=>({...e,items:a}))},className:"w-full bg-transparent outline-none resize-none text-xs leading-tight",rows:"2",style:{minHeight:"32px"}})}),(0,d.jsx)("td",{className:"border border-black px-1 py-1 text-center align-top",children:(0,d.jsx)("input",{type:"text",value:e.valveSize,onChange:e=>{const a=[...v.items];a[t].valveSize=e.target.value,y(e=>({...e,items:a}))},className:"w-full bg-transparent outline-none text-center text-xs",placeholder:"mm"})}),(0,d.jsx)("td",{className:"border border-black px-1 py-1 text-center align-top",children:(0,d.jsx)("input",{type:"number",value:e.quantity,onChange:e=>{const a=[...v.items];a[t].quantity=parseInt(e.target.value)||0,y(e=>({...e,items:a}))},className:"w-full bg-transparent outline-none text-center text-xs"})}),(0,d.jsx)("td",{className:"border border-black px-1 py-1 text-center align-top",children:(0,d.jsx)("input",{type:"text",value:e.rateEach,onChange:e=>{const a=[...v.items];a[t].rateEach=e.target.value,y(e=>({...e,items:a}))},className:"w-full bg-transparent outline-none text-center text-xs",placeholder:"Price"})}),(0,d.jsx)("td",{className:"border border-black px-1 py-1 no-print text-center",children:v.items.length>1&&(0,d.jsx)("button",{onClick:()=>{const e=v.items.filter((e,a)=>a!==t).map((e,t)=>({...e,no:t+1}));y(t=>({...t,items:e}))},className:"px-1 py-0 bg-red-600 text-white text-xs rounded hover:bg-red-700",children:"\xd7"})})]},t))})]})]}),(0,d.jsx)("div",{className:"mb-2 text-xs",children:(0,d.jsx)("p",{children:"Invoice, Delivery challan & Material test certificate required along with supplies."})}),(0,d.jsxs)("div",{className:"mb-4",children:[(0,d.jsx)("div",{className:"mb-1 text-xs font-medium",children:"Terms & Conditions:"}),(0,d.jsxs)("div",{className:"space-y-0 text-xs leading-tight",children:[(0,d.jsx)("div",{children:"1) Prices\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: Ex Works K. vadi"}),(0,d.jsx)("div",{children:"2) Taxes\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: Extra as applicable"}),(0,d.jsx)("div",{children:"3) Payment\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: After receipt & approval of material."}),(0,d.jsx)("div",{children:"4) Delivery\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: Urgent"}),(0,d.jsx)("div",{children:"5) P & F\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: Nil"}),(0,d.jsx)("div",{children:"6) Invoice to\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: THORAT VALVES PVT. LTD., 607, Shaniwar Peth, Satara - 415002."}),(0,d.jsx)("div",{children:"7) Dispatch to\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0: THORAT VALVES PVT. LTD., Plot No.2-2/14, Additional MIDC, Satara - 415004."})]})]}),(0,d.jsx)("div",{className:"mb-3 text-xs",children:(0,d.jsx)("p",{children:"Thanking you,"})}),(0,d.jsx)("div",{className:"flex justify-between items-end",children:(0,d.jsxs)("div",{className:"text-xs",children:[(0,d.jsx)("p",{children:"Yours Faithfully,"}),(0,d.jsx)("p",{children:"For THORAT VALVES PVT. LTD."}),(0,d.jsxs)("div",{className:"mt-8",children:[(0,d.jsx)("div",{className:"border-t border-black w-24 mb-1"}),(0,d.jsx)("p",{children:"Prepared By"}),(0,d.jsx)("p",{children:"(D.R. Naik)"})]})]})})]})]}):(0,d.jsxs)("div",{className:"space-y-4 lg:space-y-6",children:[(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-start space-y-4 lg:space-y-0",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 lg:space-x-4",children:[(0,d.jsx)("div",{className:"w-10 h-10 lg:w-12 lg:h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,d.jsx)(i.vQY,{className:"text-white",size:24})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Report Generator"}),(0,d.jsx)("p",{className:"text-sm lg:text-base text-gray-600 mt-1",children:"Generate comprehensive reports and purchase orders for vendor management"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,d.jsxs)("button",{onClick:()=>j(!0),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base",children:[(0,d.jsx)(i.ydS,{className:"mr-2",size:16}),"Generate PO"]}),x&&(0,d.jsxs)("button",{onClick:()=>{if(!x)return;const t=$(x),a=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(a),r=document.createElement("a");r.href=s,r.download=`VMT_Report_${x.dateRange.startDate}_to_${x.dateRange.endDate}.txt`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s),e("Report downloaded successfully")},className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg hover:from-green-700 hover:to-emerald-700 transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base",children:[(0,d.jsx)(i.a4x,{className:"mr-2",size:16}),"Download Report"]}),x&&(0,d.jsxs)("button",{onClick:()=>C((x.raw.pos||[]).map(e=>{var t,a,s;return{id:e.id,poNumber:e.poNumber||"",vendorId:e.vendorId||"",status:e.status||"",operation:e.operation||"",totalAmount:e.totalAmount||0,createdAt:(null===(t=e.createdAt)||void 0===t||null===(a=t.toDate)||void 0===a||null===(s=a.call(t))||void 0===s?void 0:s.toISOString())||""}}),`POs_${p.startDate}_to_${p.endDate}.csv`),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base",children:[(0,d.jsx)(i.a4x,{className:"mr-2",size:16}),"Export POs CSV"]}),x&&(0,d.jsxs)("button",{onClick:()=>C((x.raw.jobs||[]).map(e=>{var t,a,s;return{id:e.id,title:e.title||"",vendorId:e.vendorId||"",status:e.status||"",priority:e.priority||"",budget:e.budget||0,createdAt:(null===(t=e.createdAt)||void 0===t||null===(a=t.toDate)||void 0===a||null===(s=a.call(t))||void 0===s?void 0:s.toISOString())||""}}),`Jobs_${p.startDate}_to_${p.endDate}.csv`),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-pink-600 to-rose-600 text-white rounded-lg hover:from-pink-700 hover:to-rose-700 transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base",children:[(0,d.jsx)(i.a4x,{className:"mr-2",size:16}),"Export Jobs CSV"]}),x&&(0,d.jsxs)("button",{onClick:()=>C((x.vendorBreakdown||[]).map(e=>({id:e.id,name:e.name,category:e.category,totalPOs:e.totalPOs,completedPOs:e.completedPOs,completionRate:e.completionRate,totalValue:e.totalValue})),`Vendors_${p.startDate}_to_${p.endDate}.csv`),className:"inline-flex items-center px-4 py-2 bg-gradient-to-r from-teal-600 to-cyan-600 text-white rounded-lg hover:from-teal-700 hover:to-cyan-700 transition-all duration-200 shadow-lg hover:shadow-xl text-sm lg:text-base",children:[(0,d.jsx)(i.a4x,{className:"mr-2",size:16}),"Export Vendors CSV"]})]})]})}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.hht,{className:"text-white",size:16})}),(0,d.jsx)("h2",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"Report Configuration"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,d.jsx)(i.vQY,{className:"inline mr-2",size:14}),"Report Type"]}),(0,d.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200",children:[(0,d.jsx)("option",{value:"summary",children:"\ud83d\udcca Summary Report"}),(0,d.jsx)("option",{value:"detailed",children:"\ud83d\udccb Detailed Report"}),(0,d.jsx)("option",{value:"financial",children:"\ud83d\udcb0 Financial Report"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,d.jsx)(i.wIk,{className:"inline mr-2",size:14}),"Start Date"]}),(0,d.jsx)("input",{type:"date",value:p.startDate,onChange:e=>g(t=>({...t,startDate:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200"})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,d.jsx)(i.wIk,{className:"inline mr-2",size:14}),"End Date"]}),(0,d.jsx)("input",{type:"date",value:p.endDate,onChange:e=>g(t=>({...t,endDate:e.target.value})),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200"})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mt-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Vendor"}),(0,d.jsxs)("select",{value:w,onChange:e=>S(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200",children:[(0,d.jsx)("option",{value:"all",children:"All Vendors"}),f.map(e=>(0,d.jsx)("option",{value:e.id,children:e.name||e.id},e.id))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"PO Status"}),(0,d.jsxs)("select",{value:P,onChange:e=>T(e.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200",children:[(0,d.jsx)("option",{value:"all",children:"All"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,d.jsx)("option",{value:"completed",children:"Completed"}),(0,d.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Operation"}),(0,d.jsx)("input",{type:"text",value:"all"===O?"":O,onChange:e=>A(e.target.value.trim()?e.target.value:"all"),placeholder:"e.g., machining, assembly",className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm transition-all duration-200"})]})]}),(0,d.jsx)("div",{className:"mt-6",children:(0,d.jsx)("button",{onClick:async()=>{try{c(!0);const t=new Date(p.startDate);t.setHours(0,0,0,0);const a=new Date(p.endDate);a.setHours(23,59,59,999);const[s,r,o,i]=await Promise.all([(0,n.GG)((0,n.rJ)(l.db,"vendors")),(0,n.GG)((0,n.P)((0,n.rJ)(l.db,"purchaseOrders"),(0,n._M)("createdAt",">=",t),(0,n._M)("createdAt","<=",a))),(0,n.GG)((0,n.P)((0,n.rJ)(l.db,"jobAssignments"),(0,n._M)("createdAt",">=",t),(0,n._M)("createdAt","<=",a))),(0,n.GG)((0,n.P)((0,n.rJ)(l.db,"dailyTodos"),(0,n._M)("dueDate",">=",t),(0,n._M)("dueDate","<=",a)))]),d=[];s.forEach(e=>d.push({id:e.id,...e.data()}));let x=[];r.forEach(e=>x.push({id:e.id,...e.data()}));let g=[];o.forEach(e=>g.push({id:e.id,...e.data()}));const h=[];i.forEach(e=>h.push({id:e.id,...e.data()})),"all"!==w&&(x=x.filter(e=>e.vendorId===w),g=g.filter(e=>e.vendorId===w)),"all"!==P&&(x=x.filter(e=>(e.status||"").toLowerCase()===P.toLowerCase())),"all"!==O&&(x=x.filter(e=>(e.operation||"")===O));const b=R(d,x,g,h);m(b),e("Report generated successfully")}catch(a){console.error("Error generating report:",a),t("Failed to generate report")}finally{c(!1)}},disabled:a,className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-6 rounded-lg hover:from-indigo-700 hover:to-purple-700 disabled:opacity-50 flex items-center justify-center transition-all duration-200 shadow-lg hover:shadow-xl font-medium",children:a?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Generating Report..."]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i.ARf,{className:"mr-2",size:18}),"Generate Report"]})})}),x&&(0,d.jsxs)("div",{className:"mt-8 space-y-6",children:[(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[(0,d.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 lg:p-6 rounded-xl border border-blue-100 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-blue-600 text-xs lg:text-sm font-medium",children:"Total Vendors"}),(0,d.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-blue-900",children:x.vendorStats.total}),(0,d.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[x.vendorStats.active," active"]})]}),(0,d.jsx)(i.cfS,{className:"text-blue-500",size:28})]})}),(0,d.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-4 lg:p-6 rounded-xl border border-green-100 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-green-600 text-xs lg:text-sm font-medium",children:"Purchase Orders"}),(0,d.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-green-900",children:x.poStats.total}),(0,d.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[Object.values(x.poStats.byStatus).reduce((e,t)=>e+t,0)," total"]})]}),(0,d.jsx)(i.ydS,{className:"text-green-500",size:28})]})}),(0,d.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-4 lg:p-6 rounded-xl border border-purple-100 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-purple-600 text-xs lg:text-sm font-medium",children:"Total PO Value"}),(0,d.jsxs)("p",{className:"text-xl lg:text-2xl font-bold text-purple-900",children:["\u20b9",x.poStats.totalValue.toLocaleString()]}),(0,d.jsxs)("p",{className:"text-xs text-purple-600 mt-1",children:["Avg: \u20b9",parseFloat(x.performance.avgPOValue).toLocaleString()]})]}),(0,d.jsx)(i.z8N,{className:"text-purple-500",size:28})]})}),(0,d.jsx)("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 p-4 lg:p-6 rounded-xl border border-indigo-100 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-indigo-600 text-xs lg:text-sm font-medium",children:"Job Assignments"}),(0,d.jsx)("p",{className:"text-2xl lg:text-3xl font-bold text-indigo-900",children:x.jobStats.total}),(0,d.jsxs)("p",{className:"text-xs text-indigo-600 mt-1",children:[x.jobStats.completed," completed"]})]}),(0,d.jsx)(i.ARf,{className:"text-indigo-500",size:28})]})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.vQY,{className:"text-white",size:16})}),(0,d.jsx)("h3",{className:"text-lg lg:text-xl font-bold text-gray-900",children:"Performance Metrics"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6",children:[(0,d.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg border border-green-100",children:[(0,d.jsxs)("div",{className:"text-2xl lg:text-3xl font-bold text-green-600",children:[x.performance.poApprovalRate,"%"]}),(0,d.jsx)("div",{className:"text-xs lg:text-sm text-green-700 font-medium mt-1",children:"PO Approval Rate"})]}),(0,d.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:[(0,d.jsxs)("div",{className:"text-2xl lg:text-3xl font-bold text-blue-600",children:[x.performance.jobCompletionRate,"%"]}),(0,d.jsx)("div",{className:"text-xs lg:text-sm text-blue-700 font-medium mt-1",children:"Job Completion Rate"})]}),(0,d.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg border border-purple-100",children:[(0,d.jsxs)("div",{className:"text-2xl lg:text-3xl font-bold text-purple-600",children:[x.performance.todoCompletionRate,"%"]}),(0,d.jsx)("div",{className:"text-xs lg:text-sm text-purple-700 font-medium mt-1",children:"Todo Completion Rate"})]}),(0,d.jsxs)("div",{className:"text-center p-4 bg-gradient-to-br from-indigo-50 to-blue-50 rounded-lg border border-indigo-100",children:[(0,d.jsxs)("div",{className:"text-xl lg:text-2xl font-bold text-indigo-600",children:["\u20b9",parseFloat(x.performance.avgPOValue).toLocaleString()]}),(0,d.jsx)("div",{className:"text-xs lg:text-sm text-indigo-700 font-medium mt-1",children:"Average PO Value"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.A3x,{className:"text-white",size:16})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"PO Status Breakdown"})]}),(0,d.jsx)("div",{className:"space-y-3",children:Object.entries(x.poStats.byStatus).map(e=>{let[t,a]=e;return(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700 capitalize",children:t}),(0,d.jsx)("span",{className:"px-3 py-1 bg-white rounded-full text-sm font-bold text-gray-900 shadow-sm",children:a})]},t)})})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-orange-500 to-red-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.hht,{className:"text-white",size:16})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Operations Breakdown"})]}),(0,d.jsx)("div",{className:"space-y-3",children:Object.entries(x.poStats.byOperation).map(e=>{let[t,a]=e;return(0,d.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[(0,d.jsx)("span",{className:"text-sm font-medium text-gray-700",children:t}),(0,d.jsx)("span",{className:"px-3 py-1 bg-white rounded-full text-sm font-bold text-gray-900 shadow-sm",children:a})]},t)})})]})]}),(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4 lg:p-6",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.cfS,{className:"text-white",size:16})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Vendor Breakdown"})]}),(0,d.jsxs)("span",{className:"text-sm text-gray-500",children:["Top ",Math.min(10,x.vendorBreakdown.length)," by spend"]})]}),0===x.vendorBreakdown.length?(0,d.jsx)("div",{className:"text-gray-500",children:"No vendor data in selected range."}):(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor"}),(0,d.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"POs"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completed"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Completion"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Spend"}),(0,d.jsx)("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:x.vendorBreakdown.slice(0,10).map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:e.name}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.category}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:e.totalPOs}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:e.completedPOs}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,d.jsxs)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+(e.completionRate>=80?"bg-green-100 text-green-800":e.completionRate>=60?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:[e.completionRate,"%"]})}),(0,d.jsxs)("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:["\u20b9",parseFloat(e.totalValue).toLocaleString()]}),(0,d.jsx)("td",{className:"px-4 py-3 text-sm text-right",children:(0,d.jsx)(r.N_,{to:`/admin/vendor-performance/${e.id}`,className:"text-indigo-600 hover:text-indigo-800",children:"View"})})]},e.id))})]})})]}),(0,d.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 p-4 lg:p-6 rounded-xl border border-gray-200 shadow-sm",children:(0,d.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-2 lg:space-y-0",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-gray-500 to-gray-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.wIk,{className:"text-white",size:16})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Report Generated"}),(0,d.jsx)("p",{className:"text-xs text-gray-600",children:x.generatedAt.toLocaleString()})]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(i.vQY,{className:"text-white",size:16})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Report Period"}),(0,d.jsxs)("p",{className:"text-xs text-gray-600",children:[x.dateRange.startDate," to ",x.dateRange.endDate]})]})]})]})})]})]})]})}}}]);
//# sourceMappingURL=990.82bebacc.chunk.js.map