{"version":3,"file":"static/js/318.29795743.chunk.js","mappings":"wNAGA,MAAMA,EAAgB,mBAChBC,EAAyB,aAExB,SAASC,EAAwBC,GACvC,MACMC,GADQC,MAAMC,QAAQH,EAAII,OAASJ,EAAII,MAAQ,IAC7BC,IAAKC,IAC5B,MAAMC,EAAWC,OAAOF,EAAGC,WAAa,EAClCE,EAAQD,OAAOF,EAAGG,QAAU,EAClC,MAAO,CACNC,YAAaC,OAAOL,EAAGI,aAAe,IAAIE,OAC1CC,QAASF,OAAOL,EAAGO,SAAW,IAC9BN,WACAO,KAAMH,OAAOL,EAAGQ,MAAQ,OACxBL,QACAM,OAAQP,QAAQD,EAAWE,GAAOO,QAAQ,IAC1CC,OAAQX,EAAGW,QAAU,QAIjBC,EAAcjB,EAAUkB,OAAO,CAACC,EAAKd,IAAOc,GAAOZ,OAAOF,EAAGS,SAAW,GAAI,GAC5EM,EAAgBpB,EAAUkB,OAAO,CAACC,EAAKd,IAAOc,GAAOZ,OAAOF,EAAGC,WAAa,GAAI,GAEtF,MAAO,CACNe,cAAeX,OAAOX,EAAIsB,eAAiB,IAAIV,OAC/CW,KAAMvB,EAAIuB,OAAQ,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GACtDC,KAAM3B,EAAI2B,KAAOhB,OAAOX,EAAI2B,MAAQ,KACpCC,SAAU5B,EAAI4B,SAAWjB,OAAOX,EAAI4B,UAAa5B,EAAI6B,UAAYlB,OAAOX,EAAI6B,WAAa,GACzFC,SAAUnB,OAAOX,EAAI8B,UAAY,IAAIlB,OACrCmB,WAAYpB,OAAOX,EAAI+B,YAAc,IACrCC,cAAerB,OAAOX,EAAIgC,eAAiB,IAC3CH,UAAWlB,OAAOX,EAAI6B,WAAa,IACnCI,UAAWtB,OAAOX,EAAIiC,WAAa,IACnCC,WAAYvB,OAAOX,EAAIkC,YAAc,IACrCC,QAASxB,OAAOX,EAAImC,SAAW,IAC/B/B,MAAOH,EACPiB,YAAaV,OAAOU,EAAYF,QAAQ,IACxCK,gBACAe,cAAezB,OAAOX,EAAIoC,eAAiB,IAE7C,CAEO,SAASC,EAAkBC,GACjC,MAAO,CAAEC,GAAID,EAAQC,MAAOD,EAAQE,OACrC,CAEAC,eAAeC,EAAYC,EAAMC,EAAQC,GACxC,UACOC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAIlD,GAAyB,CAAE6C,OAAMC,SAAQC,QAASA,GAAW,CAAC,EAAGI,WAAWC,EAAAA,EAAAA,OACzG,CAAE,MAAOC,GAAI,CACd,CAQOV,eAAeW,EAAeb,GACpC,MAAMc,QAAaC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAIP,EAAAA,GAAInD,EAAe0C,IACjD,OAAKc,EAAKG,SACHnB,EAAkBgB,GADE,IAE5B,CAEOZ,eAAegB,EAAczD,GACnC,MAAMwC,EAAOzC,EAAwBC,GAC/B0D,GAAMR,EAAAA,EAAAA,MACNS,QAAYb,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAInD,GAAgB,IAAK2C,EAAMoB,UAAWF,EAAKG,UAAWH,IAE9F,aADMhB,EAAYiB,EAAIpB,GAAI,SAAU,CAAET,SAAUU,EAAKV,SAAUZ,YAAasB,EAAKtB,cAC1E,CAAEqB,GAAIoB,EAAIpB,MAAOC,EACzB,CAEOC,eAAeqB,EAAcvB,EAAIvC,GACvC,MAAMwC,EAAOzC,EAAwBC,SAC/B+D,EAAAA,EAAAA,KAAUR,EAAAA,EAAAA,IAAIP,EAAAA,GAAInD,EAAe0C,GAAK,IAAKC,EAAMqB,WAAWX,EAAAA,EAAAA,cAC5DR,EAAYH,EAAI,SACvB,CAEOE,eAAeuB,EAAczB,SAC7B0B,EAAAA,EAAAA,KAAUV,EAAAA,EAAAA,IAAIP,EAAAA,GAAInD,EAAe0C,UACjCG,EAAYH,EAAI,SACvB,CAEOE,eAAeyB,EAAmBC,GACxC,MAAMC,GAAQC,EAAAA,EAAAA,IAAWrB,EAAAA,IACzBmB,EAAIG,QAAS/B,GAAO6B,EAAMG,QAAOhB,EAAAA,EAAAA,IAAIP,EAAAA,GAAInD,EAAe0C,WAClD6B,EAAMI,SACZ,IAAK,MAAMjC,KAAM4B,EAAKzB,EAAYH,EAAI,cACvC,C,0IC7Ee,SAASkC,IACtB,MAAMC,GAAWC,EAAAA,EAAAA,OACX,GAAEpC,IAAOqC,EAAAA,EAAAA,KACTC,EAAaC,QAAQvC,IACrB,YAAEwC,EAAW,UAAEC,IAAcC,EAAAA,EAAAA,OAE5BC,EAASC,IAAcC,EAAAA,EAAAA,WAAS,IAChCC,EAASC,IAAcF,EAAAA,EAAAA,UAAS,KAChCG,EAAaC,IAAkBJ,EAAAA,EAAAA,UAAS,KACxCK,EAAUC,IAAeN,EAAAA,EAAAA,UAAS,CACvC9D,cAAe,GACfC,MAAM,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAC1CiE,aAAa,IAAInE,MAAOC,cAAcC,MAAM,KAAK,GACjDkE,SAAS,IAAIpE,MAAOC,cAAcC,MAAM,KAAK,GAC7CmE,cAAe,GACf/D,SAAU,GACVC,WAAY,GACZC,cAAe,GACfH,UAAW,GACXI,UAAW,GACXC,WAAY,GACZC,QAAS,GACT/B,MAAO,CACL,CAAEmC,GAAIf,KAAKkC,MAAOhD,YAAa,GAAIG,QAAS,GAAIN,SAAU,EAAGO,KAAM,MAAOL,MAAO,EAAGM,OAAQ,IAE9F+E,aAAc,SACdC,cAAe,EACfC,QAAS,EACTC,UAAW,EACXC,SAAU,EACVC,YAAa,EACbC,iBAAiB,EACjBC,cAAe,EACfC,YAAa,OACbC,kBAAkB,KAIpBC,EAAAA,EAAAA,WAAU,KACRC,KACC,CAAChB,EAASrF,MAAOqF,EAASK,aAAcL,EAASM,cAAeN,EAASO,UAE5E,MAAMS,GAAkBC,EAAAA,EAAAA,aAAY,KAElC,MAAMR,EAAWT,EAASrF,MAAMe,OAAO,CAACC,EAAKuF,IACpCvF,GAAOZ,OAAOmG,EAAK5F,SAAW,GACpC,GAGH,IAAI6F,EAAiB,EAEnBA,EAD4B,eAA1BnB,EAASK,aACOI,GAAYT,EAASM,eAAiB,GAAM,IAE7CvF,OAAOiF,EAASM,gBAAkB,EAIrD,MAAMc,EAAgBC,KAAKC,IAAI,EAAGb,EAAWU,GAGvCX,EAAaY,GAAiBpB,EAASO,SAAW,GAAM,IAG9D,IAAIG,EAAcU,EAAgBZ,EAG9BI,EAAgB,EAChBZ,EAASW,kBACXC,EAAgBS,KAAKE,MAAMb,GAAeA,EAC1CA,EAAcW,KAAKE,MAAMb,IAG3BT,EAAYuB,IAAI,IACXA,EACHf,WACAU,iBACAX,YACAE,cACAE,oBAED,CAACZ,EAASrF,MAAOqF,EAASK,aAAcL,EAASM,cAAeN,EAASO,QAASP,EAASW,mBAE9FI,EAAAA,EAAAA,WAAU,KACRU,IACAC,IACItC,GACFuC,KAED,CAAC7E,IAEJ,MAAM2E,EAAezE,UACnB,IACE,MACM4E,SADaC,EAAAA,EAAAA,KAAQvE,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,aACxBuE,KAAKlH,IAAImH,IAAC,CAAOjF,GAAIiF,EAAEjF,MAAOiF,EAAEhF,UAClD8C,EAAW+B,EACb,CAAE,MAAOI,GACPC,QAAQC,MAAMF,EAChB,GAGIN,EAAa1E,UACjB,IACE,MAAMrC,QAAcwH,EAAAA,EAAAA,MACpBpC,EAAepF,EACjB,CAAE,MAAOqH,GACPC,QAAQC,MAAMF,EAChB,GAGIL,EAAe3E,UACnB,IACE,MAAMD,QAAaY,EAAAA,EAAAA,IAAeb,GAC9BC,GAAMkD,EAAYuB,IAAI,IAAUA,KAASzE,IAC/C,CAAE,MAAOiF,GACPC,QAAQC,MAAM,yBAA0BF,GACxCzC,EAAU,yBACZ,GAGI6C,EAAeA,CAACC,EAAOC,KAC3B,GAAc,aAAVD,EAAsB,CACxB,MAAME,EAAW3C,EAAQ4C,KAAKC,GAAKA,EAAE3F,KAAOwF,GAO5C,YANArC,EAAYuB,IAAI,IACXA,EACHnF,SAAUiG,EACVhG,YAAoB,OAARiG,QAAQ,IAARA,OAAQ,EAARA,EAAUG,OAAQlB,EAAKlF,WACnCC,eAAuB,OAARgG,QAAQ,IAARA,OAAQ,EAARA,EAAUI,UAAWnB,EAAKjF,gBAG7C,CACA0D,EAAYuB,IAAI,IAAUA,EAAM,CAACa,GAAQC,MAGrCM,EAAqBZ,IACzB,MAAM,KAAEU,EAAI,MAAEJ,EAAK,KAAEO,EAAI,QAAEC,GAAYd,EAAEe,OACnCC,EAAgB,IAAIC,IAAI,CAAC,gBAAiB,UAAW,kBACrDC,EAAqB,aAATL,EAAsBC,EAAWE,EAAcG,IAAIT,GAAQ3H,OAAOuH,GAASA,EAC7FrC,EAAYuB,IAAI,IACXA,EACH,CAACkB,GAAOQ,MAINE,EAAc7I,IAClB,MAAM2G,EAAO,IAAK3G,GACZ8I,EAAMhC,KAAKC,IAAI,EAAGvG,OAAOmG,EAAKpG,WAAa,GAC3CwI,EAAYjC,KAAKC,IAAI,EAAGvG,OAAOmG,EAAKlG,QAAU,GAG9CuI,EAAaF,EAAMC,EAGzB,IAAInC,EAAiBpG,OAAOmG,EAAKC,iBAAmB,EAChDD,EAAKsC,gBAAkB,IACzBrC,EAAkBoC,EAAarC,EAAKsC,gBAAmB,KAIzD,MAAMC,EAAsBpC,KAAKC,IAAI,EAAGiC,EAAapC,GAI/CX,EAAaiD,GADH1I,OAAOmG,EAAKX,UAAY,GACY,IAG9CjF,EAASmI,EAAsBjD,EAErC,MAAO,IACFU,EACHpG,SAAUuI,EACVrI,MAAOsI,EACPnC,eAAgBpG,OAAOoG,EAAe5F,QAAQ,IAC9CiF,UAAWzF,OAAOyF,EAAUjF,QAAQ,IACpCD,OAAQP,OAAOO,EAAOC,QAAQ,MAI5BmI,EAAmBA,CAACC,EAAOtB,EAAOC,KACtCrC,EAAYuB,IACV,MAAM7G,EAAQ,IAAI6G,EAAK7G,OACjBiJ,EAAc,IAAKjJ,EAAMgJ,GAAQ,CAACtB,GAAQC,GAShD,OALE3H,EAAMgJ,GADM,aAAVtB,GAAkC,UAAVA,EACXe,EAAWQ,GAEXA,EAGV,IAAKpC,EAAM7G,YAsHhBkJ,EAAkBvB,GACf,IAAIwB,KAAKC,aAAa,QAAS,CACpCC,MAAO,WACPC,SAAU,MACVC,sBAAuB,EACvBC,sBAAuB,IACtBC,OAAO9B,GAGZ,OACE+B,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wEAAuEC,UACpFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8CAA6CC,SAAA,EAE1DF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,6EAA4EC,UACzFF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,wEAAuEC,UACpFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,UACEI,QAASA,IAAMxF,GAAU,GACzBqF,UAAU,4FAA2FC,UAErGF,EAAAA,EAAAA,KAACK,EAAAA,IAAW,CAACJ,UAAU,aAAaK,KAAM,QAE5CH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qFAAoFC,UACjGF,EAAAA,EAAAA,KAACO,EAAAA,IAAU,CAACN,UAAU,aAAaK,KAAM,QAE3CH,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,MAAIC,UAAU,gCAA+BC,SAC1CnF,EAAa,wBAA0B,iCAE1CiF,EAAAA,EAAAA,KAAA,KAAGC,UAAU,wBAAuBC,SACjCnF,EAAa,mCAAqC,wEAK3DiF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,8BAA6BC,UAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oDAAmDC,UAChEF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,iCAAgCC,UAC7C,IAAIxI,MAAO8I,mBAAmB,QAAS,CACtCC,IAAK,UACLC,MAAO,QACPC,KAAM,0BASpBR,EAAAA,EAAAA,MAAA,QAAMS,SAnGKjI,UAIf,GAHAgF,EAAEkD,iBAGGlF,EAASnE,cAAcV,OAK5B,GAAK6E,EAAS3D,SAKd,GAAI2D,EAASrF,MAAMwK,KAAKjE,IAASA,EAAKjG,YAAYE,QAChDoE,EAAU,0CAIZ,IAAK,IAAD6F,EAAAC,EACF3F,GAAW,GACX,MAAM4F,GAAUhL,EAAAA,EAAAA,IAAwB,IACnC0F,EACH1D,YAAyD,QAA7C8I,EAAAxF,EAAQ4C,KAAKC,GAAKA,EAAE3F,KAAOkD,EAAS3D,iBAAS,IAAA+I,OAAA,EAA7CA,EAA+C1C,OAAQ1C,EAAS1D,YAAc,GAC1FC,eAA4D,QAA7C8I,EAAAzF,EAAQ4C,KAAKC,GAAKA,EAAE3F,KAAOkD,EAAS3D,iBAAS,IAAAgJ,OAAA,EAA7CA,EAA+C1C,UAAW3C,EAASzD,eAAiB,GACnGI,cAAe4I,EAAoBvF,EAASU,eAG9C,IAAItB,EAGG,CACL,MAAMoG,QAAYxH,EAAAA,EAAAA,IAAcsH,GAGhC,OAFAhG,EAAY,qCACZL,EAAS,0BAA0BuG,EAAI1I,KAEzC,OAPQuB,EAAAA,EAAAA,IAAcvB,EAAIwI,GACxBhG,EAAY,gCAOdL,EAAS,2BACX,CAAE,MAAOiD,GACPD,QAAQC,MAAM,cAAeA,GAC7B3C,EAAU,2BAA6B2C,EAAMuD,QAC/C,CAAC,QACC/F,GAAW,EACb,MAjCEH,EAAU,+BALVA,EAAU,+BA8FkB+E,UAAU,YAAWC,SAAA,EAE7CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wEAAuEC,SAAA,EACpFF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gFAA+EC,UAC5FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oGAAmGC,UAChHF,EAAAA,EAAAA,KAACqB,EAAAA,IAAM,CAACpB,UAAU,aAAaK,KAAM,QAEvCN,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,qBACpDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YACfD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,2EAA0EC,SAAC,+BAK/FF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKC,UAClBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,sBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAASnE,cAChB8J,SAAU3D,GAAKI,EAAa,gBAAiBJ,EAAEe,OAAOT,OACtDgC,UAAU,mJACVsB,YAAY,uBACZC,UAAQ,KAEVxB,EAAAA,EAAAA,KAACO,EAAAA,IAAU,CAACN,UAAU,wCAAwCK,KAAM,YAGxEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,oBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOtC,EAASlE,KAChB6J,SAAU3D,GAAKI,EAAa,OAAQJ,EAAEe,OAAOT,OAC7CgC,UAAU,mJACVuB,UAAQ,KAEVxB,EAAAA,EAAAA,KAACyB,EAAAA,IAAU,CAACxB,UAAU,wCAAwCK,KAAM,YAGxEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,qBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,MAAA,UACElC,MAAOtC,EAAS3D,SAChBsJ,SAAU3D,GAAKI,EAAa,WAAYJ,EAAEe,OAAOT,OACjDgC,UAAU,4KACVuB,UAAQ,EAAAtB,SAAA,EAERF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,GAAEiC,SAAC,qBAChB3E,EAAQhF,IAAI6H,IACX4B,EAAAA,EAAAA,KAAA,UAAmB/B,MAAOG,EAAE3F,GAAGyH,SAAE9B,EAAEC,MAAQD,EAAEsD,aAAetD,EAAEuD,aAAevD,EAAE3F,IAAlE2F,EAAE3F,SAGnBuH,EAAAA,EAAAA,KAAC4B,EAAAA,IAAM,CAAC3B,UAAU,wCAAwCK,KAAM,YAGpEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,kBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOtC,EAASE,YAChByF,SAAU3D,GAAKI,EAAa,cAAeJ,EAAEe,OAAOT,OACpDgC,UAAU,sJAEZD,EAAAA,EAAAA,KAACyB,EAAAA,IAAU,CAACxB,UAAU,wCAAwCK,KAAM,YAGxEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,cAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOtC,EAASG,QAChBwF,SAAU3D,GAAKI,EAAa,UAAWJ,EAAEe,OAAOT,OAChDgC,UAAU,sJAEZD,EAAAA,EAAAA,KAACyB,EAAAA,IAAU,CAACxB,UAAU,wCAAwCK,KAAM,YAGxEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,qBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAASI,cAChBuF,SAAU3D,GAAKI,EAAa,gBAAiBJ,EAAEe,OAAOT,OACtDgC,UAAU,mJACVsB,YAAY,sBAEdvB,EAAAA,EAAAA,KAAC6B,EAAAA,IAAQ,CAAC5B,UAAU,wCAAwCK,KAAM,YAGtEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,+BAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAAS5D,UAChBuJ,SAAU3D,GAAKI,EAAa,YAAaJ,EAAEe,OAAOT,OAClDgC,UAAU,mJACVsB,YAAY,sCAEdvB,EAAAA,EAAAA,KAACO,EAAAA,IAAU,CAACN,UAAU,wCAAwCK,KAAM,oBAQ9EH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wEAAuEC,SAAA,EACpFF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,kFAAiFC,UAC9FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,sGAAqGC,UAClHF,EAAAA,EAAAA,KAAC4B,EAAAA,IAAM,CAAC3B,UAAU,aAAaK,KAAM,QAEvCN,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,uBACpDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YACfD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,6EAA4EC,SAAC,0BAKjGF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKC,UAClBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,gBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAAS1D,WAChBqJ,SAAU3D,GAAKI,EAAa,aAAcJ,EAAEe,OAAOT,OACnDgC,UAAU,mJACVsB,YAAY,uCAEdvB,EAAAA,EAAAA,KAAC4B,EAAAA,IAAM,CAAC3B,UAAU,wCAAwCK,KAAM,YAGpEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,qBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,YACE/B,MAAOtC,EAASzD,cAChBoJ,SAAU3D,GAAKI,EAAa,gBAAiBJ,EAAEe,OAAOT,OACtDgC,UAAU,+JACV6B,KAAM,EACNP,YAAY,uCAEdvB,EAAAA,EAAAA,KAAC6B,EAAAA,IAAQ,CAAC5B,UAAU,wCAAwCK,KAAM,oBAQ5EH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wEAAuEC,SAAA,EACpFF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iFAAgFC,UAC7FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qGAAoGC,UACjHF,EAAAA,EAAAA,KAAC+B,EAAAA,IAAO,CAAC9B,UAAU,aAAaK,KAAM,QAExCN,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,2BACpDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YACfD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,+EAA8EC,SAAC,2BAKnGF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,MAAKC,UAClBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,oBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAASxD,UAChBmJ,SAAU3D,GAAKI,EAAa,YAAaJ,EAAEe,OAAOT,OAClDgC,UAAU,mJACVsB,YAAY,0BAEdvB,EAAAA,EAAAA,KAAC+B,EAAAA,IAAO,CAAC9B,UAAU,wCAAwCK,KAAM,YAGrEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,iBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACE/B,MAAOtC,EAASvD,WAChBkJ,SAAU3D,GAAKI,EAAa,aAAcJ,EAAEe,OAAOT,OACnDgC,UAAU,mJACVsB,YAAY,uBAEdvB,EAAAA,EAAAA,KAAC4B,EAAAA,IAAM,CAAC3B,UAAU,wCAAwCK,KAAM,YAGpEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,0CAAyCC,SAAC,sBAG3DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,YACE/B,MAAOtC,EAAStD,QAChBiJ,SAAU3D,GAAKI,EAAa,UAAWJ,EAAEe,OAAOT,OAChDgC,UAAU,+JACV6B,KAAM,EACNP,YAAY,yDAEdvB,EAAAA,EAAAA,KAACO,EAAAA,IAAU,CAACN,UAAU,wCAAwCK,KAAM,oBAQ9EH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wEAAuEC,SAAA,EACpFF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,gFAA+EC,UAC5FC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oGAAmGC,UAChHF,EAAAA,EAAAA,KAACgC,EAAAA,IAAS,CAAC/B,UAAU,aAAaK,KAAM,QAE1CN,EAAAA,EAAAA,KAAA,MAAIC,UAAU,sCAAqCC,SAAC,sBACpDC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,+EAA8EC,SAAA,CAC3FvE,EAASrF,MAAM2L,OAAO,QAAgC,IAA1BtG,EAASrF,MAAM2L,OAAe,IAAM,UAGrE9B,EAAAA,EAAAA,MAAA,UACE3B,KAAK,SACL4B,QAlYA8B,KACdtG,EAAYuB,IAAI,IACXA,EACH7G,MAAO,IACF6G,EAAK7G,MACR,CACEmC,GAAIf,KAAKkC,MACThD,YAAa,GACbG,QAAS,GACTN,SAAU,EACVO,KAAM,MACNL,MAAO,EACPwI,gBAAiB,EACjBrC,eAAgB,EAChBZ,QAAS,EACTC,UAAW,EACXlF,OAAQ,QAmXAgJ,UAAU,kNAAiNC,SAAA,EAE3NF,EAAAA,EAAAA,KAACmC,EAAAA,IAAM,CAAClC,UAAU,OAAOK,KAAM,KAAM,oBAK3CH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,MAAKC,SAAA,EAClBF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,YAAWC,SACvBvE,EAASrF,MAAMC,IAAI,CAACsG,EAAMyC,KACzBU,EAAAA,EAAAA,KAAA,OAAmBC,UAAU,sDAAqDC,UAChFC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,kBAGhEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,MAAA,UACElC,MAAOpB,EAAK1F,QAAU,GACtBmK,SAAW3D,GAvbNyE,EAAC9C,EAAOnI,KACrC,MAAM+G,EAAWzC,EAAY0C,KAAK3H,GAAMA,EAAGiC,KAAOtB,GAC7C+G,EAKLtC,EAAYuB,IAAS,IAADkF,EAAAC,EAAAC,EAAAC,EAAAC,EAClB,MAAMnM,EAAQ,IAAI6G,EAAK7G,OACjBoM,EAAUpM,EAAMgJ,IAAU,CAAC,EAG3B3I,GAFWD,OAAOgM,EAAQjM,UAGuE,QAD5F4L,EAAoF,QAApFC,EAAoC,OAAxB,OAARpE,QAAQ,IAARA,GAAiB,QAATqE,EAARrE,EAAUyE,eAAO,IAAAJ,OAAT,EAARA,EAAmBK,WAAoBlM,OAAOwH,EAASyE,QAAQC,WAAa,YAAI,IAAAN,EAAAA,EAC5C,OAA5B,OAARpE,QAAQ,IAARA,GAAiB,QAATsE,EAARtE,EAAUyE,eAAO,IAAAH,OAAT,EAARA,EAAmBK,eAAwBnM,OAAOwH,EAASyE,QAAQE,eAAiB,YAAI,IAAAR,EAAAA,EACxF3L,OAAOgM,EAAQ/L,QAAU,GAexC,OAbAL,EAAMgJ,GAAS,IACVoD,EACHvL,OAAQ+G,EAASzF,GACjB7B,YAAasH,EAASG,MAAQqE,EAAQ9L,aAAe,GACrDG,QAASmH,EAAS4E,KAAOJ,EAAQ3L,SAAW,GAC5CC,KAAMkH,EAASlH,MAAQ0L,EAAQ1L,MAAQ,MACvCL,MAAOA,EACPuF,QAAwC,OAAtB,OAARgC,QAAQ,IAARA,GAAiB,QAATuE,EAARvE,EAAUyE,eAAO,IAAAF,OAAT,EAARA,EAAmBvG,SAAkBxF,OAAOwH,EAASyE,QAAQzG,SAAYxF,OAAOgM,EAAQxG,UAAY,GAIhH5F,EAAMgJ,GAASP,EAAWzI,EAAMgJ,IAEzB,IAAKnC,EAAM7G,WA1BlB+I,EAAiBC,EAAO,SAAU,KAobK8C,CAAuB9C,EAAO3B,EAAEe,OAAOT,OACxDgC,UAAU,iHAAgHC,SAAA,EAE1HF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,GAAEiC,SAAC,sBAChBzE,EAAYlF,IAAIwM,IACf/C,EAAAA,EAAAA,KAAA,UAAoB/B,MAAO8E,EAAGtK,GAAGyH,SAAE6C,EAAG1E,MAAzB0E,EAAGtK,SAGpBuH,EAAAA,EAAAA,KAAA,UACExB,KAAK,SACL4B,QAASA,IA1Yfd,KACd3D,EAASrF,MAAM2L,QAAU,EAC3B/G,EAAU,iCAIZU,EAAYuB,IAAI,IACXA,EACH7G,MAAO6G,EAAK7G,MAAM0M,OAAO,CAAC3J,EAAG4J,IAAMA,IAAM3D,OAkYJ4D,CAAW5D,GAC1BW,UAAU,2DACVkD,MAAM,cACNC,SAAUzH,EAASrF,MAAM2L,QAAU,EAAE/B,UAErCF,EAAAA,EAAAA,KAACqD,EAAAA,IAAQ,CAAC/C,KAAM,cAKtBH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,mBAGhEF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOpB,EAAKjG,YACZ0K,SAAW3D,GAAM0B,EAAiBC,EAAO,cAAe3B,EAAEe,OAAOT,OACjEsD,YAAY,mBACZtB,UAAU,iHACVuB,UAAQ,QAIZrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,cAGhEF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOpB,EAAK9F,QACZuK,SAAW3D,GAAM0B,EAAiBC,EAAO,UAAW3B,EAAEe,OAAOT,OAC7DsD,YAAY,WACZtB,UAAU,uHAIdE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,UAGhEC,EAAAA,EAAAA,MAAA,UACElC,MAAOpB,EAAK7F,KACZsK,SAAW3D,GAAM0B,EAAiBC,EAAO,OAAQ3B,EAAEe,OAAOT,OAC1DgC,UAAU,iHAAgHC,SAAA,EAE1HF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,MAAKiC,SAAC,SACpBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,KAAIiC,SAAC,QACnBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,QAAOiC,SAAC,WACtBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,MAAKiC,SAAC,SACpBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,MAAKiC,SAAC,SACpBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,SAAQiC,SAAC,kBAI3BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,gBAGhEF,EAAAA,EAAAA,KAAA,SACExB,KAAK,SACL8E,IAAI,IACJC,KAAK,OACLtF,MAAOpB,EAAKpG,SACZ6K,SAAW3D,GAAM0B,EAAiBC,EAAO,WAAY3B,EAAEe,OAAOT,OAC9DgC,UAAU,4HACVuB,UAAQ,QAIZrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,2BAGhEF,EAAAA,EAAAA,KAAA,SACExB,KAAK,SACL+E,KAAK,OACLD,IAAI,IACJrF,MAAOpB,EAAKlG,MACZ2K,SAAW3D,GAAM0B,EAAiBC,EAAO,QAAS3B,EAAEe,OAAOT,OAC3DgC,UAAU,4HACVuB,UAAQ,QAIZrB,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,kBAGhEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACExB,KAAK,SACL+E,KAAK,OACLD,IAAI,IACJrG,IAAI,MACJgB,MAAOpB,EAAKX,QACZoF,SAAW3D,GAAM0B,EAAiBC,EAAO,UAAW3B,EAAEe,OAAOT,OAC7DgC,UAAU,oIAEZD,EAAAA,EAAAA,KAACwD,EAAAA,IAAS,CAACvD,UAAU,wCAAwCK,KAAM,YAIvEH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,gBAAeC,SAAA,EAC5BF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,qBAGhEF,EAAAA,EAAAA,KAAA,SACExB,KAAK,OACLP,MAAOuB,EAAe3C,EAAK5F,QAC3BwM,UAAQ,EACRxD,UAAU,iGAlIRpD,EAAKpE,QA2InB0H,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wFAAuFC,SAAA,EACpGC,EAAAA,EAAAA,MAAA,MAAIF,UAAU,6DAA4DC,SAAA,EACxEF,EAAAA,EAAAA,KAAC0D,EAAAA,IAAY,CAACzD,UAAU,SAAS,sBAInCE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yBAAwBC,SAAA,EACrCC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,mBAGhEC,EAAAA,EAAAA,MAAA,UACElC,MAAOtC,EAASK,aAChBsF,SAAW3D,GAAM/B,EAAYuB,IAAI,IAAUA,EAAMnB,aAAc2B,EAAEe,OAAOT,SACxEgC,UAAU,iHAAgHC,SAAA,EAE1HF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,SAAQiC,SAAC,qBACvBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,aAAYiC,SAAC,0BAI/BC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEC,EAAAA,EAAAA,MAAA,SAAOF,UAAU,+CAA8CC,SAAA,CAAC,YAC1B,eAA1BvE,EAASK,aAAgC,MAAQ,eAE7DmE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBF,EAAAA,EAAAA,KAAA,SACExB,KAAK,SACLH,KAAK,gBACLJ,MAAOtC,EAASM,cAChBqF,SAAU/C,EACV+E,IAAI,IACJC,KAAgC,eAA1B5H,EAASK,aAAgC,GAAM,IACrDiE,UAAU,iIACVsB,YAAY,SAEa,eAA1B5F,EAASK,cACRgE,EAAAA,EAAAA,KAACwD,EAAAA,IAAS,CAACvD,UAAU,wCAAwCK,KAAM,MAEnEN,EAAAA,EAAAA,KAAC0D,EAAAA,IAAY,CAACzD,UAAU,wCAAwCK,KAAM,eAM9EH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yBAAwBC,SAAA,EACrCC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,kBAGhEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,WAAUC,SAAA,EACvBC,EAAAA,EAAAA,MAAA,UACE9B,KAAK,UACLJ,MAAOtC,EAASO,QAChBoF,SAAU/C,EACV0B,UAAU,sHAAqHC,SAAA,EAE/HF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,IAAGiC,SAAC,iBAClBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,IAAGiC,SAAC,YAClBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,KAAIiC,SAAC,aACnBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,KAAIiC,SAAC,aACnBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,KAAIiC,SAAC,gBAErBF,EAAAA,EAAAA,KAACwD,EAAAA,IAAS,CAACvD,UAAU,wCAAwCK,KAAM,YAIvEH,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,kBAGhEC,EAAAA,EAAAA,MAAA,UACElC,MAAOtC,EAASa,YAChB8E,SAAW3D,GAAM/B,EAAYuB,IAAI,IAAUA,EAAMX,YAAamB,EAAEe,OAAOT,SACvEgC,UAAU,iHAAgHC,SAAA,EAE1HF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,OAAMiC,SAAC,UACrBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,SAAQiC,SAAC,YACvBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,SAAQiC,SAAC,YACvBF,EAAAA,EAAAA,KAAA,UAAQ/B,MAAM,SAAQiC,SAAC,qBAK7BC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,yBAAwBC,SAAA,EACrCC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,eAChEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,0BAAyBC,SAAA,EACtCF,EAAAA,EAAAA,KAAA,SACExB,KAAK,WACLC,QAAS9C,EAASW,gBAClBgF,SAAW3D,GAAM/B,EAAYuB,IAAI,IAAUA,EAAMb,gBAAiBqB,EAAEe,OAAOD,WAC3EwB,UAAU,2EAEZD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,wBAAuBC,SAAC,2BAI5CC,EAAAA,EAAAA,MAAA,OAAAD,SAAA,EACEF,EAAAA,EAAAA,KAAA,SAAOC,UAAU,+CAA8CC,SAAC,uBAGhEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,oBAAmBC,SAAA,EAChCF,EAAAA,EAAAA,KAAA,SACExB,KAAK,WACLH,KAAK,mBACLI,QAAS9C,EAASc,iBAClB6E,SAAW3D,GAAM/B,EAAYuB,IAAI,IAAUA,EAAMV,iBAAkBkB,EAAEe,OAAOD,WAC5EwB,UAAU,2EAEZD,EAAAA,EAAAA,KAAA,SAAOC,UAAU,6BAA4BC,SAAC,8CAQtDF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,iDAAgDC,UAC7DC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeC,SAAC,eAChCF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,cAAaC,SAAEV,EAAe7D,EAASS,eAGxDT,EAASM,cAAgB,IACxBkE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,gBAAeC,SAAA,CAAC,YACM,eAA1BvE,EAASK,aAAgC,IAAIL,EAASM,kBAAoB,GAAG,QAEzFkE,EAAAA,EAAAA,MAAA,QAAMF,UAAU,2BAA0BC,SAAA,CAAC,IAAEV,EAAe7D,EAASmB,sBAIxEnB,EAASO,QAAU,IAClBiE,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,gBAAeC,SAAA,CAAC,QAAMvE,EAASO,QAAQ,UACvD8D,EAAAA,EAAAA,KAAA,QAAMC,UAAU,cAAaC,SAAEV,EAAe7D,EAASQ,gBAI1DR,EAASW,iBAA8C,IAA3BX,EAASY,gBACpC4D,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+BAA8BC,SAAA,EAC3CF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeC,SAAC,gBAChCC,EAAAA,EAAAA,MAAA,QAAMF,UAAU,cAAaC,SAAA,CAC1BvE,EAASY,cAAgB,EAAI,IAAM,GAAIiD,EAAe7D,EAASY,sBAKtE4D,EAAAA,EAAAA,MAAA,OAAKF,UAAU,uEAAsEC,SAAA,EACnFF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,gBAAeC,SAAC,mBAChCF,EAAAA,EAAAA,KAAA,QAAMC,UAAU,kBAAiBC,SAAEV,EAAe7D,EAASU,mBAG7D2D,EAAAA,EAAAA,KAAA,OAAKC,UAAU,oCAAmCC,SAC/CgB,EAAoBvF,EAASU,iCAU5C2D,EAAAA,EAAAA,KAAA,OAAKC,UAAU,4DAA2DC,UACxEC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,6FAA4FC,SAAA,EACzGC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,qDACfD,EAAAA,EAAAA,KAAA,QAAMC,UAAU,wBAAuBC,SAAC,yBAEzCnF,IACCoF,EAAAA,EAAAA,MAAA,UACE3B,KAAK,SACL4B,QAASA,IAAMxF,EAAS,0BAA0BnC,KAClDwH,UAAU,oIAAmIC,SAAA,EAE7IF,EAAAA,EAAAA,KAAC2D,EAAAA,IAAK,CAAC1D,UAAU,OAAOK,KAAM,KAAM,iBAM1CH,EAAAA,EAAAA,MAAA,OAAKF,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,KAAA,UACExB,KAAK,SACL4B,QAASA,IAAMxF,EAAS,4BACxBqF,UAAU,8IAA6IC,SACxJ,WAIAnF,IACCoF,EAAAA,EAAAA,MAAA,UACE3B,KAAK,SACLyB,UAAU,kNAAiNC,SAAA,EAE3NF,EAAAA,EAAAA,KAAC4D,EAAAA,IAAS,CAAC3D,UAAU,OAAOK,KAAM,KAAM,YAK5CN,EAAAA,EAAAA,KAAA,UACExB,KAAK,SACL4E,SAAUhI,EACV6E,UAAU,kUAAiUC,SAE1U9E,GACC+E,EAAAA,EAAAA,MAAA0D,EAAAA,SAAA,CAAA3D,SAAA,EACEF,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mEAAuE,gBAIxFE,EAAAA,EAAAA,MAAA0D,EAAAA,SAAA,CAAA3D,SAAA,EACEF,EAAAA,EAAAA,KAAC8D,EAAAA,IAAM,CAAC7D,UAAU,OAAOK,KAAM,KAC9BvF,EAAa,iBAAmB,qCAWvD,CAGA,SAASmG,EAAoBjK,GAC3B,GAAI8M,MAAM9M,IAAsB,IAAXA,EAAc,MAAO,mBAE1C,MAAM+M,EAAMhH,KAAKiH,IAAIhN,GACfiN,EAASlH,KAAKmH,MAAMH,GACpBI,EAAQpH,KAAKE,MAAuB,KAAhB8G,EAAME,IAE1BG,EAAQ,CAAC,GAAI,MAAO,MAAO,QAAS,OAAQ,OAAQ,MAAO,QAAS,QAAS,QAC7EC,EAAQ,CAAC,MAAO,SAAU,SAAU,WAAY,WAAY,UAAW,UAAW,YAAa,WAAY,YAC3GC,EAAO,CAAC,GAAI,MAAO,SAAU,SAAU,QAAS,QAAS,QAAS,UAAW,SAAU,UACvFC,EAAS,CAAC,GAAI,WAAY,OAAQ,SAElCC,EAAkBC,IACtB,GAAU,IAANA,EAAS,MAAO,GACpB,GAAIA,EAAI,GAAI,OAAOL,EAAMK,GAAK,IAC9B,GAAIA,EAAI,GAAI,OAAOJ,EAAMI,EAAI,IAAM,IACnC,GAAIA,EAAI,IAAK,OAAOH,EAAKvH,KAAKmH,MAAMO,EAAI,KAAO,KAAOA,EAAI,KAAO,EAAIL,EAAMK,EAAI,IAAM,IAAM,IAC3F,GAAIA,EAAI,IAAM,OAAOL,EAAMrH,KAAKmH,MAAMO,EAAI,MAAQ,YAAcD,EAAeC,EAAI,KAEnF,IAAK,IAAIzB,EAAI,EAAGA,EAAIuB,EAAOvC,OAAQgB,IACjC,GAAIyB,EAAI,IAAM1H,KAAK2H,IAAI,IAAK1B,GAAI,CAC9B,MAAM2B,EAAgB,IAAN3B,EAAU,IAAO,IACjC,OAAOwB,EAAezH,KAAKmH,MAAMO,EAAIE,IAAYJ,EAAOvB,GAAK,IAAMwB,EAAeC,EAAIE,EACxF,CAGF,MAAO,IAGT,IAAIC,EAAQJ,EAAeP,GAAQpN,OAGnC,GAFA+N,EAAQA,EAAQA,EAAQ,UAAuB,IAAXX,EAAe,IAAM,IAAM,GAE3DE,EAAQ,EAAG,CAEbS,IAAUA,EAAQ,QAAU,IADTJ,EAAeL,GAAOtN,OACM,QACjD,CAGA,OADA+N,EAAQA,GAAS,OACVA,EAAQ,OACjB,C,mIClhCA,MAAMC,EAAmB,QAElB,SAASC,EAAqB7O,GAAM,IAAD8O,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACxC,MAAMC,EAAW5H,GAAa,KAANA,GAAkB,OAANA,QAAoB6H,IAAN7H,EAAkB,KAAO1H,OAAO0H,GAClF,MAAO,CACLC,KAAMxH,OAAOX,EAAImI,MAAQ,IAAIvH,OAC7B0H,KAAmB,YAAbtI,EAAIsI,KAAqB,UAAY,UAC3CsE,IAAKjM,OAAOX,EAAI4M,KAAO,IAAIhM,OAC3BoP,KAAMrP,OAAOX,EAAIgQ,MAAQ,IAAIpP,OAC7BE,KAAMH,OAAOX,EAAIc,MAAQ,IAAIF,OAC7BqP,SAAUtP,OAAOX,EAAIiQ,UAAY,IAAIrP,OACrCsP,SAAUvP,OAAOX,EAAIkQ,UAAY,IAAItP,OACrC6L,QAAS,CACPC,UAA0C,QAAjCoC,EAAEgB,EAAmB,QAAZf,EAAC/O,EAAIyM,eAAO,IAAAsC,OAAA,EAAXA,EAAarC,kBAAU,IAAAoC,EAAAA,EAAI,EAC9CnC,cAAkD,QAArCqC,EAAEc,EAAmB,QAAZb,EAACjP,EAAIyM,eAAO,IAAAwC,OAAA,EAAXA,EAAatC,sBAAc,IAAAqC,EAAAA,EAAI,EACtDlJ,aAAc,CAAC,aAAc,QAAQqK,SAAoB,QAAZjB,EAAClP,EAAIyM,eAAO,IAAAyC,OAAA,EAAXA,EAAapJ,cAAgB9F,EAAIyM,QAAQ3G,aAAe,aACtGC,cAAkD,QAArCoJ,EAAEW,EAAmB,QAAZV,EAACpP,EAAIyM,eAAO,IAAA2C,OAAA,EAAXA,EAAarJ,sBAAc,IAAAoJ,EAAAA,EAAI,EACtDnJ,QAAsC,QAA/BqJ,EAAES,EAAmB,QAAZR,EAACtP,EAAIyM,eAAO,IAAA6C,OAAA,EAAXA,EAAatJ,gBAAQ,IAAAqJ,EAAAA,EAAI,EAC1Ce,QAAS,CAAC,WAAY,eAAeD,SAAoB,QAAZZ,EAACvP,EAAIyM,eAAO,IAAA8C,OAAA,EAAXA,EAAaa,SAAWpQ,EAAIyM,QAAQ2D,QAAU,eAE9FC,MAAO,CACLC,MAAOxL,QAAiB,QAAV0K,EAACxP,EAAIqQ,aAAK,IAAAb,OAAA,EAATA,EAAWc,OAC1BC,WAA0C,QAAhCd,EAAEK,EAAiB,QAAVJ,EAAC1P,EAAIqQ,aAAK,IAAAX,OAAA,EAATA,EAAWa,mBAAW,IAAAd,EAAAA,EAAI,EAC9Ce,OAAkC,QAA5Bb,EAAEG,EAAiB,QAAVF,EAAC5P,EAAIqQ,aAAK,IAAAT,OAAA,EAATA,EAAWY,eAAO,IAAAb,EAAAA,EAAI,EACtCc,SAAU9P,QAAgB,QAATkP,EAAA7P,EAAIqQ,aAAK,IAAAR,OAAA,EAATA,EAAWY,WAAY,IAAI7P,QAE9C8P,OAAuB,aAAf1Q,EAAI0Q,OAAwB,WAAa,SACjDC,MAAOhQ,OAAOX,EAAI2Q,OAAS,IAAI/P,OAEnC,CAEO,SAASgQ,EAAetO,GAAU,IAADuO,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACtC,MAAMpK,EAAIlF,EAAQE,QAAU,CAAC,EAC7B,MAAO,CACLD,GAAID,EAAQC,GACZ4F,KAAMX,EAAEW,MAAQ,GAChBG,KAAMd,EAAEc,MAAQ,UAChBsE,IAAKpF,EAAEoF,KAAO,GACdoD,KAAMxI,EAAEwI,MAAQ,GAChBlP,KAAM0G,EAAE1G,MAAQ,GAChBmP,SAAUzI,EAAEyI,UAAY,GACxBC,SAAU1I,EAAE0I,UAAY,GACxBzD,QAAS,CACPC,UAA2C,kBAAhB,QAAhBmE,EAAOrJ,EAAEiF,eAAO,IAAAoE,OAAA,EAATA,EAAWnE,WAAyBlF,EAAEiF,QAAQC,UAAYlM,QAAgB,QAATsQ,EAAAtJ,EAAEiF,eAAO,IAAAqE,OAAA,EAATA,EAAWpE,YAAa,GAC3GC,cAAmD,kBAApB,QAAhBoE,EAAOvJ,EAAEiF,eAAO,IAAAsE,OAAA,EAATA,EAAWpE,eAA6BnF,EAAEiF,QAAQE,cAAgBnM,QAAgB,QAATwQ,EAAAxJ,EAAEiF,eAAO,IAAAuE,OAAA,EAATA,EAAWrE,gBAAiB,GAC3H7G,cAAuB,QAATmL,EAAAzJ,EAAEiF,eAAO,IAAAwE,OAAA,EAATA,EAAWnL,eAAgB,aACzCC,cAAmD,kBAApB,QAAhBmL,EAAO1J,EAAEiF,eAAO,IAAAyE,OAAA,EAATA,EAAWnL,eAA6ByB,EAAEiF,QAAQ1G,cAAgBvF,QAAgB,QAAT2Q,EAAA3J,EAAEiF,eAAO,IAAA0E,OAAA,EAATA,EAAWpL,gBAAiB,GAC3HC,QAAuC,kBAAd,QAAhBoL,EAAO5J,EAAEiF,eAAO,IAAA2E,OAAA,EAATA,EAAWpL,SAAuBwB,EAAEiF,QAAQzG,QAAUxF,QAAgB,QAAT6Q,EAAA7J,EAAEiF,eAAO,IAAA4E,OAAA,EAATA,EAAWrL,UAAW,GACnGoK,SAAkB,QAATkB,EAAA9J,EAAEiF,eAAO,IAAA6E,OAAA,EAATA,EAAWlB,UAAW,eAEjCC,MAAO,CACLC,MAAOxL,QAAe,QAARyM,EAAC/J,EAAE6I,aAAK,IAAAkB,OAAA,EAAPA,EAASjB,OACxBC,WAA2C,kBAAjB,QAAdiB,EAAOhK,EAAE6I,aAAK,IAAAmB,OAAA,EAAPA,EAASjB,YAA0B/I,EAAE6I,MAAME,WAAa/P,QAAc,QAAPiR,EAAAjK,EAAE6I,aAAK,IAAAoB,OAAA,EAAPA,EAASlB,aAAc,GACzGC,OAAmC,kBAAb,QAAdkB,EAAOlK,EAAE6I,aAAK,IAAAqB,OAAA,EAAPA,EAASlB,QAAsBhJ,EAAE6I,MAAMG,OAAShQ,QAAc,QAAPmR,EAAAnK,EAAE6I,aAAK,IAAAsB,OAAA,EAAPA,EAASnB,SAAU,GACzFC,UAAiB,QAAPmB,EAAApK,EAAE6I,aAAK,IAAAuB,OAAA,EAAPA,EAASnB,WAAY,IAEjCC,OAAQlJ,EAAEkJ,QAAU,SACpBC,MAAOnJ,EAAEmJ,OAAS,GAClB/M,UAAW4D,EAAE5D,UACbC,UAAW2D,EAAE3D,UAEjB,CAEO,SAASgO,EAAa7R,GAC3B,MAAM8R,EAAS,CAAC,EAMhB,QALK9R,EAAImI,MAAQxH,OAAOX,EAAImI,MAAMvH,OAAOmL,OAAS,KAAG+F,EAAO3J,KAAO,yBAC9DnI,EAAIc,OAAMgR,EAAOhR,KAAO,oBACzBd,EAAIyM,SAAWzM,EAAIyM,QAAQC,UAAY,IAAGoF,EAAOpF,UAAY,2BAC7D1M,EAAIyM,SAAWzM,EAAIyM,QAAQE,cAAgB,IAAGmF,EAAOnF,cAAgB,+BACrE3M,EAAIyM,SAAWzM,EAAIyM,QAAQzG,QAAU,IAAG8L,EAAO9L,QAAU,yBACtD8L,CACT,CAEOrP,eAAesP,EAAgBC,EAAMC,GAC1C,MAAMC,EAAO,SAASD,GAAc,SAASzQ,KAAKkC,SAASsO,EAAK7J,OAC1DgK,GAAaxO,EAAAA,EAAAA,IAAIyO,EAAAA,EAASF,GAC1B7O,QAAagP,EAAAA,EAAAA,GAAYF,EAAYH,GAC3C,OAAOM,EAAAA,EAAAA,IAAejP,EAAKM,IAC7B,CAEOlB,eAAe8P,EAAWvS,GAC/B,MAAM8R,EAASD,EAAa7R,GAC5B,GAAIwS,OAAOC,KAAKX,GAAQ/F,OAAQ,CAC9B,MAAM2G,EAAM,IAAIC,MAAM,0BAEtB,MADAD,EAAI7P,QAAUiP,EACRY,CACR,CACA,MAAMlQ,EAAOqM,EAAqB7O,GAC5B0D,GAAMR,EAAAA,EAAAA,MAEZ,MAAO,CAAEX,UADSO,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI4L,GAAmB,IAAKpM,EAAMoB,UAAWF,EAAKG,UAAWH,KAChFnB,MAAOC,EAC1B,CAEOC,eAAemQ,EAAWrQ,EAAIvC,GACnC,MAAM8R,EAASD,EAAa7R,GAC5B,GAAIwS,OAAOC,KAAKX,GAAQ/F,OAAQ,CAC9B,MAAM2G,EAAM,IAAIC,MAAM,0BAEtB,MADAD,EAAI7P,QAAUiP,EACRY,CACR,CACA,MAAMlQ,EAAOqM,EAAqB7O,SAC5B+D,EAAAA,EAAAA,KAAUR,EAAAA,EAAAA,IAAIP,EAAAA,GAAI4L,EAAkBrM,GAAK,IAAKC,EAAMqB,WAAWX,EAAAA,EAAAA,OACvE,CAMOT,eAAeoQ,EAAYtQ,GAChC,MAAMc,QAAaC,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAIP,EAAAA,GAAI4L,EAAkBrM,IACpD,OAAKc,EAAKG,SACHoN,EAAevN,GADK,IAE7B,CAEOZ,eAAemF,IACpB,MAAMkL,GAAIC,EAAAA,EAAAA,IAAMhQ,EAAAA,EAAAA,IAAWC,EAAAA,GAAI4L,IAAmBoE,EAAAA,EAAAA,IAAQ,YAAa,SAEvE,aADuB1L,EAAAA,EAAAA,IAAQwL,IACfvL,KAAKlH,IAAIuQ,EAC3B,CAEOnO,eAAewQ,EAAW9G,GAAoC,IAAnC,KAAE+G,EAAI,KAAE5K,EAAI,SAAE2H,EAAQ,OAAES,GAAQvE,EAGhE,IAAI/L,SADmBkH,EAAAA,EAAAA,KAAQvE,EAAAA,EAAAA,IAAWC,EAAAA,GAAI4L,KACzBrH,KAAKlH,IAAIuQ,GAC9B,GAAIsC,EAAM,CACR,MAAMC,EAAID,EAAKE,cACfhT,EAAQA,EAAM0M,OAAQC,IAAOA,EAAE5E,MAAQ,IAAIiL,cAAcjD,SAASgD,KAAOpG,EAAEiD,MAAQ,IAAIoD,cAAcjD,SAASgD,KAAOpG,EAAEH,KAAO,IAAIwG,cAAcjD,SAASgD,GAC3J,CAIA,OAHI7K,IAAMlI,EAAQA,EAAM0M,OAAQC,GAAMA,EAAEzE,OAASA,IAC7C2H,IAAU7P,EAAQA,EAAM0M,OAAQC,GAAMA,EAAEkD,WAAaA,IACrDS,IAAQtQ,EAAQA,EAAM0M,OAAQC,GAAMA,EAAE2D,SAAWA,IAC9CtQ,CACT,CAEOqC,eAAe4Q,EAAgBlP,GACpC,MAAMC,GAAQC,EAAAA,EAAAA,IAAWrB,EAAAA,IACzBmB,EAAIG,QAAS/B,GAAO6B,EAAMG,QAAOhB,EAAAA,EAAAA,IAAIP,EAAAA,GAAI4L,EAAkBrM,WACrD6B,EAAMI,QACd,C","sources":["services/deliveryChallanService.js","components/Admin/DeliveryChallanForm.jsx","services/itemService.js"],"sourcesContent":["import { collection, addDoc, getDocs, getDoc, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, writeBatch } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\n\r\nconst DC_COLLECTION = 'deliveryChallans';\r\nconst DC_ACTIVITY_COLLECTION = 'dcActivity';\r\n\r\nexport function normalizeChallanForSave(raw) {\r\n\tconst items = Array.isArray(raw.items) ? raw.items : [];\r\n\tconst safeItems = items.map((it) => {\r\n\t\tconst quantity = Number(it.quantity) || 0;\r\n\t\tconst price = Number(it.price) || 0;\r\n\t\treturn {\r\n\t\t\tdescription: String(it.description || '').trim(),\r\n\t\t\thsnCode: String(it.hsnCode || ''),\r\n\t\t\tquantity,\r\n\t\t\tunit: String(it.unit || 'Nos'),\r\n\t\t\tprice,\r\n\t\t\tamount: Number((quantity * price).toFixed(2)),\r\n\t\t\titemId: it.itemId || null,\r\n\t\t};\r\n\t});\r\n\r\n\tconst totalAmount = safeItems.reduce((sum, it) => sum + (Number(it.amount) || 0), 0);\r\n\tconst totalQuantity = safeItems.reduce((sum, it) => sum + (Number(it.quantity) || 0), 0);\r\n\r\n\treturn {\r\n\t\tchallanNumber: String(raw.challanNumber || '').trim(),\r\n\t\tdate: raw.date || new Date().toISOString().split('T')[0],\r\n\t\tpoId: raw.poId ? String(raw.poId) : null,\r\n\t\tpoNumber: raw.poNumber ? String(raw.poNumber) : (raw.reference ? String(raw.reference) : ''),\r\n\t\tvendorId: String(raw.vendorId || '').trim(),\r\n\t\tvendorName: String(raw.vendorName || ''),\r\n\t\tvendorAddress: String(raw.vendorAddress || ''),\r\n\t\treference: String(raw.reference || ''),\r\n\t\tvehicleNo: String(raw.vehicleNo || ''),\r\n\t\tdriverName: String(raw.driverName || ''),\r\n\t\tremarks: String(raw.remarks || ''),\r\n\t\titems: safeItems,\r\n\t\ttotalAmount: Number(totalAmount.toFixed(2)),\r\n\t\ttotalQuantity,\r\n\t\tamountInWords: String(raw.amountInWords || ''),\r\n\t};\r\n}\r\n\r\nexport function mapChallanFromDoc(docSnap) {\r\n\treturn { id: docSnap.id, ...docSnap.data() };\r\n}\r\n\r\nasync function logActivity(dcId, action, details) {\r\n\ttry {\r\n\t\tawait addDoc(collection(db, DC_ACTIVITY_COLLECTION), { dcId, action, details: details || {}, timestamp: serverTimestamp() });\r\n\t} catch (_) {}\r\n}\r\n\r\nexport async function getChallansOrdered() {\r\n\tconst q = query(collection(db, DC_COLLECTION), orderBy('createdAt', 'desc'));\r\n\tconst snap = await getDocs(q);\r\n\treturn snap.docs.map(mapChallanFromDoc);\r\n}\r\n\r\nexport async function getChallanById(id) {\r\n\tconst snap = await getDoc(doc(db, DC_COLLECTION, id));\r\n\tif (!snap.exists()) return null;\r\n\treturn mapChallanFromDoc(snap);\r\n}\r\n\r\nexport async function createChallan(raw) {\r\n\tconst data = normalizeChallanForSave(raw);\r\n\tconst now = serverTimestamp();\r\n\tconst ref = await addDoc(collection(db, DC_COLLECTION), { ...data, createdAt: now, updatedAt: now });\r\n\tawait logActivity(ref.id, 'create', { vendorId: data.vendorId, totalAmount: data.totalAmount });\r\n\treturn { id: ref.id, ...data };\r\n}\r\n\r\nexport async function updateChallan(id, raw) {\r\n\tconst data = normalizeChallanForSave(raw);\r\n\tawait updateDoc(doc(db, DC_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\r\n\tawait logActivity(id, 'update');\r\n}\r\n\r\nexport async function deleteChallan(id) {\r\n\tawait deleteDoc(doc(db, DC_COLLECTION, id));\r\n\tawait logActivity(id, 'delete');\r\n}\r\n\r\nexport async function bulkDeleteChallans(ids) {\r\n\tconst batch = writeBatch(db);\r\n\tids.forEach((id) => batch.delete(doc(db, DC_COLLECTION, id)));\r\n\tawait batch.commit();\r\n\tfor (const id of ids) logActivity(id, 'bulk_delete');\r\n}\r\n","import { useEffect, useState, useCallback } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { createChallan, getChallanById, updateChallan, normalizeChallanForSave } from '../../services/deliveryChallanService';\nimport { getItemsOrdered } from '../../services/itemService';\nimport { useNotification } from './NotificationSystem';\nimport { \n  FiArrowLeft, FiSave, FiPlus, FiTrash2, FiFileText, FiUser, FiTruck, \n  FiPackage, FiCalendar, FiMapPin, FiDollarSign, FiEye, FiPrinter, \n  FiDownload, FiCheck, FiAlertCircle, FiInfo, FiPercent, FiMinus\n} from 'react-icons/fi';\n\nexport default function DeliveryChallanForm() {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const isEditMode = Boolean(id);\n  const { showSuccess, showError } = useNotification();\n\n  const [loading, setLoading] = useState(false);\n  const [vendors, setVendors] = useState([]);\n  const [masterItems, setMasterItems] = useState([]);\n  const [formData, setFormData] = useState({\n    challanNumber: '',\n    date: new Date().toISOString().split('T')[0],\n    invoiceDate: new Date().toISOString().split('T')[0],\n    dueDate: new Date().toISOString().split('T')[0],\n    stateOfSupply: '',\n    vendorId: '',\n    vendorName: '',\n    vendorAddress: '',\n    reference: '',\n    vehicleNo: '',\n    driverName: '',\n    remarks: '',\n    items: [\n      { id: Date.now(), description: '', hsnCode: '', quantity: 1, unit: 'Nos', price: 0, amount: 0 }\n    ],\n    discountType: 'amount', // 'amount' or 'percentage'\n    discountValue: 0,\n    taxRate: 0,\n    taxAmount: 0,\n    subtotal: 0,\n    finalAmount: 0,\n    roundOffEnabled: true,\n    roundOffValue: 0,\n    paymentType: 'Cash',\n    approvalRequired: false,\n  });\n\n  // Calculate totals whenever items or discount/tax changes\n  useEffect(() => {\n    calculateTotals();\n  }, [formData.items, formData.discountType, formData.discountValue, formData.taxRate]);\n\n  const calculateTotals = useCallback(() => {\n    // Calculate subtotal from all items\n    const subtotal = formData.items.reduce((sum, item) => {\n      return sum + (Number(item.amount) || 0);\n    }, 0);\n    \n    // Calculate discount\n    let discountAmount = 0;\n    if (formData.discountType === 'percentage') {\n      discountAmount = (subtotal * (formData.discountValue || 0)) / 100;\n    } else {\n      discountAmount = Number(formData.discountValue) || 0;\n    }\n    \n    // Calculate taxable amount\n    const taxableAmount = Math.max(0, subtotal - discountAmount);\n    \n    // Calculate tax\n    const taxAmount = (taxableAmount * (formData.taxRate || 0)) / 100;\n    \n    // Calculate final amount\n    let finalAmount = taxableAmount + taxAmount;\n    \n    // Apply round off if enabled\n    let roundOffValue = 0;\n    if (formData.roundOffEnabled) {\n      roundOffValue = Math.round(finalAmount) - finalAmount;\n      finalAmount = Math.round(finalAmount);\n    }\n    \n    setFormData(prev => ({\n      ...prev,\n      subtotal,\n      discountAmount,\n      taxAmount,\n      finalAmount,\n      roundOffValue\n    }));\n  }, [formData.items, formData.discountType, formData.discountValue, formData.taxRate, formData.roundOffEnabled]);\n\n  useEffect(() => {\n    fetchVendors();\n    fetchItems();\n    if (isEditMode) {\n      fetchChallan();\n    }\n  }, [id]);\n\n  const fetchVendors = async () => {\n    try {\n      const snap = await getDocs(collection(db, 'vendors'));\n      const list = snap.docs.map(d => ({ id: d.id, ...d.data() }));\n      setVendors(list);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const fetchItems = async () => {\n    try {\n      const items = await getItemsOrdered();\n      setMasterItems(items);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const fetchChallan = async () => {\n    try {\n      const data = await getChallanById(id);\n      if (data) setFormData(prev => ({ ...prev, ...data }));\n    } catch (e) {\n      console.error('Failed to load challan', e);\n      showError('Failed to load challan');\n    }\n  };\n\n  const handleChange = (field, value) => {\n    if (field === 'vendorId') {\n      const selected = vendors.find(v => v.id === value);\n      setFormData(prev => ({\n        ...prev,\n        vendorId: value,\n        vendorName: selected?.name || prev.vendorName,\n        vendorAddress: selected?.address || prev.vendorAddress\n      }));\n      return;\n    }\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    const numericFields = new Set(['discountValue', 'taxRate', 'roundOffValue']);\n    const nextValue = type === 'checkbox' ? checked : (numericFields.has(name) ? Number(value) : value);\n    setFormData(prev => ({\n      ...prev,\n      [name]: nextValue\n    }));\n  };\n\n  const recalcItem = (raw) => {\n    const item = { ...raw };\n    const qty = Math.max(0, Number(item.quantity) || 0);\n    const unitPrice = Math.max(0, Number(item.price) || 0);\n    \n    // Calculate base amount\n    const baseAmount = qty * unitPrice;\n    \n    // Calculate discount if percentage is provided\n    let discountAmount = Number(item.discountAmount) || 0;\n    if (item.discountPercent > 0) {\n      discountAmount = (baseAmount * item.discountPercent) / 100;\n    }\n    \n    // Amount after discount\n    const amountAfterDiscount = Math.max(0, baseAmount - discountAmount);\n    \n    // Calculate tax\n    const taxRate = Number(item.taxRate) || 0;\n    const taxAmount = (amountAfterDiscount * taxRate) / 100;\n    \n    // Final amount for this item\n    const amount = amountAfterDiscount + taxAmount;\n    \n    return {\n      ...item,\n      quantity: qty,\n      price: unitPrice,\n      discountAmount: Number(discountAmount.toFixed(2)),\n      taxAmount: Number(taxAmount.toFixed(2)),\n      amount: Number(amount.toFixed(2))\n    };\n  };\n\n  const handleItemChange = (index, field, value) => {\n    setFormData(prev => {\n      const items = [...prev.items];\n      const updatedItem = { ...items[index], [field]: value };\n      \n      // If quantity or price changes, recalculate the item\n      if (field === 'quantity' || field === 'price') {\n        items[index] = recalcItem(updatedItem);\n      } else {\n        items[index] = updatedItem;\n      }\n      \n      return { ...prev, items };\n    });\n  };\n\n  const handleSelectMasterItem = (index, itemId) => {\n    const selected = masterItems.find(it => it.id === itemId);\n    if (!selected) {\n      handleItemChange(index, 'itemId', '');\n      return;\n    }\n    \n    setFormData(prev => {\n      const items = [...prev.items];\n      const current = items[index] || {};\n      const quantity = Number(current.quantity) || 1;\n      // Prefer SALE price, fallback to purchase price, then existing\n      const price = (selected?.pricing?.salePrice != null ? Number(selected.pricing.salePrice) : null) \n                 ?? (selected?.pricing?.purchasePrice != null ? Number(selected.pricing.purchasePrice) : null) \n                 ?? (Number(current.price) || 0);\n      \n      items[index] = {\n        ...current,\n        itemId: selected.id,\n        description: selected.name || current.description || '',\n        hsnCode: selected.hsn || current.hsnCode || '',\n        unit: selected.unit || current.unit || 'Nos',\n        price: price,\n        taxRate: (selected?.pricing?.taxRate != null ? Number(selected.pricing.taxRate) : (Number(current.taxRate) || 0))\n      };\n      \n      // Recalculate this item\n      items[index] = recalcItem(items[index]);\n      \n      return { ...prev, items };\n    });\n  };\n\n  const addItem = () => {\n    setFormData(prev => ({\n      ...prev,\n      items: [\n        ...prev.items, \n        { \n          id: Date.now(), \n          description: '', \n          hsnCode: '', \n          quantity: 1, \n          unit: 'Nos', \n          price: 0, \n          discountPercent: 0, \n          discountAmount: 0, \n          taxRate: 0, \n          taxAmount: 0, \n          amount: 0 \n        }\n      ]\n    }));\n  };\n\n  const removeItem = (index) => {\n    if (formData.items.length <= 1) {\n      showError('At least one item is required');\n      return;\n    }\n    \n    setFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Validate form\n    if (!formData.challanNumber.trim()) {\n      showError('Challan number is required');\n      return;\n    }\n    \n    if (!formData.vendorId) {\n      showError('Please select a vendor');\n      return;\n    }\n    \n    if (formData.items.some(item => !item.description.trim())) {\n      showError('All items must have a description');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      const payload = normalizeChallanForSave({\n        ...formData,\n        vendorName: vendors.find(v => v.id === formData.vendorId)?.name || formData.vendorName || '',\n        vendorAddress: vendors.find(v => v.id === formData.vendorId)?.address || formData.vendorAddress || '',\n        amountInWords: numberToIndianWords(formData.finalAmount),\n      });\n      \n      if (isEditMode) {\n        await updateChallan(id, payload);\n        showSuccess('Challan updated successfully');\n      } else {\n        const res = await createChallan(payload);\n        showSuccess('Challan created successfully');\n        navigate(`/admin/challan-details/${res.id}`);\n        return;\n      }\n      navigate('/admin/delivery-challans');\n    } catch (error) {\n      console.error('Save failed', error);\n      showError('Failed to save challan: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Format currency for display\n  const formatCurrency = (value) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(value);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 mb-8 overflow-hidden\">\n          <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 px-8 py-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <button \n                  onClick={() => navigate(-1)} \n                  className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-200 backdrop-blur-sm\"\n                >\n                  <FiArrowLeft className=\"text-white\" size={20} />\n                </button>\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\n                    <FiFileText className=\"text-white\" size={24} />\n                  </div>\n                  <div>\n                    <h1 className=\"text-2xl font-bold text-white\">\n                      {isEditMode ? 'Edit Delivery Challan' : 'Create New Delivery Challan'}\n                    </h1>\n                    <p className=\"text-blue-100 text-sm\">\n                      {isEditMode ? 'Update challan details and items' : 'Generate professional delivery challan for your shipments'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2\">\n                  <span className=\"text-white text-sm font-medium\">\n                    {new Date().toLocaleDateString('en-IN', { \n                      day: 'numeric', \n                      month: 'short', \n                      year: 'numeric' \n                    })}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <form onSubmit={onSubmit} className=\"space-y-8\">\n          {/* Primary Details Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\">\n                  <FiInfo className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Primary Details</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Required Information\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Challan Number *\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.challanNumber} \n                      onChange={e => handleChange('challanNumber', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter challan number\"\n                      required \n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Challan Date *\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.date} \n                      onChange={e => handleChange('date', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      required \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Select Vendor *\n                  </label>\n                  <div className=\"relative\">\n                    <select \n                      value={formData.vendorId} \n                      onChange={e => handleChange('vendorId', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 appearance-none bg-white\"\n                      required\n                    >\n                      <option value=\"\">Choose vendor...</option>\n                      {vendors.map(v => (\n                        <option key={v.id} value={v.id}>{v.name || v.companyName || v.displayName || v.id}</option>\n                      ))}\n                    </select>\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Invoice Date\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.invoiceDate} \n                      onChange={e => handleChange('invoiceDate', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Due Date\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.dueDate} \n                      onChange={e => handleChange('dueDate', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    State of Supply\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.stateOfSupply} \n                      onChange={e => handleChange('stateOfSupply', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter state name\"\n                    />\n                    <FiMapPin className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-3 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Reference (PO/Job Number)\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.reference} \n                      onChange={e => handleChange('reference', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter PO or Job reference number\"\n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Party & Billing Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center\">\n                  <FiUser className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Party Information</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Billing Details\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Party Name\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.vendorName} \n                      onChange={e => handleChange('vendorName', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Auto-filled from vendor selection\"\n                    />\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-2 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Billing Address\n                  </label>\n                  <div className=\"relative\">\n                    <textarea \n                      value={formData.vendorAddress} \n                      onChange={e => handleChange('vendorAddress', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none\" \n                      rows={3}\n                      placeholder=\"Enter complete billing address...\"\n                    />\n                    <FiMapPin className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Logistics Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center\">\n                  <FiTruck className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Logistics Information</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Delivery Details\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Vehicle Number\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.vehicleNo} \n                      onChange={e => handleChange('vehicleNo', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter vehicle number\"\n                    />\n                    <FiTruck className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Driver Name\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.driverName} \n                      onChange={e => handleChange('driverName', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter driver name\"\n                    />\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-3 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Delivery Remarks\n                  </label>\n                  <div className=\"relative\">\n                    <textarea \n                      value={formData.remarks} \n                      onChange={e => handleChange('remarks', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none\" \n                      rows={3}\n                      placeholder=\"Add any special delivery instructions or remarks...\"\n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Items Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center\">\n                    <FiPackage className=\"text-white\" size={16} />\n                  </div>\n                  <h2 className=\"text-lg font-semibold text-gray-900\">Items & Services</h2>\n                  <span className=\"bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                    {formData.items.length} Item{formData.items.length !== 1 ? 's' : ''}\n                  </span>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={addItem}\n                  className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-medium rounded-xl hover:from-purple-600 hover:to-pink-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n                >\n                  <FiPlus className=\"mr-2\" size={16} />\n                  Add Item\n                </button>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"space-y-4\">\n                {formData.items.map((item, index) => (\n                  <div key={item.id} className=\"p-4 border border-gray-200 rounded-lg bg-gray-50/50\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-12 gap-4\">\n                      <div className=\"md:col-span-3\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Item/Service\n                        </label>\n                        <div className=\"flex gap-2\">\n                          <select\n                            value={item.itemId || ''}\n                            onChange={(e) => handleSelectMasterItem(index, e.target.value)}\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          >\n                            <option value=\"\">-- Select Item --</option>\n                            {masterItems.map(mi => (\n                              <option key={mi.id} value={mi.id}>{mi.name}</option>\n                            ))}\n                          </select>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeItem(index)}\n                            className=\"p-2 text-red-600 hover:text-red-800 bg-red-50 rounded-lg\"\n                            title=\"Remove Item\"\n                            disabled={formData.items.length <= 1}\n                          >\n                            <FiTrash2 size={16} />\n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"md:col-span-5\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Description *\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={item.description}\n                          onChange={(e) => handleItemChange(index, 'description', e.target.value)}\n                          placeholder=\"Item description\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          HSN Code\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={item.hsnCode}\n                          onChange={(e) => handleItemChange(index, 'hsnCode', e.target.value)}\n                          placeholder=\"HSN code\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Unit\n                        </label>\n                        <select\n                          value={item.unit}\n                          onChange={(e) => handleItemChange(index, 'unit', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"Nos\">Nos</option>\n                          <option value=\"Kg\">Kg</option>\n                          <option value=\"Meter\">Meter</option>\n                          <option value=\"Set\">Set</option>\n                          <option value=\"Box\">Box</option>\n                          <option value=\"Packet\">Packet</option>\n                        </select>\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Quantity *\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"0.01\"\n                          value={item.quantity}\n                          onChange={(e) => handleItemChange(index, 'quantity', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Unit Price (₹) *\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={item.price}\n                          onChange={(e) => handleItemChange(index, 'price', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Tax Rate (%)\n                        </label>\n                        <div className=\"relative\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            min=\"0\"\n                            max=\"100\"\n                            value={item.taxRate}\n                            onChange={(e) => handleItemChange(index, 'taxRate', e.target.value)}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          />\n                          <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                        </div>\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Amount (₹)\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formatCurrency(item.amount)}\n                          readOnly\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 font-medium text-right\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Pricing Summary */}\n              <div className=\"mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                  <FiDollarSign className=\"mr-2\" />\n                  Pricing Summary\n                </h3>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Discount Type\n                        </label>\n                        <select\n                          value={formData.discountType}\n                          onChange={(e) => setFormData(prev => ({ ...prev, discountType: e.target.value }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"amount\">Amount (₹)</option>\n                          <option value=\"percentage\">Percentage (%)</option>\n                        </select>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Discount {formData.discountType === 'percentage' ? '(%)' : '(₹)'}\n                        </label>\n                        <div className=\"relative\">\n                          <input\n                            type=\"number\"\n                            name=\"discountValue\"\n                            value={formData.discountValue}\n                            onChange={handleInputChange}\n                            min=\"0\"\n                            step={formData.discountType === 'percentage' ? 0.1 : 0.01}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                            placeholder=\"0.00\"\n                          />\n                          {formData.discountType === 'percentage' ? (\n                            <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                          ) : (\n                            <FiDollarSign className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Tax Rate (%)\n                        </label>\n                        <div className=\"relative\">\n                          <select\n                            name=\"taxRate\"\n                            value={formData.taxRate}\n                            onChange={handleInputChange}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          >\n                            <option value=\"0\">No Tax (0%)</option>\n                            <option value=\"5\">GST 5%</option>\n                            <option value=\"12\">GST 12%</option>\n                            <option value=\"18\">GST 18%</option>\n                            <option value=\"28\">GST 28%</option>\n                          </select>\n                          <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Payment Type\n                        </label>\n                        <select \n                          value={formData.paymentType} \n                          onChange={(e) => setFormData(prev => ({ ...prev, paymentType: e.target.value }))} \n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"Cash\">Cash</option>\n                          <option value=\"Online\">Online</option>\n                          <option value=\"Credit\">Credit</option>\n                          <option value=\"Cheque\">Cheque</option>\n                        </select>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Round Off</label>\n                        <div className=\"flex items-center gap-3\">\n                          <input \n                            type=\"checkbox\" \n                            checked={formData.roundOffEnabled} \n                            onChange={(e) => setFormData(prev => ({ ...prev, roundOffEnabled: e.target.checked }))} \n                            className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" \n                          />\n                          <span className=\"text-sm text-gray-700\">Enable rounding</span>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Approval Required\n                        </label>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            name=\"approvalRequired\"\n                            checked={formData.approvalRequired}\n                            onChange={(e) => setFormData(prev => ({ ...prev, approvalRequired: e.target.checked }))}\n                            className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                          />\n                          <label className=\"ml-2 text-sm text-gray-700\">\n                            Requires management approval\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Subtotal:</span>\n                        <span className=\"font-medium\">{formatCurrency(formData.subtotal)}</span>\n                      </div>\n                      \n                      {formData.discountValue > 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">\n                            Discount {formData.discountType === 'percentage' ? `(${formData.discountValue}%)` : ''}:\n                          </span>\n                          <span className=\"font-medium text-red-600\">-{formatCurrency(formData.discountAmount)}</span>\n                        </div>\n                      )}\n                      \n                      {formData.taxRate > 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">Tax ({formData.taxRate}%):</span>\n                          <span className=\"font-medium\">{formatCurrency(formData.taxAmount)}</span>\n                        </div>\n                      )}\n                      \n                      {formData.roundOffEnabled && formData.roundOffValue !== 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">Round Off:</span>\n                          <span className=\"font-medium\">\n                            {formData.roundOffValue > 0 ? '+' : ''}{formatCurrency(formData.roundOffValue)}\n                          </span>\n                        </div>\n                      )}\n                      \n                      <div className=\"flex justify-between text-lg font-bold border-t border-gray-300 pt-3\">\n                        <span className=\"text-gray-900\">Final Amount:</span>\n                        <span className=\"text-indigo-600\">{formatCurrency(formData.finalAmount)}</span>\n                      </div>\n                      \n                      <div className=\"text-xs text-gray-500 italic mt-2\">\n                        {numberToIndianWords(formData.finalAmount)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6\">\n            <div className=\"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full animate-pulse\"></div>\n                  <span className=\"text-sm text-gray-600\">Auto-save enabled</span>\n                </div>\n                {isEditMode && (\n                  <button \n                    type=\"button\" \n                    onClick={() => navigate(`/admin/challan-details/${id}`)} \n                    className=\"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-all duration-200\"\n                  >\n                    <FiEye className=\"mr-2\" size={16} />\n                    Preview\n                  </button>\n                )}\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <button \n                  type=\"button\" \n                  onClick={() => navigate('/admin/delivery-challans')} \n                  className=\"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all duration-200\"\n                >\n                  Cancel\n                </button>\n                \n                {isEditMode && (\n                  <button \n                    type=\"button\" \n                    className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n                  >\n                    <FiPrinter className=\"mr-2\" size={16} />\n                    Print\n                  </button>\n                )}\n                \n                <button \n                  type=\"submit\" \n                  disabled={loading} \n                  className=\"inline-flex items-center px-8 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white font-semibold rounded-xl hover:from-indigo-700 hover:via-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105\"\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                      Saving...\n                    </>\n                  ) : (\n                    <>\n                      <FiSave className=\"mr-2\" size={16} />\n                      {isEditMode ? 'Update Challan' : 'Create Challan'}\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Improved number to words function for Indian currency\nfunction numberToIndianWords(amount) {\n  if (isNaN(amount) || amount === 0) return 'Zero Rupees Only';\n  \n  const num = Math.abs(amount);\n  const rupees = Math.floor(num);\n  const paise = Math.round((num - rupees) * 100);\n  \n  const units = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];\n  const teens = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];\n  const tens = ['', 'Ten', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];\n  const places = ['', 'Thousand', 'Lakh', 'Crore'];\n  \n  const convertToWords = (n) => {\n    if (n === 0) return '';\n    if (n < 10) return units[n] + ' ';\n    if (n < 20) return teens[n - 10] + ' ';\n    if (n < 100) return tens[Math.floor(n / 10)] + ' ' + (n % 10 !== 0 ? units[n % 10] + ' ' : '');\n    if (n < 1000) return units[Math.floor(n / 100)] + ' Hundred ' + convertToWords(n % 100);\n    \n    for (let i = 0; i < places.length; i++) {\n      if (n < 100 * Math.pow(100, i)) {\n        const divisor = i === 0 ? 1000 : 100;\n        return convertToWords(Math.floor(n / divisor)) + places[i] + ' ' + convertToWords(n % divisor);\n      }\n    }\n    \n    return '';\n  };\n  \n  let words = convertToWords(rupees).trim();\n  words = words ? words + ' Rupee' + (rupees !== 1 ? 's' : '') : '';\n  \n  if (paise > 0) {\n    const paiseWords = convertToWords(paise).trim();\n    words += (words ? ' and ' : '') + paiseWords + ' Paise';\n  }\n  \n  words = words || 'Zero';\n  return words + ' Only';\n}","import { collection, addDoc, getDoc, getDocs, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, where, writeBatch } from 'firebase/firestore';\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage';\r\nimport { db } from '../firebase';\r\nimport { storage } from '../firebase';\r\n\r\nconst ITEMS_COLLECTION = 'items';\r\n\r\nexport function normalizeItemForSave(raw) {\r\n  const numeric = (v) => (v === '' || v === null || v === undefined ? null : Number(v));\r\n  return {\r\n    name: String(raw.name || '').trim(),\r\n    type: raw.type === 'service' ? 'service' : 'product',\r\n    hsn: String(raw.hsn || '').trim(),\r\n    code: String(raw.code || '').trim(),\r\n    unit: String(raw.unit || '').trim(),\r\n    category: String(raw.category || '').trim(),\r\n    imageUrl: String(raw.imageUrl || '').trim(),\r\n    pricing: {\r\n      salePrice: numeric(raw.pricing?.salePrice) ?? 0,\r\n      purchasePrice: numeric(raw.pricing?.purchasePrice) ?? 0,\r\n      discountType: ['percentage', 'flat'].includes(raw.pricing?.discountType) ? raw.pricing.discountType : 'percentage',\r\n      discountValue: numeric(raw.pricing?.discountValue) ?? 0,\r\n      taxRate: numeric(raw.pricing?.taxRate) ?? 0,\r\n      taxMode: ['with_tax', 'without_tax'].includes(raw.pricing?.taxMode) ? raw.pricing.taxMode : 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(raw.stock?.track),\r\n      openingQty: numeric(raw.stock?.openingQty) ?? 0,\r\n      minQty: numeric(raw.stock?.minQty) ?? 0,\r\n      location: String(raw.stock?.location || '').trim(),\r\n    },\r\n    status: raw.status === 'inactive' ? 'inactive' : 'active',\r\n    notes: String(raw.notes || '').trim(),\r\n  };\r\n}\r\n\r\nexport function mapItemFromDoc(docSnap) {\r\n  const d = docSnap.data() || {};\r\n  return {\r\n    id: docSnap.id,\r\n    name: d.name || '',\r\n    type: d.type || 'product',\r\n    hsn: d.hsn || '',\r\n    code: d.code || '',\r\n    unit: d.unit || '',\r\n    category: d.category || '',\r\n    imageUrl: d.imageUrl || '',\r\n    pricing: {\r\n      salePrice: typeof d.pricing?.salePrice === 'number' ? d.pricing.salePrice : Number(d.pricing?.salePrice || 0),\r\n      purchasePrice: typeof d.pricing?.purchasePrice === 'number' ? d.pricing.purchasePrice : Number(d.pricing?.purchasePrice || 0),\r\n      discountType: d.pricing?.discountType || 'percentage',\r\n      discountValue: typeof d.pricing?.discountValue === 'number' ? d.pricing.discountValue : Number(d.pricing?.discountValue || 0),\r\n      taxRate: typeof d.pricing?.taxRate === 'number' ? d.pricing.taxRate : Number(d.pricing?.taxRate || 0),\r\n      taxMode: d.pricing?.taxMode || 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(d.stock?.track),\r\n      openingQty: typeof d.stock?.openingQty === 'number' ? d.stock.openingQty : Number(d.stock?.openingQty || 0),\r\n      minQty: typeof d.stock?.minQty === 'number' ? d.stock.minQty : Number(d.stock?.minQty || 0),\r\n      location: d.stock?.location || '',\r\n    },\r\n    status: d.status || 'active',\r\n    notes: d.notes || '',\r\n    createdAt: d.createdAt,\r\n    updatedAt: d.updatedAt,\r\n  };\r\n}\r\n\r\nexport function validateItem(raw) {\r\n  const errors = {};\r\n  if (!raw.name || String(raw.name).trim().length < 2) errors.name = 'Item name is required';\r\n  if (!raw.unit) errors.unit = 'Unit is required';\r\n  if (raw.pricing && raw.pricing.salePrice < 0) errors.salePrice = 'Sale price must be >= 0';\r\n  if (raw.pricing && raw.pricing.purchasePrice < 0) errors.purchasePrice = 'Purchase price must be >= 0';\r\n  if (raw.pricing && raw.pricing.taxRate < 0) errors.taxRate = 'Tax rate must be >= 0';\r\n  return errors;\r\n}\r\n\r\nexport async function uploadItemImage(file, itemIdHint) {\r\n  const path = `items/${itemIdHint || 'tmp'}_${Date.now()}_${file.name}`;\r\n  const storageRef = ref(storage, path);\r\n  const snap = await uploadBytes(storageRef, file);\r\n  return getDownloadURL(snap.ref);\r\n}\r\n\r\nexport async function createItem(raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  const now = serverTimestamp();\r\n  const ref = await addDoc(collection(db, ITEMS_COLLECTION), { ...data, createdAt: now, updatedAt: now });\r\n  return { id: ref.id, ...data };\r\n}\r\n\r\nexport async function updateItem(id, raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  await updateDoc(doc(db, ITEMS_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\r\n}\r\n\r\nexport async function deleteItem(id) {\r\n  await deleteDoc(doc(db, ITEMS_COLLECTION, id));\r\n}\r\n\r\nexport async function getItemById(id) {\r\n  const snap = await getDoc(doc(db, ITEMS_COLLECTION, id));\r\n  if (!snap.exists()) return null;\r\n  return mapItemFromDoc(snap);\r\n}\r\n\r\nexport async function getItemsOrdered() {\r\n  const q = query(collection(db, ITEMS_COLLECTION), orderBy('createdAt', 'desc'));\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(mapItemFromDoc);\r\n}\r\n\r\nexport async function searchItems({ text, type, category, status }) {\r\n  // Basic fetch and in-memory filter to avoid complex composite indexes\r\n  const snapshot = await getDocs(collection(db, ITEMS_COLLECTION));\r\n  let items = snapshot.docs.map(mapItemFromDoc);\r\n  if (text) {\r\n    const t = text.toLowerCase();\r\n    items = items.filter((i) => (i.name || '').toLowerCase().includes(t) || (i.code || '').toLowerCase().includes(t) || (i.hsn || '').toLowerCase().includes(t));\r\n  }\r\n  if (type) items = items.filter((i) => i.type === type);\r\n  if (category) items = items.filter((i) => i.category === category);\r\n  if (status) items = items.filter((i) => i.status === status);\r\n  return items;\r\n}\r\n\r\nexport async function bulkDeleteItems(ids) {\r\n  const batch = writeBatch(db);\r\n  ids.forEach((id) => batch.delete(doc(db, ITEMS_COLLECTION, id)));\r\n  await batch.commit();\r\n}\r\n\r\n\r\n"],"names":["DC_COLLECTION","DC_ACTIVITY_COLLECTION","normalizeChallanForSave","raw","safeItems","Array","isArray","items","map","it","quantity","Number","price","description","String","trim","hsnCode","unit","amount","toFixed","itemId","totalAmount","reduce","sum","totalQuantity","challanNumber","date","Date","toISOString","split","poId","poNumber","reference","vendorId","vendorName","vendorAddress","vehicleNo","driverName","remarks","amountInWords","mapChallanFromDoc","docSnap","id","data","async","logActivity","dcId","action","details","addDoc","collection","db","timestamp","serverTimestamp","_","getChallanById","snap","getDoc","doc","exists","createChallan","now","ref","createdAt","updatedAt","updateChallan","updateDoc","deleteChallan","deleteDoc","bulkDeleteChallans","ids","batch","writeBatch","forEach","delete","commit","DeliveryChallanForm","navigate","useNavigate","useParams","isEditMode","Boolean","showSuccess","showError","useNotification","loading","setLoading","useState","vendors","setVendors","masterItems","setMasterItems","formData","setFormData","invoiceDate","dueDate","stateOfSupply","discountType","discountValue","taxRate","taxAmount","subtotal","finalAmount","roundOffEnabled","roundOffValue","paymentType","approvalRequired","useEffect","calculateTotals","useCallback","item","discountAmount","taxableAmount","Math","max","round","prev","fetchVendors","fetchItems","fetchChallan","list","getDocs","docs","d","e","console","error","getItemsOrdered","handleChange","field","value","selected","find","v","name","address","handleInputChange","type","checked","target","numericFields","Set","nextValue","has","recalcItem","qty","unitPrice","baseAmount","discountPercent","amountAfterDiscount","handleItemChange","index","updatedItem","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","_jsx","className","children","_jsxs","onClick","FiArrowLeft","size","FiFileText","toLocaleDateString","day","month","year","onSubmit","preventDefault","some","_vendors$find","_vendors$find2","payload","numberToIndianWords","res","message","FiInfo","onChange","placeholder","required","FiCalendar","companyName","displayName","FiUser","FiMapPin","rows","FiTruck","FiPackage","length","addItem","FiPlus","handleSelectMasterItem","_ref","_ref2","_selected$pricing","_selected$pricing2","_selected$pricing3","current","pricing","salePrice","purchasePrice","hsn","mi","filter","i","removeItem","title","disabled","FiTrash2","min","step","FiPercent","readOnly","FiDollarSign","FiEye","FiPrinter","_Fragment","FiSave","isNaN","num","abs","rupees","floor","paise","units","teens","tens","places","convertToWords","n","pow","divisor","words","ITEMS_COLLECTION","normalizeItemForSave","_numeric","_raw$pricing","_numeric2","_raw$pricing2","_raw$pricing3","_numeric3","_raw$pricing4","_numeric4","_raw$pricing5","_raw$pricing6","_raw$stock","_numeric5","_raw$stock2","_numeric6","_raw$stock3","_raw$stock4","numeric","undefined","code","category","imageUrl","includes","taxMode","stock","track","openingQty","minQty","location","status","notes","mapItemFromDoc","_d$pricing","_d$pricing2","_d$pricing3","_d$pricing4","_d$pricing5","_d$pricing6","_d$pricing7","_d$pricing8","_d$pricing9","_d$pricing0","_d$stock","_d$stock2","_d$stock3","_d$stock4","_d$stock5","_d$stock6","validateItem","errors","uploadItemImage","file","itemIdHint","path","storageRef","storage","uploadBytes","getDownloadURL","createItem","Object","keys","err","Error","updateItem","getItemById","q","query","orderBy","searchItems","text","t","toLowerCase","bulkDeleteItems"],"sourceRoot":""}