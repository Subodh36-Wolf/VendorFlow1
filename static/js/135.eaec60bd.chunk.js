"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[135],{1847:(e,t,i)=>{i.d(t,{A:()=>l});var n=i(5043),a=i(5772),r=i(791),s=i(5472),o=i(579);const d=[{value:"HBL",label:"HBL (Horizontal Boring & Lathe)"},{value:"VTL",label:"VTL (Vertical Turning Lathe)"},{value:"Drilling",label:"Drilling"},{value:"VMC",label:"VMC (Vertical Machining Center)"}];function l(e){let{poData:t,vendor:i,vendorId:l,onClose:c,autoPrint:m=!1}=e;const[p,u]=(0,n.useState)(i||null);(0,n.useEffect)(()=>{let e=!1;return(async()=>{if(!i&&l)try{const t=await(0,s.x7)((0,s.H9)(r.db,"vendors",l));!e&&t.exists()&&u({id:t.id,...t.data()})}catch(t){}})(),()=>{e=!0}},[i,l]);const x=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2}).format(Number(e||0)),h=e=>{const t=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],i=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],n=["","Ten","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(0===e)return"Zero";let a="";return Math.floor(e/1e7)>0&&(a+=h(Math.floor(e/1e7))+" Crore ",e%=1e7),Math.floor(e/1e5)>0&&(a+=h(Math.floor(e/1e5))+" Lakh ",e%=1e5),Math.floor(e/1e3)>0&&(a+=h(Math.floor(e/1e3))+" Thousand ",e%=1e3),Math.floor(e/100)>0&&(a+=h(Math.floor(e/100))+" Hundred ",e%=100),e>0&&(""!==a&&(a+="and "),e<10?a+=t[e]:e<20?a+=i[e-10]:(a+=n[Math.floor(e/10)],e%10>0&&(a+=" "+t[e%10]))),a.trim()},v=(0,n.useMemo)(()=>{const e=Math.floor(parseFloat((null===t||void 0===t?void 0:t.finalAmount)||0)),i=Math.round(100*(parseFloat((null===t||void 0===t?void 0:t.finalAmount)||0)%1||0));return h(e)+" Rupees"+(i?` and ${i} Paise`:"")},[null===t||void 0===t?void 0:t.finalAmount]);(0,n.useEffect)(()=>{if(m){const e=setTimeout(()=>window.print(),100);return()=>clearTimeout(e)}},[m]);const b=(0,n.useMemo)(()=>(Array.isArray(null===t||void 0===t?void 0:t.operations)?t.operations:null!==t&&void 0!==t&&t.operation?[t.operation]:[]).map(e=>{var t;return(null===(t=d.find(t=>t.value===e))||void 0===t?void 0:t.label)||e}).join(", "),[t]),f=e=>{try{if(!e)return null;let t=e;return"function"===typeof(null===e||void 0===e?void 0:e.toDate)?t=e.toDate():"string"===typeof e&&(t=new Date(e)),t.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(t){return null}};return(0,o.jsx)("div",{className:"print-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,o.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,o.jsx)("style",{children:"\n          @media print {\n            @page { size: A4 portrait; margin: 10mm 15mm 15mm 15mm; }\n            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: white !important; }\n            * { background: transparent !important; box-shadow: none !important; text-shadow: none !important; }\n            body * { visibility: hidden !important; }\n            .print-overlay, .print-overlay * { visibility: visible !important; }\n            .print-overlay { position: static !important; inset: auto !important; padding: 0 !important; background: transparent !important; overflow: visible !important; }\n            html, body { overflow: visible !important; height: auto !important; width: 210mm !important; margin: 0 !important; padding: 0 !important; }\n            #po-preview { width: 100% !important; margin: 0 !important; padding: 0 !important; }\n            .no-print { display: none !important; }\n            .print-a4 { box-shadow: none !important; margin: 0 !important; padding: 0 !important; }\n            .page-break { page-break-after: always; }\n          }\n          .print-a4 { max-width: 210mm; margin: 18px auto; background: white; font-family: 'Helvetica','Arial',sans-serif; line-height: 1.35; color: #000; font-size: 12px; }\n          .company-header { border-bottom: 2px solid #2c5282; padding-bottom: 10px; margin-bottom: 15px; }\n          .po-title { background: #2c5282; color: white; padding: 8px 15px; font-weight: bold; font-size: 16px; text-align: center; border-radius: 4px; margin: 10px 0; }\n          .section-title { font-size: 13px; font-weight: bold; padding-bottom: 4px; margin-bottom: 8px; border-bottom: 1px solid #ccc; text-transform: uppercase; color: #2c5282; }\n          .table { width: 100%; border-collapse: collapse; margin: 10px 0; }\n          .table th { background: #f0f4f8; border: 1px solid #ccc; padding: 6px 8px; font-size: 11px; font-weight: bold; text-align: left; }\n          .table td { border: 1px solid #ccc; padding: 6px 8px; font-size: 11px; vertical-align: top; }\n          .table-footer td { font-weight: bold; background: #f8f9fa; }\n          .signature-area { margin-top: 40px; border-top: 1px dashed #ccc; padding-top: 15px; }\n          .terms-box { border: 1px solid #ccc; padding: 10px; margin: 10px 0; background: #f9f9f9; font-size: 11px; }\n          .amount-in-words { padding: 8px; background: #f0f4f8; border: 1px solid #ccc; margin: 10px 0; font-style: italic; }\n          .footer { margin-top: 30px; font-size: 10px; text-align: center; color: #666; }\n        "}),(0,o.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center no-print",children:[(0,o.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Print Purchase Order"}),(0,o.jsxs)("div",{className:"flex space-x-2",children:[(0,o.jsxs)("button",{onClick:()=>window.print(),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,o.jsx)(a.a4x,{className:"mr-2",size:16})," Print / Save PDF"]}),(0,o.jsx)("button",{onClick:c,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})]})]}),(0,o.jsxs)("div",{className:"print-a4 p-10",id:"po-preview",children:[(0,o.jsx)("div",{className:"company-header",children:(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xl font-bold",children:"THORAT VALVES PVT. LTD."}),(0,o.jsx)("div",{className:"text-sm",children:"607, Shaniwar Peth, Satara - 415002"}),(0,o.jsx)("div",{className:"text-sm",children:"Phone: +91-2162-270262 \u2022 Email: thoratvalves@gmail.com"}),(0,o.jsx)("div",{className:"text-sm",children:"GSTIN: 27AAACT0000Z1Z5"})]}),(0,o.jsxs)("div",{className:"text-right",children:[(0,o.jsxs)("div",{className:"text-sm",children:["PO Reference: ",(null===t||void 0===t?void 0:t.poNumber)||`PO${(new Date).getFullYear()}${String((new Date).getMonth()+1).padStart(2,"0")}${String((new Date).getDate()).padStart(2,"0")}`]}),(0,o.jsxs)("div",{className:"text-sm",children:["Date: ",f(null===t||void 0===t?void 0:t.createdAt)||f(new Date)]})]})]})}),(0,o.jsx)("div",{className:"po-title",children:"PURCHASE ORDER"}),(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[(0,o.jsx)("div",{children:(0,o.jsx)("table",{className:"details-table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold pr-4",children:"PO Number:"}),(0,o.jsx)("td",{children:(null===t||void 0===t?void 0:t.poNumber)||"-"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold",children:"PO Date:"}),(0,o.jsx)("td",{children:(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold",children:"Operation(s):"}),(0,o.jsx)("td",{children:b||"Not Specified"})]})]})})}),(0,o.jsx)("div",{children:(0,o.jsx)("table",{className:"details-table",children:(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold pr-4",children:"Delivery By:"}),(0,o.jsx)("td",{children:f(null===t||void 0===t?void 0:t.deliveryDate)||"TBD"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold",children:"Payment Terms:"}),(0,o.jsxs)("td",{children:[(null===t||void 0===t?void 0:t.paymentTerms)||"-"," Days"]})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"font-bold",children:"State of Supply:"}),(0,o.jsx)("td",{children:(null===t||void 0===t?void 0:t.stateOfSupply)||"-"})]})]})})})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("div",{className:"section-title",children:"VENDOR DETAILS"}),p?(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold",children:p.name}),(0,o.jsx)("div",{className:"whitespace-pre-line",children:p.address||"Address not specified"}),(0,o.jsxs)("div",{children:["GSTIN: ",p.gstin||"Not provided"]})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-bold",children:"Contact:"})," ",p.contactPerson||"Not specified"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-bold",children:"Phone:"})," ",p.phone||"Not provided"]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{className:"font-bold",children:"Email:"})," ",p.email||"Not provided"]})]})]}):(0,o.jsx)("div",{children:"Vendor details not available"})]}),(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("div",{className:"section-title",children:"ITEMS / SERVICES"}),(0,o.jsxs)("table",{className:"table",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{style:{width:"5%"},children:"Sr No."}),(0,o.jsx)("th",{style:{width:"35%"},children:"Description"}),(0,o.jsx)("th",{style:{width:"10%"},children:"Operation"}),(0,o.jsx)("th",{style:{width:"8%"},children:"Qty"}),(0,o.jsx)("th",{style:{width:"8%"},children:"Unit"}),(0,o.jsx)("th",{style:{width:"12%"},children:"Rate (\u20b9)"}),(0,o.jsx)("th",{style:{width:"14%"},children:"Amount (\u20b9)"})]})}),(0,o.jsx)("tbody",{children:((null===t||void 0===t?void 0:t.items)||[]).map((e,t)=>{var i;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{className:"text-center",children:t+1}),(0,o.jsxs)("td",{children:[(0,o.jsx)("div",{className:"font-medium",children:e.description}),e.specifications&&(0,o.jsx)("div",{className:"text-xs mt-1 text-gray-600",children:e.specifications})]}),(0,o.jsx)("td",{children:e.operation?(null===(i=d.find(t=>t.value===e.operation))||void 0===i?void 0:i.label)||e.operation:"-"}),(0,o.jsx)("td",{className:"text-center",children:e.quantity}),(0,o.jsx)("td",{className:"text-center",children:e.unit}),(0,o.jsx)("td",{className:"text-right",children:x(parseFloat(e.unitPrice||0))}),(0,o.jsx)("td",{className:"text-right",children:x(parseFloat(e.amount||0))})]},t)})}),(0,o.jsxs)("tfoot",{className:"table-footer",children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Subtotal:"}),(0,o.jsx)("td",{colSpan:"2",className:"text-right",children:x(parseFloat((null===t||void 0===t?void 0:t.totalAmount)||0))})]}),parseFloat(null===t||void 0===t?void 0:t.discountAmount)>0&&(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Discount:"}),(0,o.jsxs)("td",{colSpan:"2",className:"text-right",children:["-",x(parseFloat((null===t||void 0===t?void 0:t.discountAmount)||0))]})]}),parseFloat(null===t||void 0===t?void 0:t.taxAmount)>0&&(0,o.jsxs)("tr",{children:[(0,o.jsxs)("td",{colSpan:"5",className:"text-right font-bold",children:["GST (",null===t||void 0===t?void 0:t.taxRate,"%):"]}),(0,o.jsx)("td",{colSpan:"2",className:"text-right",children:x(parseFloat((null===t||void 0===t?void 0:t.taxAmount)||0))})]}),(null===t||void 0===t?void 0:t.roundOffEnabled)&&(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Round Off:"}),(0,o.jsx)("td",{colSpan:"2",className:"text-right",children:x(parseFloat((null===t||void 0===t?void 0:t.roundOffValue)||0))})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"TOTAL (\u20b9):"}),(0,o.jsx)("td",{colSpan:"2",className:"text-right font-bold",children:x(parseFloat((null===t||void 0===t?void 0:t.finalAmount)||0))})]})]})]})]}),(0,o.jsxs)("div",{className:"amount-in-words",children:[(0,o.jsx)("span",{className:"font-bold",children:"Amount in Words: "}),v," Only"]}),(null===t||void 0===t?void 0:t.terms)&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("div",{className:"section-title",children:"TERMS AND CONDITIONS"}),(0,o.jsx)("div",{className:"terms-box",children:(0,o.jsx)("div",{className:"whitespace-pre-line",children:t.terms})})]}),(null===t||void 0===t?void 0:t.description)&&(0,o.jsxs)("div",{className:"mb-6",children:[(0,o.jsx)("div",{className:"section-title",children:"SPECIAL INSTRUCTIONS / WORK DESCRIPTION"}),(0,o.jsx)("div",{className:"p-3 border border-gray-300",children:t.description})]}),(0,o.jsx)("div",{className:"signature-area",children:(0,o.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold mb-2",children:"For THORAT VALVES PVT. LTD."}),(0,o.jsx)("div",{className:"h-16 border-b border-gray-400"}),(0,o.jsx)("div",{className:"text-sm mt-1",children:"Authorized Signatory"}),(0,o.jsx)("div",{className:"text-sm",children:"Prepared By: (D.R. Naik)"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"font-bold mb-2",children:"VENDOR ACCEPTANCE"}),(0,o.jsx)("div",{className:"h-16 border-b border-gray-400"}),(0,o.jsx)("div",{className:"text-sm mt-1",children:"Authorized Signatory"}),(0,o.jsx)("div",{className:"text-sm",children:"Date: __________________________"}),(0,o.jsx)("div",{className:"text-sm",children:"Company Seal"})]})]})}),(0,o.jsxs)("div",{className:"footer",children:[(0,o.jsx)("div",{children:"This is a computer generated document and does not require a physical signature"}),(0,o.jsx)("div",{children:"Page 1 of 1"})]})]})]})})}},9369:(e,t,i)=>{i.d(t,{B8:()=>o,G8:()=>m,KN:()=>c,Oh:()=>x,Zz:()=>u,uM:()=>h,vb:()=>p});var n=i(5472),a=i(791);const r="purchaseOrders",s="poActivity";function o(e){var t;const i=Array.isArray(e.items)?e.items:[],n=Array.isArray(e.operations)?e.operations.filter(Boolean):e.operation?[String(e.operation)]:[],a=i.map(e=>{var t,i;const n=Number(e.quantity)||0,a=Number(null!==(t=e.unitPrice)&&void 0!==t?t:e.rate)||0;return{description:String(e.description||"").trim(),quantity:n,unitPrice:a,amount:Number(null!==(i=e.amount)&&void 0!==i?i:n*a).toFixed?Number((n*a).toFixed(2)):n*a,unit:String(e.unit||"pcs"),specifications:String(e.specifications||""),deliveryDate:e.deliveryDate||"",itemId:e.itemId||null,operation:e.operation||null}}),r=a.reduce((e,t)=>e+(Number(t.amount)||0),0),s=Number(e.discountAmount||0),o=r-s,d=Number(e.taxRate||0),l=o*d/100;let c=o+l;const m=Boolean(e.roundOffEnabled);let p=Number(e.roundOffValue||0);if(m){const e=Math.round(c);p=Number((e-c).toFixed(2)),c=e}const u=n.reduce((t,i)=>(t[String(i)]=e.operationsStatus&&e.operationsStatus[i]||"pending",t),{}),x=n.reduce((t,i)=>{const n=e.operationsMeta&&e.operationsMeta[i]||{};return t[String(i)]={status:u[String(i)]||"pending",notes:n.notes||"",updatedAt:n.updatedAt||null,updatedBy:n.updatedBy||null,startedAt:n.startedAt||null,completedAt:n.completedAt||null},t},{});return{vendorId:String(e.vendorId||"").trim(),operation:n[0]?String(n[0]).trim():"",operations:n,operationsStatus:u,operationsMeta:x,description:String(e.description||""),deliveryDate:e.deliveryDate?e.deliveryDate instanceof Date?e.deliveryDate:new Date(e.deliveryDate):null,priority:e.priority||"medium",status:e.status||"pending",paymentTerms:String(null!==(t=e.paymentTerms)&&void 0!==t?t:"30"),shippingAddress:String(e.shippingAddress||""),billingAddress:String(e.billingAddress||""),currency:e.currency||"INR",invoiceDate:e.invoiceDate||null,dueDate:e.dueDate||null,stateOfSupply:String(e.stateOfSupply||""),taxRate:d,discountAmount:s,items:a,totalAmount:Number(r.toFixed(2)),taxAmount:Number(l.toFixed(2)),finalAmount:Number(c.toFixed(2)),roundOffEnabled:m,roundOffValue:p,specifications:String(e.specifications||""),qualityRequirements:String(e.qualityRequirements||""),expectedDeliveryDays:Number(e.expectedDeliveryDays||0)||0,warrantPeriod:String(e.warrantPeriod||""),terms:String(e.terms||""),poNumber:e.poNumber||null}}function d(e){const t=e.data()||{};return{id:e.id,...t}}async function l(e,t,i){try{await(0,n.gS)((0,n.rJ)(a.db,s),{poId:e,action:t,details:i||{},timestamp:(0,n.O5)()})}catch(r){}}async function c(e){const t=await(0,n.x7)((0,n.H9)(a.db,r,e));return t.exists()?d(t):null}async function m(e){const t=o(e),i=(0,n.O5)(),s=await(0,n.gS)((0,n.rJ)(a.db,r),{...t,createdAt:i,updatedAt:i});return await l(s.id,"create",{vendorId:t.vendorId,amount:t.finalAmount}),{id:s.id,...t}}async function p(e,t){const i=o(t);await(0,n.mZ)((0,n.H9)(a.db,r,e),{...i,updatedAt:(0,n.O5)()}),await l(e,"update",{status:i.status})}async function u(e){await(0,n.kd)((0,n.H9)(a.db,r,e)),await l(e,"delete")}async function x(e,t){const i=(0,n.wP)(a.db);e.forEach(e=>i.update((0,n.H9)(a.db,r,e),{...t,updatedAt:(0,n.O5)()})),await i.commit();for(const n of e)l(n,"bulk_update",{fields:t})}async function h(e){const t=(0,n.wP)(a.db);e.forEach(e=>t.delete((0,n.H9)(a.db,r,e))),await t.commit();for(const i of e)l(i,"bulk_delete")}}}]);
//# sourceMappingURL=135.eaec60bd.chunk.js.map