"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[739],{1847:(e,s,t)=>{t.d(s,{A:()=>o});var i=t(5043),a=t(5772),n=t(791),r=t(5472),l=t(579);const d=[{value:"HBL",label:"HBL (Horizontal Boring & Lathe)"},{value:"VTL",label:"VTL (Vertical Turning Lathe)"},{value:"Drilling",label:"Drilling"},{value:"VMC",label:"VMC (Vertical Machining Center)"}];function o(e){let{poData:s,vendor:t,vendorId:o,onClose:c,autoPrint:x=!1}=e;const[m,h]=(0,i.useState)(t||null);(0,i.useEffect)(()=>{let e=!1;return(async()=>{if(!t&&o)try{const s=await(0,r.x7)((0,r.H9)(n.db,"vendors",o));!e&&s.exists()&&h({id:s.id,...s.data()})}catch(s){}})(),()=>{e=!0}},[t,o]);const p=e=>new Intl.NumberFormat("en-IN",{maximumFractionDigits:2,minimumFractionDigits:2}).format(Number(e||0)),u=e=>{const s=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],t=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],i=["","Ten","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];if(0===e)return"Zero";let a="";return Math.floor(e/1e7)>0&&(a+=u(Math.floor(e/1e7))+" Crore ",e%=1e7),Math.floor(e/1e5)>0&&(a+=u(Math.floor(e/1e5))+" Lakh ",e%=1e5),Math.floor(e/1e3)>0&&(a+=u(Math.floor(e/1e3))+" Thousand ",e%=1e3),Math.floor(e/100)>0&&(a+=u(Math.floor(e/100))+" Hundred ",e%=100),e>0&&(""!==a&&(a+="and "),e<10?a+=s[e]:e<20?a+=t[e-10]:(a+=i[Math.floor(e/10)],e%10>0&&(a+=" "+s[e%10]))),a.trim()},g=(0,i.useMemo)(()=>{const e=Math.floor(parseFloat((null===s||void 0===s?void 0:s.finalAmount)||0)),t=Math.round(100*(parseFloat((null===s||void 0===s?void 0:s.finalAmount)||0)%1||0));return u(e)+" Rupees"+(t?` and ${t} Paise`:"")},[null===s||void 0===s?void 0:s.finalAmount]);(0,i.useEffect)(()=>{if(x){const e=setTimeout(()=>window.print(),100);return()=>clearTimeout(e)}},[x]);const j=(0,i.useMemo)(()=>(Array.isArray(null===s||void 0===s?void 0:s.operations)?s.operations:null!==s&&void 0!==s&&s.operation?[s.operation]:[]).map(e=>{var s;return(null===(s=d.find(s=>s.value===e))||void 0===s?void 0:s.label)||e}).join(", "),[s]),v=e=>{try{if(!e)return null;let s=e;return"function"===typeof(null===e||void 0===e?void 0:e.toDate)?s=e.toDate():"string"===typeof e&&(s=new Date(e)),s.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(s){return null}};return(0,l.jsx)("div",{className:"print-overlay fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)("style",{children:"\n          @media print {\n            @page { size: A4 portrait; margin: 10mm 15mm 15mm 15mm; }\n            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; background: white !important; }\n            * { background: transparent !important; box-shadow: none !important; text-shadow: none !important; }\n            body * { visibility: hidden !important; }\n            .print-overlay, .print-overlay * { visibility: visible !important; }\n            .print-overlay { position: static !important; inset: auto !important; padding: 0 !important; background: transparent !important; overflow: visible !important; }\n            html, body { overflow: visible !important; height: auto !important; width: 210mm !important; margin: 0 !important; padding: 0 !important; }\n            #po-preview { width: 100% !important; margin: 0 !important; padding: 0 !important; }\n            .no-print { display: none !important; }\n            .print-a4 { box-shadow: none !important; margin: 0 !important; padding: 0 !important; }\n            .page-break { page-break-after: always; }\n          }\n          .print-a4 { max-width: 210mm; margin: 18px auto; background: white; font-family: 'Helvetica','Arial',sans-serif; line-height: 1.35; color: #000; font-size: 12px; }\n          .company-header { border-bottom: 2px solid #2c5282; padding-bottom: 10px; margin-bottom: 15px; }\n          .po-title { background: #2c5282; color: white; padding: 8px 15px; font-weight: bold; font-size: 16px; text-align: center; border-radius: 4px; margin: 10px 0; }\n          .section-title { font-size: 13px; font-weight: bold; padding-bottom: 4px; margin-bottom: 8px; border-bottom: 1px solid #ccc; text-transform: uppercase; color: #2c5282; }\n          .table { width: 100%; border-collapse: collapse; margin: 10px 0; }\n          .table th { background: #f0f4f8; border: 1px solid #ccc; padding: 6px 8px; font-size: 11px; font-weight: bold; text-align: left; }\n          .table td { border: 1px solid #ccc; padding: 6px 8px; font-size: 11px; vertical-align: top; }\n          .table-footer td { font-weight: bold; background: #f8f9fa; }\n          .signature-area { margin-top: 40px; border-top: 1px dashed #ccc; padding-top: 15px; }\n          .terms-box { border: 1px solid #ccc; padding: 10px; margin: 10px 0; background: #f9f9f9; font-size: 11px; }\n          .amount-in-words { padding: 8px; background: #f0f4f8; border: 1px solid #ccc; margin: 10px 0; font-style: italic; }\n          .footer { margin-top: 30px; font-size: 10px; text-align: center; color: #666; }\n        "}),(0,l.jsxs)("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center no-print",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Print Purchase Order"}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsxs)("button",{onClick:()=>window.print(),className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,l.jsx)(a.a4x,{className:"mr-2",size:16})," Print / Save PDF"]}),(0,l.jsx)("button",{onClick:c,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Close"})]})]}),(0,l.jsxs)("div",{className:"print-a4 p-10",id:"po-preview",children:[(0,l.jsx)("div",{className:"company-header",children:(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xl font-bold",children:"THORAT VALVES PVT. LTD."}),(0,l.jsx)("div",{className:"text-sm",children:"607, Shaniwar Peth, Satara - 415002"}),(0,l.jsx)("div",{className:"text-sm",children:"Phone: +91-2162-270262 \u2022 Email: thoratvalves@gmail.com"}),(0,l.jsx)("div",{className:"text-sm",children:"GSTIN: 27AAACT0000Z1Z5"})]}),(0,l.jsxs)("div",{className:"text-right",children:[(0,l.jsxs)("div",{className:"text-sm",children:["PO Reference: ",(null===s||void 0===s?void 0:s.poNumber)||`PO${(new Date).getFullYear()}${String((new Date).getMonth()+1).padStart(2,"0")}${String((new Date).getDate()).padStart(2,"0")}`]}),(0,l.jsxs)("div",{className:"text-sm",children:["Date: ",v(null===s||void 0===s?void 0:s.createdAt)||v(new Date)]})]})]})}),(0,l.jsx)("div",{className:"po-title",children:"PURCHASE ORDER"}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-6",children:[(0,l.jsx)("div",{children:(0,l.jsx)("table",{className:"details-table",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold pr-4",children:"PO Number:"}),(0,l.jsx)("td",{children:(null===s||void 0===s?void 0:s.poNumber)||"-"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold",children:"PO Date:"}),(0,l.jsx)("td",{children:(new Date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold",children:"Operation(s):"}),(0,l.jsx)("td",{children:j||"Not Specified"})]})]})})}),(0,l.jsx)("div",{children:(0,l.jsx)("table",{className:"details-table",children:(0,l.jsxs)("tbody",{children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold pr-4",children:"Delivery By:"}),(0,l.jsx)("td",{children:v(null===s||void 0===s?void 0:s.deliveryDate)||"TBD"})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold",children:"Payment Terms:"}),(0,l.jsxs)("td",{children:[(null===s||void 0===s?void 0:s.paymentTerms)||"-"," Days"]})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"font-bold",children:"State of Supply:"}),(0,l.jsx)("td",{children:(null===s||void 0===s?void 0:s.stateOfSupply)||"-"})]})]})})})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"section-title",children:"VENDOR DETAILS"}),m?(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold",children:m.name}),(0,l.jsx)("div",{className:"whitespace-pre-line",children:m.address||"Address not specified"}),(0,l.jsxs)("div",{children:["GSTIN: ",m.gstin||"Not provided"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Contact:"})," ",m.contactPerson||"Not specified"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Phone:"})," ",m.phone||"Not provided"]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("span",{className:"font-bold",children:"Email:"})," ",m.email||"Not provided"]})]})]}):(0,l.jsx)("div",{children:"Vendor details not available"})]}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"section-title",children:"ITEMS / SERVICES"}),(0,l.jsxs)("table",{className:"table",children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{style:{width:"5%"},children:"Sr No."}),(0,l.jsx)("th",{style:{width:"35%"},children:"Description"}),(0,l.jsx)("th",{style:{width:"10%"},children:"Operation"}),(0,l.jsx)("th",{style:{width:"8%"},children:"Qty"}),(0,l.jsx)("th",{style:{width:"8%"},children:"Unit"}),(0,l.jsx)("th",{style:{width:"12%"},children:"Rate (\u20b9)"}),(0,l.jsx)("th",{style:{width:"14%"},children:"Amount (\u20b9)"})]})}),(0,l.jsx)("tbody",{children:((null===s||void 0===s?void 0:s.items)||[]).map((e,s)=>{var t;return(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{className:"text-center",children:s+1}),(0,l.jsxs)("td",{children:[(0,l.jsx)("div",{className:"font-medium",children:e.description}),e.specifications&&(0,l.jsx)("div",{className:"text-xs mt-1 text-gray-600",children:e.specifications})]}),(0,l.jsx)("td",{children:e.operation?(null===(t=d.find(s=>s.value===e.operation))||void 0===t?void 0:t.label)||e.operation:"-"}),(0,l.jsx)("td",{className:"text-center",children:e.quantity}),(0,l.jsx)("td",{className:"text-center",children:e.unit}),(0,l.jsx)("td",{className:"text-right",children:p(parseFloat(e.unitPrice||0))}),(0,l.jsx)("td",{className:"text-right",children:p(parseFloat(e.amount||0))})]},s)})}),(0,l.jsxs)("tfoot",{className:"table-footer",children:[(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Subtotal:"}),(0,l.jsx)("td",{colSpan:"2",className:"text-right",children:p(parseFloat((null===s||void 0===s?void 0:s.totalAmount)||0))})]}),parseFloat(null===s||void 0===s?void 0:s.discountAmount)>0&&(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Discount:"}),(0,l.jsxs)("td",{colSpan:"2",className:"text-right",children:["-",p(parseFloat((null===s||void 0===s?void 0:s.discountAmount)||0))]})]}),parseFloat(null===s||void 0===s?void 0:s.taxAmount)>0&&(0,l.jsxs)("tr",{children:[(0,l.jsxs)("td",{colSpan:"5",className:"text-right font-bold",children:["GST (",null===s||void 0===s?void 0:s.taxRate,"%):"]}),(0,l.jsx)("td",{colSpan:"2",className:"text-right",children:p(parseFloat((null===s||void 0===s?void 0:s.taxAmount)||0))})]}),(null===s||void 0===s?void 0:s.roundOffEnabled)&&(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"Round Off:"}),(0,l.jsx)("td",{colSpan:"2",className:"text-right",children:p(parseFloat((null===s||void 0===s?void 0:s.roundOffValue)||0))})]}),(0,l.jsxs)("tr",{children:[(0,l.jsx)("td",{colSpan:"5",className:"text-right font-bold",children:"TOTAL (\u20b9):"}),(0,l.jsx)("td",{colSpan:"2",className:"text-right font-bold",children:p(parseFloat((null===s||void 0===s?void 0:s.finalAmount)||0))})]})]})]})]}),(0,l.jsxs)("div",{className:"amount-in-words",children:[(0,l.jsx)("span",{className:"font-bold",children:"Amount in Words: "}),g," Only"]}),(null===s||void 0===s?void 0:s.terms)&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"section-title",children:"TERMS AND CONDITIONS"}),(0,l.jsx)("div",{className:"terms-box",children:(0,l.jsx)("div",{className:"whitespace-pre-line",children:s.terms})})]}),(null===s||void 0===s?void 0:s.description)&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("div",{className:"section-title",children:"SPECIAL INSTRUCTIONS / WORK DESCRIPTION"}),(0,l.jsx)("div",{className:"p-3 border border-gray-300",children:s.description})]}),(0,l.jsx)("div",{className:"signature-area",children:(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold mb-2",children:"For THORAT VALVES PVT. LTD."}),(0,l.jsx)("div",{className:"h-16 border-b border-gray-400"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:"Authorized Signatory"}),(0,l.jsx)("div",{className:"text-sm",children:"Prepared By: (D.R. Naik)"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"font-bold mb-2",children:"VENDOR ACCEPTANCE"}),(0,l.jsx)("div",{className:"h-16 border-b border-gray-400"}),(0,l.jsx)("div",{className:"text-sm mt-1",children:"Authorized Signatory"}),(0,l.jsx)("div",{className:"text-sm",children:"Date: __________________________"}),(0,l.jsx)("div",{className:"text-sm",children:"Company Seal"})]})]})}),(0,l.jsxs)("div",{className:"footer",children:[(0,l.jsx)("div",{children:"This is a computer generated document and does not require a physical signature"}),(0,l.jsx)("div",{children:"Page 1 of 1"})]})]})]})})}},8739:(e,s,t)=>{t.r(s),t.d(s,{default:()=>f});var i=t(5043),a=t(3216),n=t(5475),r=t(5772),l=t(8729),d=t(579);function o(){const{logout:e,vendorProfile:s}=(0,l.A)(),[t,a]=i.useState(!1),o=e=>{let{isActive:s}=e;return"flex items-center px-4 py-3 rounded-lg transition-all duration-200 "+(s?"bg-indigo-50 text-indigo-700":"text-gray-700 hover:bg-gray-100")};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("button",{className:"md:hidden fixed top-3 left-3 z-40 inline-flex items-center justify-center w-10 h-10 rounded-lg bg-white shadow border border-gray-200",onClick:()=>a(!0),"aria-label":"Open menu",children:(0,d.jsx)(r.ND1,{})}),(0,d.jsxs)("aside",{className:"w-64 hidden md:block bg-white border-r border-gray-200 min-h-screen p-4",children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Signed in as"}),(0,d.jsx)("div",{className:"font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"Vendor"})]}),(0,d.jsxs)("nav",{className:"space-y-2",children:[(0,d.jsxs)(n.k2,{to:"/vendor",className:o,end:!0,children:[(0,d.jsx)(r.V5Y,{className:"mr-3"})," Dashboard"]}),(0,d.jsxs)(n.k2,{to:"/vendor/pos",className:o,children:[(0,d.jsx)(r.jH2,{className:"mr-3"})," Purchase Orders"]}),(0,d.jsxs)(n.k2,{to:"/vendor/delivery-challans",className:o,children:[(0,d.jsx)(r.BLY,{className:"mr-3"})," Delivery Challans"]}),(0,d.jsxs)(n.k2,{to:"/vendor/ongoing-work",className:o,children:[(0,d.jsx)(r.z1n,{className:"mr-3"})," Ongoing Work"]})]}),(0,d.jsxs)("button",{onClick:e,className:"mt-6 inline-flex items-center px-4 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,d.jsx)(r.QeK,{className:"mr-2"})," Logout"]})]}),t&&(0,d.jsx)("div",{className:"md:hidden fixed inset-0 z-50 bg-black/40",onClick:()=>a(!1),children:(0,d.jsxs)("div",{className:"absolute left-0 top-0 bottom-0 w-72 bg-white border-r border-gray-200 p-4",onClick:e=>e.stopPropagation(),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs text-gray-500",children:"Signed in as"}),(0,d.jsx)("div",{className:"font-semibold text-gray-900",children:(null===s||void 0===s?void 0:s.name)||"Vendor"})]}),(0,d.jsx)("button",{className:"p-2 rounded hover:bg-gray-100",onClick:()=>a(!1),"aria-label":"Close menu",children:(0,d.jsx)(r.yGN,{})})]}),(0,d.jsxs)("nav",{className:"space-y-2",children:[(0,d.jsxs)(n.k2,{to:"/vendor",className:o,end:!0,onClick:()=>a(!1),children:[(0,d.jsx)(r.V5Y,{className:"mr-3"})," Dashboard"]}),(0,d.jsxs)(n.k2,{to:"/vendor/pos",className:o,onClick:()=>a(!1),children:[(0,d.jsx)(r.jH2,{className:"mr-3"})," Purchase Orders"]}),(0,d.jsxs)(n.k2,{to:"/vendor/delivery-challans",className:o,onClick:()=>a(!1),children:[(0,d.jsx)(r.BLY,{className:"mr-3"})," Delivery Challans"]}),(0,d.jsxs)(n.k2,{to:"/vendor/ongoing-work",className:o,onClick:()=>a(!1),children:[(0,d.jsx)(r.z1n,{className:"mr-3"})," Ongoing Work"]})]}),(0,d.jsxs)("button",{onClick:e,className:"mt-6 inline-flex items-center px-4 py-2 text-sm text-gray-600 hover:text-gray-900",children:[(0,d.jsx)(r.QeK,{className:"mr-2"})," Logout"]})]})})]})}var c=t(5472),x=t(791);function m(){const{vendorProfile:e}=(0,l.A)(),[s,t]=(0,i.useState)({pos:0,dcs:0,ongoing:0});return(0,i.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.id)return;const[s,i,a]=await Promise.all([(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"purchaseOrders"),(0,c._M)("vendorId","==",e.id))),(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"deliveryChallans"),(0,c._M)("vendorId","==",e.id))),(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"jobAssignments"),(0,c._M)("vendorId","==",e.id)))]);t({pos:s.size,dcs:i.size,ongoing:a.size})})()},[e]),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 via-blue-600 to-purple-600 p-6 rounded-2xl shadow-sm text-white",children:[(0,d.jsxs)("h1",{className:"text-2xl font-bold",children:["Welcome, ",(null===e||void 0===e?void 0:e.name)||"Vendor"]}),(0,d.jsx)("p",{className:"text-blue-100",children:"Here is a quick overview of your current activity."})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,d.jsx)(h,{icon:(0,d.jsx)(r.jH2,{className:"text-indigo-600"}),title:"Purchase Orders",value:s.pos,to:"/vendor/pos"}),(0,d.jsx)(h,{icon:(0,d.jsx)(r.BLY,{className:"text-purple-600"}),title:"Delivery Challans",value:s.dcs,to:"/vendor/delivery-challans"}),(0,d.jsx)(h,{icon:(0,d.jsx)(r.z1n,{className:"text-emerald-600"}),title:"Ongoing Work",value:s.ongoing,to:"/vendor/ongoing-work"})]}),(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl border border-gray-200",children:[(0,d.jsx)("div",{className:"flex items-center justify-between",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"}),(0,d.jsx)("div",{className:"text-gray-600 text-sm",children:"Jump directly to your work areas"})]})}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-4",children:[(0,d.jsx)(p,{to:"/vendor/pos",label:"View Purchase Orders"}),(0,d.jsx)(p,{to:"/vendor/delivery-challans",label:"View Delivery Challans"}),(0,d.jsx)(p,{to:"/vendor/ongoing-work",label:"Update Ongoing Work"})]})]})]})}function h(e){let{icon:s,title:t,value:i,to:a}=e;return(0,d.jsxs)(n.N_,{to:a,className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center justify-between hover:shadow-md transition-shadow",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"w-12 h-12 bg-gray-50 rounded-xl flex items-center justify-center mr-4",children:s}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:t}),(0,d.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:i})]})]}),(0,d.jsx)(r.dyV,{className:"text-gray-400"})]})}function p(e){let{to:s,label:t}=e;return(0,d.jsxs)(n.N_,{to:s,className:"group border border-gray-200 rounded-xl p-4 flex items-center justify-between hover:bg-gray-50",children:[(0,d.jsx)("div",{className:"text-gray-800 font-medium",children:t}),(0,d.jsx)(r.dyV,{className:"text-gray-400 group-hover:text-gray-600"})]})}var u=t(1847);function g(){const{vendorProfile:e}=(0,l.A)(),[s,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[o,m]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[g,j]=(0,i.useState)(""),[v,b]=(0,i.useState)("all");(0,i.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.id)return;n(!0);const s=(await(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"purchaseOrders"),(0,c._M)("vendorId","==",e.id)))).docs.map(e=>({id:e.id,...e.data()}));t(s),n(!1)})()},[e]);const N=()=>{p(null),m(!1)};if(a)return(0,d.jsx)("div",{className:"p-6",children:"Loading..."});const f=s.filter(e=>{const s=`${e.poNumber||""} ${e.description||""}`.toLowerCase().includes(g.toLowerCase()),t="all"===v||String(e.status||"pending")===v;return s&&t});return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,d.jsx)(r.jH2,{className:"text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Read-only list of your purchase orders"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(r.CKj,{className:"absolute left-3 top-3 text-gray-400"}),(0,d.jsx)("input",{value:g,onChange:e=>j(e.target.value),placeholder:"Search PO No / Description",className:"pl-9 pr-3 py-2 border rounded-lg text-sm"})]}),(0,d.jsxs)("select",{value:v,onChange:e=>b(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[(0,d.jsx)("option",{value:"all",children:"All"}),(0,d.jsx)("option",{value:"pending",children:"Pending"}),(0,d.jsx)("option",{value:"approved",children:"Approved"}),(0,d.jsx)("option",{value:"completed",children:"Completed"}),(0,d.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:f.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.poNumber||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.description||"-"}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["\u20b9",parseFloat(e.finalAmount||e.totalAmount||0).toLocaleString()]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.status||"pending"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsx)("button",{onClick:()=>(e=>{p(e),m(!0)})(e),className:"text-gray-600 hover:text-gray-900",title:"Preview / Print",children:(0,d.jsx)(r.Vap,{size:16})})})]},e.id))})]})})}),o&&h&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-6xl rounded-xl overflow-hidden shadow-2xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,d.jsxs)("div",{className:"font-semibold",children:["PO Preview - ",h.poNumber||""]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("button",{onClick:()=>window.print(),className:"inline-flex items-center px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700",children:[(0,d.jsx)(r.Mvz,{className:"mr-2"})," Print / Save PDF"]}),(0,d.jsxs)("button",{onClick:N,className:"inline-flex items-center px-3 py-1.5 border rounded-lg text-sm",children:[(0,d.jsx)(r.yGN,{className:"mr-1"})," Close"]})]})]}),(0,d.jsx)("div",{className:"p-4 max-h-[80vh] overflow-auto",children:(0,d.jsx)(u.A,{poData:h,vendorId:null===e||void 0===e?void 0:e.id,vendor:e,onClose:N,autoPrint:!1})})]})})]})}function j(e){let{challan:s,autoPrint:t=!1}=e;const a=(0,i.useRef)(null);(0,i.useEffect)(()=>{if(t){const e=setTimeout(()=>window.print(),150);return()=>clearTimeout(e)}},[t]);const n=((null===s||void 0===s?void 0:s.items)||[]).reduce((e,s)=>e+(parseInt(s.quantity)||0),0);return(0,d.jsxs)("div",{ref:a,className:"print-a4",children:[(0,d.jsx)("style",{children:"\n        @page { size: A4 portrait; margin: 12mm; }\n        .print-a4 { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #1f2937; }\n        .dc-header { display: flex; justify-content: space-between; margin-bottom: 16px; padding-bottom: 10px; border-bottom: 2px solid #1e40af; }\n        .company-name { font-size: 22px; font-weight: 800; color: #1e40af; }\n        .company-details { font-size: 12px; line-height: 1.4; }\n        .document-title { text-align: center; font-size: 18px; font-weight: 700; margin: 16px 0; padding: 6px; background: #f3f4f6; border: 1px solid #6b7280; }\n        .grid-2 { display: grid; grid-template-columns: 2fr 1fr; gap: 14px; margin-bottom: 14px; }\n        .card { border: 1px solid #6b7280; border-radius: 4px; padding: 10px; }\n        .card h4 { margin: 0 0 6px 0; font-weight: 700; color: #1e40af; border-bottom: 1px solid #e5e7eb; padding-bottom: 4px; }\n        table { width: 100%; border-collapse: collapse; font-size: 12px; }\n        th { background: #1e40af; color: #fff; text-align: left; padding: 8px; border: 1px solid #374151; }\n        td { padding: 8px; border: 1px solid #374151; }\n        tr:nth-child(even) td { background: #f9fafb; }\n        .summary { display: grid; grid-template-columns: 2fr 1fr; gap: 14px; margin-top: 10px; }\n        .amount-row { display: flex; justify-content: space-between; margin-bottom: 6px; }\n        .amount-row.total { font-weight: 700; border-top: 1px solid #6b7280; padding-top: 6px; }\n        .sign { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; margin-top: 28px; }\n        .sign .box { border-top: 1px solid #6b7280; text-align: center; padding-top: 10px; }\n        .footer { text-align: center; font-size: 11px; color: #6b7280; margin-top: 18px; }\n        @media print { .print-a4 { -webkit-print-color-adjust: exact; print-color-adjust: exact; } }\n      "}),(0,d.jsxs)("div",{className:"dc-header",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"company-name",children:"THORAT FLOW CONTROLS PVT. LTD."}),(0,d.jsxs)("div",{className:"company-details",children:["M. No-1373, Sawantpur Vasahat, Palus, Dist. Sangli, Pin Code-416310",(0,d.jsx)("br",{}),"Email: valves@thoratflowcontrols.com",(0,d.jsx)("br",{}),"GSTIN: 27AACCT1867N1Z5 | State: 27-Maharashtra"]})]}),(0,d.jsxs)("div",{style:{textAlign:"right"},children:[(0,d.jsx)("div",{style:{fontSize:16,fontWeight:700,marginBottom:8},children:"Delivery Challan"}),(0,d.jsxs)("div",{style:{fontSize:12},children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Challan No:"})," ",(null===s||void 0===s?void 0:s.challanNumber)||"N/A"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",(null===s||void 0===s?void 0:s.date)||(new Date).toLocaleDateString()]})]})]})]}),(0,d.jsx)("div",{className:"document-title",children:"DELIVERY CHALLAN"}),(0,d.jsxs)("div",{className:"grid-2",children:[(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h4",{children:"DELIVER TO"}),(0,d.jsx)("div",{style:{fontWeight:600},children:(null===s||void 0===s?void 0:s.vendorName)||"KADAM BROTHERS"}),(0,d.jsx)("div",{children:(null===s||void 0===s?void 0:s.vendorAddress)||"INDUSTRIAL ESTATE, PALUS"}),null!==s&&void 0!==s&&s.vendorGstin?(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"GSTIN:"})," ",s.vendorGstin]}):null]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h4",{children:"CHALLAN DETAILS"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Challan No:"})," ",(null===s||void 0===s?void 0:s.challanNumber)||"N/A"]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Date:"})," ",(null===s||void 0===s?void 0:s.date)||(new Date).toLocaleDateString()]}),null!==s&&void 0!==s&&s.poNumber?(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"PO Number:"})," ",s.poNumber]}):null,null!==s&&void 0!==s&&s.transportDetails?(0,d.jsxs)("div",{children:[(0,d.jsx)("strong",{children:"Transport:"})," ",s.transportDetails]}):null]})]}),(0,d.jsxs)("table",{children:[(0,d.jsx)("thead",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{width:"5%"},children:"#"}),(0,d.jsx)("th",{style:{width:"35%"},children:"Item Description"}),(0,d.jsx)("th",{style:{width:"10%"},children:"HSN/SAC"}),(0,d.jsx)("th",{style:{width:"10%"},children:"Quantity"}),(0,d.jsx)("th",{style:{width:"10%"},children:"Unit"}),(0,d.jsx)("th",{style:{width:"15%"},children:"Rate (\u20b9)"}),(0,d.jsx)("th",{style:{width:"15%"},children:"Amount (\u20b9)"})]})}),(0,d.jsx)("tbody",{children:((null===s||void 0===s?void 0:s.items)||[]).map((e,s)=>(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{children:s+1}),(0,d.jsx)("td",{children:e.description||""}),(0,d.jsx)("td",{children:e.hsnCode||""}),(0,d.jsx)("td",{children:e.quantity||""}),(0,d.jsx)("td",{children:e.unit||"Nos"}),(0,d.jsx)("td",{style:{textAlign:"right"},children:e.price?Number(e.price).toFixed(2):"0.00"}),(0,d.jsx)("td",{style:{textAlign:"right"},children:e.amount?Number(e.amount).toFixed(2):"0.00"})]},s))}),(0,d.jsx)("tfoot",{children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("td",{colSpan:3,style:{textAlign:"right",fontWeight:700,padding:8},children:"Total"}),(0,d.jsx)("td",{style:{fontWeight:700,padding:8},children:n}),(0,d.jsx)("td",{}),(0,d.jsx)("td",{}),(0,d.jsx)("td",{style:{textAlign:"right",fontWeight:700,padding:8},children:null!==s&&void 0!==s&&s.totalAmount?Number(s.totalAmount).toFixed(2):"0.00"})]})})]}),(0,d.jsxs)("div",{className:"summary",children:[(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h4",{children:"TERMS & CONDITIONS"}),(0,d.jsx)("div",{children:"1. Goods once sold will not be taken back."}),(0,d.jsx)("div",{children:"2. Interest @ 18% p.a. will be charged if the payment is not made within 30 days."}),(0,d.jsx)("div",{children:"3. Subject to Sangli Jurisdiction."}),(0,d.jsxs)("div",{style:{marginTop:8},children:[(0,d.jsx)("strong",{children:"Amount in words:"})," ",(null===s||void 0===s?void 0:s.amountInWords)||"Zero"]})]}),(0,d.jsxs)("div",{className:"card",children:[(0,d.jsx)("h4",{children:"TOTAL SUMMARY"}),(0,d.jsxs)("div",{className:"amount-row",children:[(0,d.jsx)("span",{children:"Taxable Amount:"}),(0,d.jsxs)("span",{children:["\u20b9 ",null!==s&&void 0!==s&&s.taxableAmount?Number(s.taxableAmount).toFixed(2):"0.00"]})]}),null!==s&&void 0!==s&&s.cgstRate?(0,d.jsxs)("div",{className:"amount-row",children:[(0,d.jsxs)("span",{children:["CGST @ ",s.cgstRate,"%:"]}),(0,d.jsxs)("span",{children:["\u20b9 ",null!==s&&void 0!==s&&s.cgstAmount?Number(s.cgstAmount).toFixed(2):"0.00"]})]}):null,null!==s&&void 0!==s&&s.sgstRate?(0,d.jsxs)("div",{className:"amount-row",children:[(0,d.jsxs)("span",{children:["SGST @ ",s.sgstRate,"%:"]}),(0,d.jsxs)("span",{children:["\u20b9 ",null!==s&&void 0!==s&&s.sgstAmount?Number(s.sgstAmount).toFixed(2):"0.00"]})]}):null,null!==s&&void 0!==s&&s.igstRate?(0,d.jsxs)("div",{className:"amount-row",children:[(0,d.jsxs)("span",{children:["IGST @ ",s.igstRate,"%:"]}),(0,d.jsxs)("span",{children:["\u20b9 ",null!==s&&void 0!==s&&s.igstAmount?Number(s.igstAmount).toFixed(2):"0.00"]})]}):null,(0,d.jsxs)("div",{className:"amount-row total",children:[(0,d.jsx)("span",{children:"Total Amount:"}),(0,d.jsxs)("span",{children:["\u20b9 ",null!==s&&void 0!==s&&s.totalAmount?Number(s.totalAmount).toFixed(2):"0.00"]})]})]})]}),(0,d.jsxs)("div",{className:"sign",children:[(0,d.jsxs)("div",{className:"box",children:[(0,d.jsx)("div",{style:{fontWeight:700,marginBottom:24},children:"RECEIVER'S SIGNATURE"}),(0,d.jsx)("div",{children:"Name: _________________________"}),(0,d.jsx)("div",{children:"Date: _________________________"}),(0,d.jsx)("div",{children:"Stamp: _________________________"})]}),(0,d.jsxs)("div",{className:"box",children:[(0,d.jsx)("div",{style:{fontWeight:700,marginBottom:24},children:"AUTHORIZED SIGNATORY"}),(0,d.jsx)("div",{children:"For THORAT FLOW CONTROLS PVT. LTD."}),(0,d.jsx)("div",{className:"mt-3",children:"Name: _________________________"}),(0,d.jsx)("div",{children:"Date: _________________________"})]})]}),(0,d.jsx)("div",{className:"footer",children:"This is a computer generated document. No signature is required."})]})}function v(){const{vendorProfile:e}=(0,l.A)(),[s,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[o,m]=(0,i.useState)(""),[h,p]=(0,i.useState)(!1),[u,g]=(0,i.useState)(null);if((0,i.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.id)return;n(!0);const s=(await(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"deliveryChallans"),(0,c._M)("vendorId","==",e.id)))).docs.map(e=>({id:e.id,...e.data()}));t(s),n(!1)})()},[e]),a)return(0,d.jsx)("div",{className:"p-6",children:"Loading..."});const v=s.filter(e=>`${e.challanNumber||""} ${e.poNumber||""} ${e.vendorName||""}`.toLowerCase().includes(o.toLowerCase()));return(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,d.jsx)(r.BLY,{className:"text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Delivery Challans"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Read-only list of your delivery challans"})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(r.CKj,{className:"absolute left-3 top-3 text-gray-400"}),(0,d.jsx)("input",{value:o,onChange:e=>m(e.target.value),placeholder:"Search Challan/PO/Vendor",className:"pl-9 pr-3 py-2 border rounded-lg text-sm"})]})]}),(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Challan No"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Number"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Qty"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Amount"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(e=>(0,d.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.challanNumber||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.date||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.poNumber||"-"}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.totalQuantity||0}),(0,d.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["\u20b9",parseFloat(e.totalAmount||0).toLocaleString()]}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,d.jsx)("button",{onClick:()=>(e=>{g(e),p(!0)})(e),className:"text-gray-600 hover:text-gray-900",title:"Preview / Print",children:(0,d.jsx)(r.Mvz,{size:16})})})]},e.id))})]})})}),h&&u&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,d.jsxs)("div",{className:"bg-white w-full max-w-6xl rounded-xl overflow-hidden shadow-2xl",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,d.jsxs)("div",{className:"font-semibold",children:["Delivery Challan - ",u.challanNumber||""]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)("button",{onClick:()=>window.print(),className:"inline-flex items-center px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm hover:bg-indigo-700",children:[(0,d.jsx)(r.Mvz,{className:"mr-2"})," Print / Save PDF"]}),(0,d.jsxs)("button",{onClick:()=>{g(null),p(!1)},className:"inline-flex items-center px-3 py-1.5 border rounded-lg text-sm",children:[(0,d.jsx)(r.yGN,{className:"mr-1"})," Close"]})]})]}),(0,d.jsx)("div",{className:"p-4 max-h-[80vh] overflow-auto",children:(0,d.jsx)(j,{challan:u,autoPrint:!1})})]})})]})}const b=["not_started","in_progress","blocked","pending_review","completed"];function N(){const{vendorProfile:e}=(0,l.A)(),[s,t]=(0,i.useState)([]),[a,n]=(0,i.useState)(!0),[o,m]=(0,i.useState)(null),[h,p]=(0,i.useState)("all"),[u,g]=(0,i.useState)(""),j=(0,i.useMemo)(()=>{const e="all"===h?s:s.filter(e=>(e.status||"not_started")===h);if(!u.trim())return e;const t=u.toLowerCase();return e.filter(e=>`${e.title||e.name||e.reference||""} ${e.poNumber||""}`.toLowerCase().includes(t))},[s,h,u]);(0,i.useEffect)(()=>{(async()=>{if(null===e||void 0===e||!e.id)return;n(!0);const s=(await(0,c.GG)((0,c.P)((0,c.rJ)(x.db,"jobAssignments"),(0,c._M)("vendorId","==",e.id)))).docs.map(e=>({id:e.id,...e.data(),_dirty:!1}));t(s),n(!1)})()},[e]);const v=(e,s)=>{t(t=>t.map(t=>t.id===e?{...t,...s,_dirty:!0}:t))};return a?(0,d.jsx)("div",{className:"p-6",children:"Loading..."}):(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,d.jsx)(r.z1n,{className:"text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Ongoing Work"}),(0,d.jsx)("p",{className:"text-gray-600",children:"Update the status and progress of your assigned jobs"})]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(r.CKj,{className:"absolute left-3 top-3 text-gray-400"}),(0,d.jsx)("input",{value:u,onChange:e=>g(e.target.value),placeholder:"Search job / PO number",className:"pl-9 pr-3 py-2 border rounded-lg text-sm"})]}),(0,d.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[(0,d.jsx)("option",{value:"all",children:"All"}),b.map(e=>(0,d.jsx)("option",{value:e,children:e.replace("_"," ")},e))]})]})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[0===j.length&&(0,d.jsxs)("div",{className:"bg-white p-10 rounded-xl border border-gray-200 text-center",children:[(0,d.jsx)("div",{className:"text-gray-800 font-medium mb-1",children:"No jobs found"}),(0,d.jsx)("div",{className:"text-gray-600 text-sm",children:"Try adjusting filters or search terms."})]}),j.map(e=>{var s,i,a,n,l,h;return(0,d.jsxs)("div",{className:`bg-white p-5 rounded-xl border ${e._dirty?"border-indigo-300":"border-gray-200"} shadow-sm`,children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-gray-500",children:"Job"}),(0,d.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:e.title||e.name||e.reference||"Job"}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 mt-1",children:["PO: ",e.poNumber||e.poId||"-"," | Due: ",(null===(s=e.dueDate)||void 0===s||null===(i=s.toDate)||void 0===i||null===(a=i.call(s))||void 0===a||null===(n=a.toLocaleDateString)||void 0===n?void 0:n.call(a))||e.dueDate||"-"]})]}),(0,d.jsx)("div",{className:"flex items-center gap-2",children:(0,d.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 text-xs rounded-full \n                  "+("completed"===(e.status||"not_started")?"bg-emerald-100 text-emerald-700":"in_progress"===(e.status||"not_started")?"bg-blue-100 text-blue-700":"blocked"===(e.status||"not_started")?"bg-red-100 text-red-700":"pending_review"===(e.status||"not_started")?"bg-amber-100 text-amber-700":"bg-gray-100 text-gray-700"),children:e.status||"not_started"})})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,d.jsx)("select",{value:e.status||"in_progress",onChange:s=>v(e.id,{status:s.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:b.map(e=>(0,d.jsx)("option",{value:e,children:e.replace("_"," ")},e))})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Progress (%)"}),(0,d.jsx)("input",{type:"number",min:"0",max:"100",value:null!==(l=e.progress)&&void 0!==l?l:0,onChange:s=>v(e.id,{progress:Math.max(0,Math.min(100,Number(s.target.value)))}),className:"w-full px-3 py-2 border rounded-lg"}),(0,d.jsx)("div",{className:"w-full bg-gray-100 rounded-full h-2 mt-2",children:(0,d.jsx)("div",{className:"h-2 rounded-full bg-indigo-600",style:{width:`${Math.max(0,Math.min(100,Number(null!==(h=e.progress)&&void 0!==h?h:0)))}%`}})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,d.jsx)("input",{type:"text",value:e.vendorNotes||"",onChange:s=>v(e.id,{vendorNotes:s.target.value}),className:"w-full px-3 py-2 border rounded-lg",placeholder:"Add any blockers or updates"})]})]}),(0,d.jsx)("div",{className:"flex items-center justify-end mt-4",children:(0,d.jsxs)("button",{onClick:()=>(async e=>{try{m(e.id);const s=(0,c.H9)(x.db,"jobAssignments",e.id),i={status:e.status||"in_progress",progress:Number(e.progress||0),vendorNotes:e.vendorNotes||"",vendorUpdatedAt:(0,c.O5)()};await(0,c.mZ)(s,i),t(s=>s.map(s=>s.id===e.id?{...s,...i,_dirty:!1}:s))}catch(s){console.error("Failed to update job",s),alert("Failed to update work status.")}finally{m(null)}})(e),disabled:o===e.id||!e._dirty,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg disabled:opacity-60",children:[(0,d.jsx)(r.Bc_,{className:"mr-2"}),o===e.id?"Saving...":"Save Update"]})})]},e.id)})]})]})}function f(){return(0,d.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(o,{}),(0,d.jsx)("main",{className:"flex-1 p-4 md:p-6",children:(0,d.jsxs)(a.BV,{children:[(0,d.jsx)(a.qh,{path:"",element:(0,d.jsx)(m,{})}),(0,d.jsx)(a.qh,{path:"pos",element:(0,d.jsx)(g,{})}),(0,d.jsx)(a.qh,{path:"delivery-challans",element:(0,d.jsx)(v,{})}),(0,d.jsx)(a.qh,{path:"ongoing-work",element:(0,d.jsx)(N,{})}),(0,d.jsx)(a.qh,{path:"*",element:(0,d.jsx)(a.C5,{to:"/vendor",replace:!0})})]})})]})})}}}]);
//# sourceMappingURL=739.47111994.chunk.js.map