"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[1],{1432:(e,t,s)=>{s.d(t,{DP:()=>c,D_:()=>v,OC:()=>p,_d:()=>h,bB:()=>f,hI:()=>x,oX:()=>l,p$:()=>o,zC:()=>g,zy:()=>j});var a=s(5472),r=s(791);const n="vendors",i="vendorActivity";function l(e){var t,s,a,r,n,i;const l=e=>""===e||null===e||void 0===e?null:Number(e);return{name:String(e.name||"").trim(),email:String(e.email||"").trim().toLowerCase(),phone:String(e.phone||"").trim(),address:String(e.address||"").trim(),city:String(e.city||"").trim(),state:String(e.state||"").trim(),zipCode:String(e.zipCode||"").trim(),country:String(e.country||"India").trim(),website:String(e.website||"").trim(),contactPerson:String(e.contactPerson||"").trim(),contactPhone:String(e.contactPhone||"").trim(),contactEmail:String(e.contactEmail||"").trim().toLowerCase(),category:String(e.category||"").trim(),rating:null!==(t=l(e.rating))&&void 0!==t?t:0,gstNumber:String(e.gstNumber||"").trim(),panNumber:String(e.panNumber||"").trim(),bankDetails:{accountNumber:String((null===(s=e.bankDetails)||void 0===s?void 0:s.accountNumber)||"").trim(),ifscCode:String((null===(a=e.bankDetails)||void 0===a?void 0:a.ifscCode)||"").trim(),bankName:String((null===(r=e.bankDetails)||void 0===r?void 0:r.bankName)||"").trim(),accountHolderName:String((null===(n=e.bankDetails)||void 0===n?void 0:n.accountHolderName)||"").trim()},services:Array.isArray(e.services)?e.services.filter(Boolean):[],status:e.status||"active",notes:String(e.notes||"").trim(),establishedYear:l(e.establishedYear),employeeCount:l(e.employeeCount),annualRevenue:l(e.annualRevenue),creditLimit:l(e.creditLimit),preferredPaymentTerms:null!==(i=l(e.preferredPaymentTerms))&&void 0!==i?i:30,taxId:String(e.taxId||"").trim()}}function d(e){var t,s,a,r,n,i,l,d,o;const c=e.data()||{};return{id:e.id,name:c.name||"",email:c.email||"",phone:c.phone||"",address:c.address||"",city:c.city||"",state:c.state||"",zipCode:c.zipCode||"",country:c.country||"India",website:c.website||"",contactPerson:c.contactPerson||"",contactPhone:c.contactPhone||"",contactEmail:c.contactEmail||"",category:c.category||"",rating:"number"===typeof c.rating?c.rating:Number(c.rating||0),gstNumber:c.gstNumber||"",panNumber:c.panNumber||"",bankDetails:{accountNumber:(null===(t=c.bankDetails)||void 0===t?void 0:t.accountNumber)||"",ifscCode:(null===(s=c.bankDetails)||void 0===s?void 0:s.ifscCode)||"",bankName:(null===(a=c.bankDetails)||void 0===a?void 0:a.bankName)||"",accountHolderName:(null===(r=c.bankDetails)||void 0===r?void 0:r.accountHolderName)||""},services:Array.isArray(c.services)?c.services:[],status:c.status||"active",notes:c.notes||"",establishedYear:null!==(n=c.establishedYear)&&void 0!==n?n:"",employeeCount:null!==(i=c.employeeCount)&&void 0!==i?i:"",annualRevenue:null!==(l=c.annualRevenue)&&void 0!==l?l:"",creditLimit:null!==(d=c.creditLimit)&&void 0!==d?d:"",preferredPaymentTerms:null!==(o=c.preferredPaymentTerms)&&void 0!==o?o:30,taxId:c.taxId||"",createdAt:c.createdAt,updatedAt:c.updatedAt}}async function o(){const e=(0,a.P)((0,a.rJ)(r.db,n),(0,a.My)("createdAt","desc"));return(await(0,a.GG)(e)).docs.map(d)}async function c(){return(await(0,a.GG)((0,a.rJ)(r.db,n))).docs.map(d)}async function x(e){const t=await(0,a.x7)((0,a.H9)(r.db,n,e));return t.exists()?d(t):null}async function m(e,t,s){const i=[];if(e){const t=(0,a.P)((0,a.rJ)(r.db,n),(0,a._M)("email","==",e));(await(0,a.GG)(t)).forEach(e=>i.push(e))}if(t){const e=(0,a.P)((0,a.rJ)(r.db,n),(0,a._M)("phone","==",t));(await(0,a.GG)(e)).forEach(e=>i.push(e))}for(const a of i)if(!s||a.id!==s){const r=a.data();if(e&&r.email===e&&(!s||a.id!==s))return{type:"email",id:a.id};if(t&&r.phone===t&&(!s||a.id!==s))return{type:"phone",id:a.id}}return null}async function u(e,t,s){try{await(0,a.gS)((0,a.rJ)(r.db,i),{vendorId:e,action:t,details:s||{},timestamp:(0,a.O5)()})}catch(n){}}async function g(e){const t=l(e),s=await m(t.email,t.phone);if(s){throw new Error("email"===s.type?"DUPLICATE_VENDOR_EMAIL":"DUPLICATE_VENDOR_PHONE")}const i=(0,a.O5)(),d=await(0,a.gS)((0,a.rJ)(r.db,n),{...t,createdAt:i,updatedAt:i});await u(d.id,"create",{name:t.name,email:t.email})}async function h(e,t){const s=l(t),i=await m(s.email,s.phone,e);if(i){throw new Error("email"===i.type?"DUPLICATE_VENDOR_EMAIL":"DUPLICATE_VENDOR_PHONE")}await(0,a.mZ)((0,a.H9)(r.db,n,e),{...s,updatedAt:(0,a.O5)()}),await u(e,"update",{name:s.name,email:s.email})}async function p(e){await(0,a.kd)((0,a.H9)(r.db,n,e)),await u(e,"delete")}async function v(e,t){const s=(0,a.wP)(r.db);e.forEach(e=>{s.update((0,a.H9)(r.db,n,e),{...t,updatedAt:(0,a.O5)()})}),await s.commit();for(const a of e)u(a,"bulk_update",{fields:t})}async function f(e){const t=(0,a.wP)(r.db);e.forEach(e=>t.delete((0,a.H9)(r.db,n,e))),await t.commit();for(const s of e)u(s,"bulk_delete")}async function b(e){const t=(0,a.P)((0,a.rJ)(r.db,"purchaseOrders"),(0,a._M)("vendorId","==",e));return(await(0,a.GG)(t)).docs.map(e=>e.data())}async function y(e){const t=(0,a.P)((0,a.rJ)(r.db,"jobAssignments"),(0,a._M)("vendorId","==",e));return(await(0,a.GG)(t)).docs.map(e=>e.data())}async function j(e){const t={};for(const a of e)try{const[e,s]=await Promise.all([b(a.id),y(a.id)]);t[a.id]={totalPOs:e.length,totalJobs:s.length,totalSpend:e.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0),completedJobs:s.filter(e=>"completed"===e.status).length,pendingPOs:e.filter(e=>"pending"===e.status).length,avgRating:a.rating||0,lastActivity:Math.max(...e.map(e=>{var t,s,a;return(null===(t=e.createdAt)||void 0===t||null===(s=t.toDate)||void 0===s||null===(a=s.call(t))||void 0===a?void 0:a.getTime())||0}),...s.map(e=>{var t,s,a;return(null===(t=e.createdAt)||void 0===t||null===(s=t.toDate)||void 0===s||null===(a=s.call(t))||void 0===a?void 0:a.getTime())||0}))}}catch(s){t[a.id]={totalPOs:0,totalJobs:0,totalSpend:0,completedJobs:0,pendingPOs:0,avgRating:0,lastActivity:0}}return t}},8001:(e,t,s)=>{s.r(t),s.d(t,{default:()=>o});var a=s(5043),r=s(5475),n=s(1432),i=s(3505),l=s(5772),d=s(579);function o(){const[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[c,x]=(0,a.useState)(!0),[m,u]=(0,a.useState)(""),[g,h]=(0,a.useState)("all"),[p,v]=(0,a.useState)("all"),[f,b]=(0,a.useState)("all"),[y,j]=(0,a.useState)("createdAt"),[N,w]=(0,a.useState)("desc"),[S,C]=(0,a.useState)("table"),[k,P]=(0,a.useState)([]),[A,E]=(0,a.useState)(!1),[O,D]=(0,a.useState)({}),{showSuccess:L,showError:z}=(0,i.hN)();(0,a.useEffect)(()=>{_()},[]),(0,a.useEffect)(()=>{I()},[e,m,g,p,f,y,N]);const _=async()=>{try{x(!0);const e=await(0,n.p$)(),s=await(0,n.zy)(e);D(s),t(e)}catch(e){console.error("Error fetching vendors:",e),z("Failed to load vendors")}finally{x(!1)}},I=()=>{let t=e;if(m&&(t=t.filter(e=>{var t,s,a;return e.name.toLowerCase().includes(m.toLowerCase())||e.email.toLowerCase().includes(m.toLowerCase())||(null===(t=e.contactPerson)||void 0===t?void 0:t.toLowerCase().includes(m.toLowerCase()))||(null===(s=e.city)||void 0===s?void 0:s.toLowerCase().includes(m.toLowerCase()))||(null===(a=e.services)||void 0===a?void 0:a.some(e=>e.toLowerCase().includes(m.toLowerCase())))})),"all"!==g&&(t=t.filter(e=>e.status===g)),"all"!==p&&(t=t.filter(e=>e.category===p)),"all"!==f){const e=parseInt(f);t=t.filter(t=>(t.rating||0)>=e)}t.sort((e,t)=>{var s,a,r,n,i,l,d,o,c,x;let m,u;switch(y){case"name":m=e.name.toLowerCase(),u=t.name.toLowerCase();break;case"rating":m=e.rating||0,u=t.rating||0;break;case"totalSpend":m=(null===(s=O[e.id])||void 0===s?void 0:s.totalSpend)||0,u=(null===(a=O[t.id])||void 0===a?void 0:a.totalSpend)||0;break;case"lastActivity":m=(null===(r=O[e.id])||void 0===r?void 0:r.lastActivity)||0,u=(null===(n=O[t.id])||void 0===n?void 0:n.lastActivity)||0;break;default:m=(null===(i=e.createdAt)||void 0===i||null===(l=i.toDate)||void 0===l||null===(d=l.call(i))||void 0===d?void 0:d.getTime())||0,u=(null===(o=t.createdAt)||void 0===o||null===(c=o.toDate)||void 0===c||null===(x=c.call(o))||void 0===x?void 0:x.getTime())||0}return"asc"===N?m>u?1:-1:m<u?1:-1}),o(t)},R=async(e,t)=>{if(window.confirm(`Are you sure you want to delete ${t}? This action cannot be undone.`))try{await(0,n.OC)(e),L("Vendor deleted successfully"),_()}catch(s){console.error("Error deleting vendor:",s),z("Failed to delete vendor")}},T=e=>(0,d.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${{active:"bg-green-100 text-green-800",inactive:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"}[e]||"bg-gray-100 text-gray-800"}`,children:e?e.charAt(0).toUpperCase()+e.slice(1):"Unknown"}),V=e=>{const t=[];for(let s=1;s<=5;s++)t.push((0,d.jsx)(l.usP,{size:14,className:s<=(e||0)?"text-yellow-400 fill-current":"text-gray-300"},s));return(0,d.jsx)("div",{className:"flex",children:t})};return c?(0,d.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,d.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,d.jsx)("div",{className:"p-4 lg:p-6 bg-gray-50 min-h-screen",children:(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,d.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,d.jsx)(l.cfS,{className:"text-white",size:20})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-900",children:"Vendor Management"}),(0,d.jsx)("p",{className:"text-gray-600 text-sm lg:text-base",children:"Manage and monitor your vendor relationships"})]})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center space-y-3 sm:space-y-0 mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,d.jsxs)("button",{onClick:_,className:"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,d.jsx)(l.jTZ,{size:16,className:"text-gray-600"}),(0,d.jsx)("span",{className:"text-gray-700",children:"Refresh"})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600 bg-white px-3 py-2 rounded-lg border border-gray-200",children:["Showing ",s.length," of ",e.length," vendors"]})]}),(0,d.jsxs)(r.N_,{to:"/admin/add-vendor",className:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 flex items-center space-x-2 shadow-sm transition-all",children:[(0,d.jsx)(l.GGD,{size:16}),(0,d.jsx)("span",{children:"Add Vendor"})]})]}),(0,d.jsxs)("div",{className:"bg-white p-4 lg:p-6 rounded-xl shadow-sm border border-gray-200 mb-6",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,d.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,d.jsx)(l.K7R,{className:"text-white",size:16})}),(0,d.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Search & Filter"})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-4",children:[(0,d.jsxs)("div",{className:"relative md:col-span-2",children:[(0,d.jsx)(l.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,d.jsx)("input",{type:"text",placeholder:"Search vendors by name, email, contact, city, or services...",value:m,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all"})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.K7R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,d.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none transition-all",children:[(0,d.jsx)("option",{value:"all",children:"All Status"}),(0,d.jsx)("option",{value:"active",children:"Active"}),(0,d.jsx)("option",{value:"inactive",children:"Inactive"}),(0,d.jsx)("option",{value:"pending",children:"Pending"})]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.K7R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,d.jsxs)("select",{value:p,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none transition-all",children:[(0,d.jsx)("option",{value:"all",children:"All Categories"}),e.map(e=>e.category).filter(e=>e&&""!==e.trim()).filter((e,t,s)=>s.indexOf(e)===t).sort().map(e=>(0,d.jsx)("option",{value:e,children:e},e))]})]}),(0,d.jsxs)("div",{className:"relative",children:[(0,d.jsx)(l.usP,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,d.jsxs)("select",{value:f,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 appearance-none transition-all",children:[(0,d.jsx)("option",{value:"all",children:"All Ratings"}),(0,d.jsx)("option",{value:"4",children:"4+ Stars"}),(0,d.jsx)("option",{value:"3",children:"3+ Stars"}),(0,d.jsx)("option",{value:"2",children:"2+ Stars"}),(0,d.jsx)("option",{value:"1",children:"1+ Stars"})]})]})]}),(0,d.jsxs)("div",{className:"flex justify-between items-center",children:[(0,d.jsxs)("button",{onClick:()=>E(!A),className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium flex items-center space-x-1 transition-colors",children:[(0,d.jsx)(l.K7R,{size:14}),(0,d.jsxs)("span",{children:[A?"Hide":"Show"," Advanced Filters"]})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsx)("label",{className:"text-sm text-gray-600",children:"Sort by:"}),(0,d.jsxs)("select",{value:y,onChange:e=>j(e.target.value),className:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all",children:[(0,d.jsx)("option",{value:"createdAt",children:"Date Added"}),(0,d.jsx)("option",{value:"name",children:"Name"}),(0,d.jsx)("option",{value:"rating",children:"Rating"}),(0,d.jsx)("option",{value:"totalSpend",children:"Total Spend"}),(0,d.jsx)("option",{value:"lastActivity",children:"Last Activity"})]}),(0,d.jsx)("button",{onClick:()=>w("asc"===N?"desc":"asc"),className:"text-gray-600 hover:text-gray-800",children:"asc"===N?"\u2191":"\u2193"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,d.jsxs)("button",{onClick:()=>{const e=[["Name","Email","Phone","Status","Category","Total Spend","Total POs","Rating"].join(","),...s.map(e=>{var t,s;return[e.name,e.email,e.phone,e.status,e.category||"",(null===(t=O[e.id])||void 0===t?void 0:t.totalSpend)||0,(null===(s=O[e.id])||void 0===s?void 0:s.totalPOs)||0,e.rating||0].join(",")})].join("\n"),t=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`vendors-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),window.URL.revokeObjectURL(a),L("Vendors exported successfully")},className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white px-3 py-2 rounded-lg hover:from-green-700 hover:to-emerald-700 flex items-center space-x-1 text-sm shadow-sm transition-all",children:[(0,d.jsx)(l.a4x,{size:14}),(0,d.jsx)("span",{children:"Export"})]}),k.length>0&&(0,d.jsxs)("button",{onClick:async()=>{if(0!==k.length&&window.confirm(`Are you sure you want to delete ${k.length} vendors? This action cannot be undone.`))try{await(0,n.bB)(k),L(`${k.length} vendors deleted successfully`),P([]),_()}catch(e){console.error("Error deleting vendors:",e),z("Failed to delete vendors")}},className:"bg-gradient-to-r from-red-600 to-pink-600 text-white px-3 py-2 rounded-lg hover:from-red-700 hover:to-pink-700 flex items-center space-x-1 text-sm shadow-sm transition-all",children:[(0,d.jsx)(l.IXo,{size:14}),(0,d.jsxs)("span",{children:["Delete (",k.length,")"]})]})]}),(0,d.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",s.length," of ",e.length," vendors"]})]})]}),A&&(0,d.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Total Spend"}),(0,d.jsx)("input",{type:"number",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min PO Count"}),(0,d.jsx)("input",{type:"number",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),(0,d.jsx)("input",{type:"text",placeholder:"Enter city",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State"}),(0,d.jsx)("input",{type:"text",placeholder:"Enter state",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})})]}),(0,d.jsx)("div",{className:"md:hidden space-y-3",children:0===s.length?(0,d.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 text-center text-gray-500",children:0===e.length?"No vendors found":"No vendors match your filters"}):s.map(e=>{var t,s,a;return(0,d.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{className:"flex items-start",children:[(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-sm mr-3",children:(0,d.jsx)("span",{className:"text-white font-bold text-sm",children:e.name?e.name.charAt(0).toUpperCase():"?"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,d.jsx)("div",{className:"text-xs text-gray-400",children:e.city||"No city"})]})]}),(0,d.jsx)("div",{children:T(e.status)})]}),(0,d.jsxs)("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[e.category?(0,d.jsx)("span",{className:"inline-flex px-2 py-1 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 text-xs rounded-full font-medium border border-blue-200",children:e.category}):null,(0,d.jsxs)("div",{className:"flex items-center",children:[V(e.rating),(0,d.jsxs)("span",{className:"ml-1 text-xs text-gray-500",children:["(",e.rating||0,"/5)"]})]}),(0,d.jsxs)("span",{className:"text-xs text-gray-700",children:["Spend: ",(0,d.jsxs)("span",{className:"font-semibold text-green-600",children:["\u20b9",((null===(t=O[e.id])||void 0===t?void 0:t.totalSpend)||0).toLocaleString()]})]}),(0,d.jsxs)("span",{className:"text-xs text-gray-500",children:["POs: ",(null===(s=O[e.id])||void 0===s?void 0:s.totalPOs)||0]}),!(null===(a=O[e.id])||void 0===a||!a.pendingPOs)&&(0,d.jsxs)("span",{className:"inline-flex items-center text-xs text-orange-600",children:[(0,d.jsx)(l.Ohp,{size:12,className:"mr-1"})," ",O[e.id].pendingPOs," pending POs"]})]}),e.services&&e.services.length>0&&(0,d.jsxs)("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.services.slice(0,3).map((e,t)=>(0,d.jsx)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-700 text-xs rounded-full",children:e},t)),e.services.length>3&&(0,d.jsxs)("span",{className:"px-2 py-0.5 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.services.length-3]})]}),(0,d.jsxs)("div",{className:"mt-3 flex items-center justify-between",children:[(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("input",{type:"checkbox",checked:k.includes(e.id),onChange:t=>{t.target.checked?P([...k,e.id]):P(k.filter(t=>t!==e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500 mr-2","aria-label":"Select vendor"}),(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"Select"})]}),(0,d.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,d.jsx)(r.N_,{to:`/admin/vendor-preview/${e.id}`,className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50","aria-label":"View details",title:"View Details",children:(0,d.jsx)(l.Vap,{size:16})}),(0,d.jsx)(r.N_,{to:`/admin/vendor-performance/${e.id}`,className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50","aria-label":"View performance",title:"Performance",children:(0,d.jsx)(l.vQY,{size:16})}),(0,d.jsx)(r.N_,{to:`/admin/edit-vendor/${e.id}`,className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50","aria-label":"Edit vendor",title:"Edit",children:(0,d.jsx)(l.WXf,{size:16})}),(0,d.jsx)("button",{onClick:()=>R(e.id,e.name),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50","aria-label":"Delete vendor",title:"Delete",children:(0,d.jsx)(l.IXo,{size:16})})]})]})]},e.id)})}),(0,d.jsx)("div",{className:"hidden md:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:(0,d.jsx)("div",{className:"overflow-x-auto",children:(0,d.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",role:"table","aria-label":"Vendors table",children:[(0,d.jsx)("thead",{className:"bg-gray-50",children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,d.jsx)("input",{type:"checkbox",checked:k.length===s.length&&s.length>0,onChange:()=>{k.length===s.length?P([]):P(s.map(e=>e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor Details"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category & Rating"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Info"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status & Services"}),(0,d.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,d.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:0===s.length?(0,d.jsx)("tr",{children:(0,d.jsx)("td",{colSpan:"7",className:"px-6 py-12 text-center",children:(0,d.jsxs)("div",{className:"flex flex-col items-center",children:[(0,d.jsx)(l.cfS,{className:"text-gray-400 text-4xl mb-4"}),(0,d.jsx)("p",{className:"text-gray-500 text-lg",children:0===e.length?"No vendors found":"No vendors match your filters"}),0===e.length&&(0,d.jsxs)(r.N_,{to:"/admin/add-vendor",className:"mt-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white px-4 py-2 rounded-lg hover:from-blue-700 hover:to-indigo-700 flex items-center space-x-2 shadow-sm transition-all",children:[(0,d.jsx)(l.GGD,{size:16}),(0,d.jsx)("span",{children:"Add Your First Vendor"})]})]})})}):s.map(e=>{var t,s,a,n;return(0,d.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsx)("input",{type:"checkbox",checked:k.includes(e.id),onChange:t=>{t.target.checked?P([...k,e.id]):P(k.filter(t=>t!==e.id))},className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"flex items-center",children:[(0,d.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,d.jsx)("div",{className:"h-10 w-10 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center shadow-sm",children:(0,d.jsx)("span",{className:"text-white font-bold text-sm",children:e.name?e.name.charAt(0).toUpperCase():"?"})})}),(0,d.jsxs)("div",{className:"ml-4",children:[(0,d.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:e.email}),(0,d.jsx)("div",{className:"text-xs text-gray-400",children:e.city||"No city"})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"space-y-1",children:[e.category?(0,d.jsx)("span",{className:"inline-flex px-2 py-1 bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 text-xs rounded-full font-medium border border-blue-200",children:e.category}):(0,d.jsx)("span",{className:"text-gray-400 italic text-xs",children:"No category"}),(0,d.jsxs)("div",{className:"flex items-center mt-1",children:[V(e.rating),(0,d.jsxs)("span",{className:"ml-1 text-xs text-gray-500",children:["(",e.rating||0,"/5)"]})]})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-gray-900 font-medium",children:e.contactPerson}),(0,d.jsx)("div",{className:"text-sm text-gray-500",children:e.phone}),e.contactEmail&&(0,d.jsx)("div",{className:"text-xs text-gray-400",children:e.contactEmail})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,d.jsxs)("div",{className:"space-y-1",children:[(0,d.jsxs)("div",{className:"flex items-center text-sm",children:[(0,d.jsx)("span",{className:"text-gray-600",children:"Spend:"}),(0,d.jsxs)("span",{className:"ml-1 font-medium text-green-600",children:["\u20b9",((null===(t=O[e.id])||void 0===t?void 0:t.totalSpend)||0).toLocaleString()]})]}),(0,d.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,d.jsxs)("span",{children:["POs: ",(null===(s=O[e.id])||void 0===s?void 0:s.totalPOs)||0]}),(0,d.jsx)("span",{className:"mx-1",children:"\u2022"}),(0,d.jsxs)("span",{children:["Jobs: ",(null===(a=O[e.id])||void 0===a?void 0:a.totalJobs)||0]})]}),(null===(n=O[e.id])||void 0===n?void 0:n.pendingPOs)>0&&(0,d.jsxs)("div",{className:"flex items-center text-xs text-orange-600",children:[(0,d.jsx)(l.Ohp,{size:12,className:"mr-1"}),O[e.id].pendingPOs," pending POs"]})]})}),(0,d.jsx)("td",{className:"px-6 py-4",children:(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsx)("div",{children:T(e.status)}),(0,d.jsx)("div",{className:"text-sm text-gray-900",children:e.services&&e.services.length>0?(0,d.jsxs)("div",{className:"flex flex-wrap gap-1",children:[e.services.slice(0,2).map((e,t)=>(0,d.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-full",children:e},t)),e.services.length>2&&(0,d.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:["+",e.services.length-2]})]}):(0,d.jsx)("span",{className:"text-gray-400 italic text-xs",children:"No services"})})]})}),(0,d.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,d.jsxs)("div",{className:"flex space-x-1",children:[(0,d.jsx)(r.N_,{to:`/admin/vendor-preview/${e.id}`,className:"text-blue-600 hover:text-blue-900 p-2 rounded-lg hover:bg-blue-50 transition-all",title:"View Details",children:(0,d.jsx)(l.Vap,{size:16})}),(0,d.jsx)(r.N_,{to:`/admin/vendor-performance/${e.id}`,className:"text-purple-600 hover:text-purple-900 p-2 rounded-lg hover:bg-purple-50 transition-all",title:"Performance",children:(0,d.jsx)(l.vQY,{size:16})}),(0,d.jsx)(r.N_,{to:`/admin/edit-vendor/${e.id}`,className:"text-green-600 hover:text-green-900 p-2 rounded-lg hover:bg-green-50 transition-all",title:"Edit",children:(0,d.jsx)(l.WXf,{size:16})}),(0,d.jsx)("button",{onClick:()=>R(e.id,e.name),className:"text-red-600 hover:text-red-900 p-2 rounded-lg hover:bg-red-50 transition-all",title:"Delete",children:(0,d.jsx)(l.IXo,{size:16})})]})})]},e.id)})})]})})})]})})}}}]);
//# sourceMappingURL=1.4722f50d.chunk.js.map