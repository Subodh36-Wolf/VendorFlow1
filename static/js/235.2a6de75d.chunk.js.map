{"version":3,"file":"static/js/235.2a6de75d.chunk.js","mappings":"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","sources":["components/Auth/Login.jsx"],"sourcesContent":["import { useState } from 'react';\nimport { useAuth } from '../../context/AuthContext';\nimport { useNavigate, Link } from 'react-router-dom';\n\nexport default function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const { login, loginVendorWithEmailPhone, getUserRole } = useAuth();\n  const navigate = useNavigate();\n\n  async function handleSubmit(e) {\n    e.preventDefault();\n    \n    try {\n      setError('');\n      setLoading(true);\n      \n      // Try Firebase email/password (admin/staff)\n      try {\n        await login(email, password);\n        const role = await getUserRole(email);\n        if (role === 'admin' || role === 'vendor_manager') {\n          navigate('/admin/status-manager');\n        } else {\n          // If a normal user logs in here (unlikely), send to admin root\n          navigate('/admin');\n        }\n        return;\n      } catch (err) {\n        // Fall through to vendor login using phone as password\n      }\n\n      // Vendor login using email (username) and phone (password)\n      try {\n        await loginVendorWithEmailPhone(email, password);\n        navigate('/vendor');\n        return;\n      } catch (err) {\n        console.error('Login error:', err);\n        if (err?.message === 'VENDOR_NOT_FOUND') {\n          setError('No vendor found with this email.');\n        } else if (err?.message === 'INVALID_VENDOR_PASSWORD') {\n          setError('Incorrect phone number for this vendor.');\n        } else if (err?.code === 'auth/invalid-email') {\n          setError('Invalid email address format.');\n        } else if (err?.code === 'auth/too-many-requests') {\n          setError('Too many attempts. Please try again later.');\n        } else {\n          setError('Failed to log in. Please check your credentials.');\n        }\n      }\n    } catch (e) {\n      console.error('Unexpected login error:', e);\n      setError('Unexpected error during login. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8 bg-white p-8 rounded-lg shadow-md\">\n        <div className=\"text-center\">\n          <h2 className=\"mt-6 text-3xl font-extrabold text-gray-900\">\n            Sign in to your account\n          </h2>\n          <p className=\"mt-2 text-sm text-gray-600\">\n            Or{' '}\n            <Link \n              to=\"/register\" \n              className=\"font-medium text-indigo-600 hover:text-indigo-500\"\n            >\n              create a new account\n            </Link>\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border-l-4 border-red-500 p-4 mb-4\">\n            <div className=\"flex\">\n              <div className=\"flex-shrink-0\">\n                <svg className=\"h-5 w-5 text-red-500\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                </svg>\n              </div>\n              <div className=\"ml-3\">\n                <p className=\"text-sm text-red-700\">{error}</p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          <div className=\"rounded-md shadow-sm space-y-4\">\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Email address\n              </label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                autoComplete=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Email address\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                Password\n              </label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                autoComplete=\"current-password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Password\"\n              />\n            </div>\n          </div>\n\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center\">\n              <input\n                id=\"remember-me\"\n                name=\"remember-me\"\n                type=\"checkbox\"\n                className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n              />\n              <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-900\">\n                Remember me\n              </label>\n            </div>\n\n            <div className=\"text-sm\">\n              <Link \n                to=\"/forgot-password\" \n                className=\"font-medium text-indigo-600 hover:text-indigo-500\"\n              >\n                Forgot your password?\n              </Link>\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className={`group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${loading ? 'opacity-70 cursor-not-allowed' : ''}`}\n            >\n              {loading ? (\n                <>\n                  <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                    <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                    <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                  </svg>\n                  Signing in...\n                </>\n              ) : 'Sign in'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":["Login","email","setEmail","useState","password","setPassword","error","setError","loading","setLoading","login","loginVendorWithEmailPhone","getUserRole","useAuth","navigate","useNavigate","_jsx","className","children","_jsxs","Link","to","xmlns","viewBox","fill","fillRule","d","clipRule","onSubmit","async","e","preventDefault","role","err","console","message","code","htmlFor","id","name","type","autoComplete","required","value","onChange","target","placeholder","disabled","_Fragment","cx","cy","r","stroke","strokeWidth"],"sourceRoot":""}