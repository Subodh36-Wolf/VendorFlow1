{"version":3,"file":"static/js/660.3b6e81b0.chunk.js","mappings":"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","sources":["services/purchaseOrderService.js","components/Admin/POList.jsx"],"sourcesContent":["import { collection, addDoc, getDocs, getDoc, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, where, writeBatch } from 'firebase/firestore';\nimport { db } from '../firebase';\n\nconst PO_COLLECTION = 'purchaseOrders';\nconst ACTIVITY_COLLECTION = 'poActivity';\n\nexport function normalizePOForSave(raw) {\n    const items = Array.isArray(raw.items) ? raw.items : [];\n    // Normalize operations: accept either `operations` array or single `operation` string\n    const normalizedOperations = Array.isArray(raw.operations)\n        ? raw.operations.filter(Boolean)\n        : (raw.operation ? [String(raw.operation)] : []);\n\n    const safeItems = items.map((it) => {\n        const quantity = Number(it.quantity) || 0;\n        const unitPrice = Number(it.unitPrice ?? it.rate) || 0;\n        return {\n            description: String(it.description || '').trim(),\n            quantity,\n            unitPrice,\n            amount: Number(it.amount ?? (quantity * unitPrice)).toFixed ? Number((quantity * unitPrice).toFixed(2)) : (quantity * unitPrice),\n            unit: String(it.unit || 'pcs'),\n            specifications: String(it.specifications || ''),\n            deliveryDate: it.deliveryDate || '',\n            itemId: it.itemId || null,\n            // Per-item operation (optional)\n            operation: it.operation || null,\n        };\n    });\n\n    const subtotal = safeItems.reduce((sum, it) => sum + (Number(it.amount) || 0), 0);\n    const discountAmount = Number(raw.discountAmount || 0);\n    const afterDiscount = subtotal - discountAmount;\n    const taxRate = Number(raw.taxRate || 0);\n    const taxAmount = (afterDiscount * taxRate) / 100;\n    let finalAmount = afterDiscount + taxAmount;\n\n    // Handle optional round-off like Delivery Challan form\n    const roundOffEnabled = Boolean(raw.roundOffEnabled);\n    let roundOffValue = Number(raw.roundOffValue || 0);\n    if (roundOffEnabled) {\n        const rounded = Math.round(finalAmount);\n        roundOffValue = Number((rounded - finalAmount).toFixed(2));\n        finalAmount = rounded;\n    }\n\n    // Initialize per-operation status maps\n    const operationsStatus = normalizedOperations.reduce((acc, op) => {\n        acc[String(op)] = (raw.operationsStatus && raw.operationsStatus[op]) || 'pending';\n        return acc;\n    }, {});\n    const operationsMeta = normalizedOperations.reduce((acc, op) => {\n        const meta = (raw.operationsMeta && raw.operationsMeta[op]) || {};\n        acc[String(op)] = {\n            status: operationsStatus[String(op)] || 'pending',\n            notes: meta.notes || '',\n            updatedAt: meta.updatedAt || null,\n            updatedBy: meta.updatedBy || null,\n            startedAt: meta.startedAt || null,\n            completedAt: meta.completedAt || null,\n        };\n        return acc;\n    }, {});\n\n    return {\n        vendorId: String(raw.vendorId || '').trim(),\n        // Keep legacy single operation for backward compatibility (first operation if any)\n        operation: normalizedOperations[0] ? String(normalizedOperations[0]).trim() : '',\n        // New multi-operations field\n        operations: normalizedOperations,\n        // New per-operation status fields\n        operationsStatus,\n        operationsMeta,\n        description: String(raw.description || ''),\n        deliveryDate: raw.deliveryDate ? (raw.deliveryDate instanceof Date ? raw.deliveryDate : new Date(raw.deliveryDate)) : null,\n        priority: raw.priority || 'medium',\n        status: raw.status || 'pending',\n        paymentTerms: String(raw.paymentTerms ?? '30'),\n        shippingAddress: String(raw.shippingAddress || ''),\n        billingAddress: String(raw.billingAddress || ''),\n        currency: raw.currency || 'INR',\n        invoiceDate: raw.invoiceDate || null,\n        dueDate: raw.dueDate || null,\n        stateOfSupply: String(raw.stateOfSupply || ''),\n        taxRate,\n        discountAmount,\n        items: safeItems,\n        totalAmount: Number(subtotal.toFixed(2)),\n        taxAmount: Number(taxAmount.toFixed(2)),\n        finalAmount: Number(finalAmount.toFixed(2)),\n        roundOffEnabled,\n        roundOffValue,\n        specifications: String(raw.specifications || ''),\n        qualityRequirements: String(raw.qualityRequirements || ''),\n        expectedDeliveryDays: Number(raw.expectedDeliveryDays || 0) || 0,\n        warrantPeriod: String(raw.warrantPeriod || ''),\n        terms: String(raw.terms || ''),\n        poNumber: raw.poNumber || null,\n    };\n}\n\nexport function mapPOFromDoc(docSnap) {\n    const d = docSnap.data() || {};\n    return { id: docSnap.id, ...d };\n}\n\nasync function logActivity(poId, action, details) {\n\ttry {\n\t\tawait addDoc(collection(db, ACTIVITY_COLLECTION), { poId, action, details: details || {}, timestamp: serverTimestamp() });\n\t} catch (_) {}\n}\n\nexport async function getPOsOrdered() {\n\tconst q = query(collection(db, PO_COLLECTION), orderBy('createdAt', 'desc'));\n\tconst snap = await getDocs(q);\n\treturn snap.docs.map(mapPOFromDoc);\n}\n\nexport async function getPOById(id) {\n\tconst snap = await getDoc(doc(db, PO_COLLECTION, id));\n\tif (!snap.exists()) return null;\n\treturn mapPOFromDoc(snap);\n}\n\nexport async function createPO(raw) {\n\tconst data = normalizePOForSave(raw);\n\tconst now = serverTimestamp();\n\tconst ref = await addDoc(collection(db, PO_COLLECTION), { ...data, createdAt: now, updatedAt: now });\n\tawait logActivity(ref.id, 'create', { vendorId: data.vendorId, amount: data.finalAmount });\n\treturn { id: ref.id, ...data };\n}\n\nexport async function updatePO(id, raw) {\n\tconst data = normalizePOForSave(raw);\n\tawait updateDoc(doc(db, PO_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\n\tawait logActivity(id, 'update', { status: data.status });\n}\n\nexport async function deletePO(id) {\n\tawait deleteDoc(doc(db, PO_COLLECTION, id));\n\tawait logActivity(id, 'delete');\n}\n\nexport async function bulkUpdatePOs(ids, fields) {\n\tconst batch = writeBatch(db);\n\tids.forEach((id) => batch.update(doc(db, PO_COLLECTION, id), { ...fields, updatedAt: serverTimestamp() }));\n\tawait batch.commit();\n\tfor (const id of ids) logActivity(id, 'bulk_update', { fields });\n}\n\nexport async function bulkDeletePOs(ids) {\n\tconst batch = writeBatch(db);\n\tids.forEach((id) => batch.delete(doc(db, PO_COLLECTION, id)));\n\tawait batch.commit();\n\tfor (const id of ids) logActivity(id, 'bulk_delete');\n}\n","import { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { deletePO, bulkUpdatePOs, bulkDeletePOs } from '../../services/purchaseOrderService';\nimport { useNotification } from './NotificationSystem';\nimport { \n  FiPlus, FiSearch, FiEye, FiEdit2, FiTrash2, FiCalendar, \n  FiDollarSign, FiFileText, FiDownload, FiFilter, FiUser,\n  FiCheckCircle, FiClock, FiAlertCircle, FiXCircle, FiRefreshCw,\n  FiMoreVertical, FiSend, FiPrinter, FiCopy, FiArchive,\n  FiTrendingUp, FiBarChart3, FiSettings, FiMail\n} from 'react-icons/fi';\n\nexport default function POList() {\n  const { showSuccess, showError } = useNotification();\n  const [pos, setPOs] = useState([]);\n  const [vendors, setVendors] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [operationFilter, setOperationFilter] = useState('all');\n  const [priorityFilter, setPriorityFilter] = useState('all');\n  const [dateRange, setDateRange] = useState({ start: '', end: '' });\n  const [sortBy, setSortBy] = useState('createdAt');\n  const [sortOrder, setSortOrder] = useState('desc');\n  const [selectedPOs, setSelectedPOs] = useState([]);\n  const [showBulkActions, setShowBulkActions] = useState(false);\n  const [bulkLoading, setBulkLoading] = useState(false);\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const fetchData = async () => {\n    try {\n      const [posSnapshot, vendorsSnapshot] = await Promise.all([\n        getDocs(collection(db, 'purchaseOrders')),\n        getDocs(collection(db, 'vendors'))\n      ]);\n      \n      const posData = [];\n      posSnapshot.forEach((doc) => {\n        posData.push({ id: doc.id, ...doc.data() });\n      });\n      \n      const vendorsData = [];\n      vendorsSnapshot.forEach((doc) => {\n        vendorsData.push({ id: doc.id, ...doc.data() });\n      });\n      \n      setPOs(posData);\n      setVendors(vendorsData);\n    } catch (error) {\n      console.error('Error fetching data:', error);\n      showError('Failed to load purchase orders');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const deletePOHandler = async (id) => {\n    if (window.confirm('Are you sure you want to delete this purchase order?')) {\n      try {\n        await deletePO(id);\n        setPOs(pos.filter(po => po.id !== id));\n        showSuccess('Purchase order deleted successfully');\n      } catch (error) {\n        console.error('Error deleting PO:', error);\n        showError('Failed to delete purchase order');\n      }\n    }\n  };\n\n  const updatePOStatus = async (id, newStatus) => {\n    try {\n      await bulkUpdatePOs([id], { status: newStatus });\n      \n      setPOs(pos.map(po => \n        po.id === id ? { ...po, status: newStatus } : po\n      ));\n      \n      showSuccess(`Purchase order ${newStatus} successfully`);\n    } catch (error) {\n      console.error('Error updating PO status:', error);\n      showError('Failed to update purchase order status');\n    }\n  };\n\n  const getVendorName = (vendorId) => {\n    const vendor = vendors.find(v => v.id === vendorId);\n    return vendor ? vendor.name : 'Unknown Vendor';\n  };\n\n  // Bulk operations\n  const handleSelectAll = (checked) => {\n    if (checked) {\n      setSelectedPOs(filteredPOs.map(po => po.id));\n    } else {\n      setSelectedPOs([]);\n    }\n  };\n\n  const handleSelectPO = (poId, checked) => {\n    if (checked) {\n      setSelectedPOs([...selectedPOs, poId]);\n    } else {\n      setSelectedPOs(selectedPOs.filter(id => id !== poId));\n    }\n  };\n\n  const handleBulkStatusUpdate = async (newStatus) => {\n    if (selectedPOs.length === 0) {\n      showError('Please select POs to update');\n      return;\n    }\n\n    try {\n      setBulkLoading(true);\n      await bulkUpdatePOs(selectedPOs, { status: newStatus });\n      \n      setPOs(pos.map(po => \n        selectedPOs.includes(po.id) ? { ...po, status: newStatus } : po\n      ));\n      \n      setSelectedPOs([]);\n      showSuccess(`${selectedPOs.length} POs updated to ${newStatus}`);\n    } catch (error) {\n      console.error('Error updating POs:', error);\n      showError('Failed to update POs');\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  const handleBulkDelete = async () => {\n    if (selectedPOs.length === 0) {\n      showError('Please select POs to delete');\n      return;\n    }\n\n    if (!window.confirm(`Are you sure you want to delete ${selectedPOs.length} purchase orders?`)) {\n      return;\n    }\n\n    try {\n      setBulkLoading(true);\n      await bulkDeletePOs(selectedPOs);\n      \n      setPOs(pos.filter(po => !selectedPOs.includes(po.id)));\n      setSelectedPOs([]);\n      showSuccess(`${selectedPOs.length} POs deleted successfully`);\n    } catch (error) {\n      console.error('Error deleting POs:', error);\n      showError('Failed to delete POs');\n    } finally {\n      setBulkLoading(false);\n    }\n  };\n\n  const exportToCSV = () => {\n    const csvData = filteredPOs.map(po => {\n      const ops = Array.isArray(po.operations) ? po.operations : (po.operation ? [po.operation] : []);\n      return {\n        'PO Number': po.poNumber,\n        'Vendor': getVendorName(po.vendorId),\n        'Operations': ops.join(' | '),\n        'Amount': po.finalAmount || po.totalAmount,\n        'Status': po.status,\n        'Priority': po.priority,\n        'Created Date': po.createdAt?.toDate?.()?.toLocaleDateString() || 'N/A',\n        'Delivery Date': po.deliveryDate?.toDate?.()?.toLocaleDateString() || 'N/A'\n      };\n    });\n\n    const csvContent = [\n      Object.keys(csvData[0]).join(','),\n      ...csvData.map(row => Object.values(row).join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv' });\n    const url = window.URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `purchase-orders-${new Date().toISOString().split('T')[0]}.csv`;\n    a.click();\n    window.URL.revokeObjectURL(url);\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'approved':\n        return <FiCheckCircle className=\"text-green-500\" />;\n      case 'pending':\n        return <FiClock className=\"text-yellow-500\" />;\n      case 'rejected':\n        return <FiXCircle className=\"text-red-500\" />;\n      case 'completed':\n        return <FiCheckCircle className=\"text-blue-500\" />;\n      default:\n        return <FiAlertCircle className=\"text-gray-500\" />;\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'pending':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'approved':\n        return 'bg-green-100 text-green-800';\n      case 'rejected':\n        return 'bg-red-100 text-red-800';\n      case 'completed':\n        return 'bg-blue-100 text-blue-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const getPriorityColor = (priority) => {\n    switch (priority) {\n      case 'low':\n        return 'bg-gray-100 text-gray-800';\n      case 'medium':\n        return 'bg-blue-100 text-blue-800';\n      case 'high':\n        return 'bg-orange-100 text-orange-800';\n      case 'urgent':\n        return 'bg-red-100 text-red-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const filteredPOs = pos.filter(po => {\n    const ops = Array.isArray(po.operations) ? po.operations : (po.operation ? [po.operation] : []);\n    const matchesSearch = po.poNumber?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         getVendorName(po.vendorId).toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         ops.join(' ').toLowerCase().includes(searchTerm.toLowerCase()) ||\n                         po.description?.toLowerCase().includes(searchTerm.toLowerCase());\n    \n    const matchesStatus = statusFilter === 'all' || po.status === statusFilter;\n    const matchesOperation = operationFilter === 'all' || ops.includes(operationFilter);\n    const matchesPriority = priorityFilter === 'all' || po.priority === priorityFilter;\n    \n    // Date range filter\n    let matchesDateRange = true;\n    if (dateRange.start || dateRange.end) {\n      const poDate = po.createdAt?.toDate?.();\n      if (poDate) {\n        if (dateRange.start && new Date(dateRange.start) > poDate) matchesDateRange = false;\n        if (dateRange.end && new Date(dateRange.end) < poDate) matchesDateRange = false;\n      }\n    }\n    \n    return matchesSearch && matchesStatus && matchesOperation && matchesPriority && matchesDateRange;\n  }).sort((a, b) => {\n    let aValue, bValue;\n    \n    switch (sortBy) {\n      case 'poNumber':\n        aValue = a.poNumber || '';\n        bValue = b.poNumber || '';\n        break;\n      case 'vendor':\n        aValue = getVendorName(a.vendorId);\n        bValue = getVendorName(b.vendorId);\n        break;\n      case 'amount':\n        aValue = parseFloat(a.finalAmount || a.totalAmount || 0);\n        bValue = parseFloat(b.finalAmount || b.totalAmount || 0);\n        break;\n      case 'createdAt':\n      default:\n        aValue = a.createdAt?.toDate?.() || new Date(0);\n        bValue = b.createdAt?.toDate?.() || new Date(0);\n        break;\n    }\n    \n    if (sortOrder === 'asc') {\n      return aValue > bValue ? 1 : -1;\n    } else {\n      return aValue < bValue ? 1 : -1;\n    }\n  });\n\n  // Calculate statistics\n  const stats = {\n    total: pos.length,\n    pending: pos.filter(po => po.status === 'pending').length,\n    approved: pos.filter(po => po.status === 'approved').length,\n    completed: pos.filter(po => po.status === 'completed').length,\n    totalValue: pos.reduce((sum, po) => sum + parseFloat(po.finalAmount || po.totalAmount || 0), 0)\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex justify-center items-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n        <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n          <div className=\"flex items-center space-x-3\">\n            <div className=\"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center\">\n              <FiFileText className=\"text-white\" size={20} />\n            </div>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">Purchase Orders</h1>\n              <p className=\"text-gray-600\">Manage purchase orders for vendor operations</p>\n            </div>\n          </div>\n          <div className=\"flex items-center space-x-3\">\n            <button\n              onClick={() => fetchData()}\n              className=\"inline-flex items-center px-4 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white font-medium rounded-xl hover:from-gray-600 hover:to-slate-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n              title=\"Refresh\"\n            >\n              <FiRefreshCw size={16} />\n            </button>\n            <button\n              onClick={exportToCSV}\n              className=\"inline-flex items-center px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-medium rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n            >\n              <FiDownload className=\"mr-2\" size={16} />\n              Export CSV\n            </button>\n            <Link\n              to=\"/admin/create-po\"\n              className=\"inline-flex items-center px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n            >\n              <FiPlus className=\"mr-2\" size={16} />\n              Create PO\n            </Link>\n          </div>\n        </div>\n      </div>\n\n      {/* Filters */}\n      <div className=\"bg-white p-6 rounded-xl shadow-sm border border-gray-200\">\n        <div className=\"flex items-center space-x-3 mb-6\">\n          <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center\">\n            <FiFilter className=\"text-white\" size={16} />\n          </div>\n          <h3 className=\"text-lg font-semibold text-gray-900\">Search & Filter</h3>\n        </div>\n        \n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n          <div className=\"relative\">\n            <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" size={16} />\n            <input\n              type=\"text\"\n              placeholder=\"Search POs, vendors, operations...\"\n              value={searchTerm}\n              onChange={(e) => setSearchTerm(e.target.value)}\n              className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400\"\n            />\n          </div>\n          \n          <select\n            value={statusFilter}\n            onChange={(e) => setStatusFilter(e.target.value)}\n            className=\"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400\"\n          >\n            <option value=\"all\">All Status</option>\n            <option value=\"pending\">Pending</option>\n            <option value=\"approved\">Approved</option>\n            <option value=\"completed\">Completed</option>\n            <option value=\"rejected\">Rejected</option>\n          </select>\n\n          <select\n            value={priorityFilter}\n            onChange={(e) => setPriorityFilter(e.target.value)}\n            className=\"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400\"\n          >\n            <option value=\"all\">All Priorities</option>\n            <option value=\"low\">Low</option>\n            <option value=\"medium\">Medium</option>\n            <option value=\"high\">High</option>\n            <option value=\"urgent\">Urgent</option>\n          </select>\n\n          <select\n            value={sortBy}\n            onChange={(e) => setSortBy(e.target.value)}\n            className=\"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400\"\n          >\n            <option value=\"createdAt\">Sort by Date</option>\n            <option value=\"poNumber\">Sort by PO Number</option>\n            <option value=\"vendor\">Sort by Vendor</option>\n            <option value=\"amount\">Sort by Amount</option>\n          </select>\n\n          <div className=\"flex items-center space-x-2\">\n            <button\n              onClick={() => setSortOrder(sortOrder === 'asc' ? 'desc' : 'asc')}\n              className=\"p-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200\"\n              title={`Sort ${sortOrder === 'asc' ? 'Descending' : 'Ascending'}`}\n            >\n              <FiTrendingUp className={`transform transition-transform duration-200 ${sortOrder === 'desc' ? 'rotate-180' : ''}`} size={16} />\n            </button>\n            <button\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n              className=\"inline-flex items-center px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200\"\n            >\n              <FiFilter className=\"mr-2\" size={16} />\n              Advanced\n            </button>\n          </div>\n        </div>\n\n        {/* Advanced Filters */}\n        {showAdvancedFilters && (\n          <div className=\"mt-4 pt-4 border-t border-gray-200\">\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n              <select\n                value={operationFilter}\n                onChange={(e) => setOperationFilter(e.target.value)}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n              >\n                <option value=\"all\">All Operations</option>\n                <option value=\"HBL\">HBL (Horizontal Boring & Lathe)</option>\n                <option value=\"VTL\">VTL (Vertical Turning Lathe)</option>\n                <option value=\"Drilling\">Drilling</option>\n                <option value=\"VMC\">VMC (Vertical Machining Center)</option>\n              </select>\n\n              <div>\n                <input\n                  type=\"date\"\n                  placeholder=\"Start Date\"\n                  value={dateRange.start}\n                  onChange={(e) => setDateRange(prev => ({ ...prev, start: e.target.value }))}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                />\n              </div>\n\n              <div>\n                <input\n                  type=\"date\"\n                  placeholder=\"End Date\"\n                  value={dateRange.end}\n                  onChange={(e) => setDateRange(prev => ({ ...prev, end: e.target.value }))}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Filter Results & Bulk Actions */}\n        <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-gray-200\">\n          <div className=\"flex items-center text-sm text-gray-600\">\n            <FiFilter className=\"mr-2\" size={16} />\n            {filteredPOs.length} of {pos.length} POs\n            {selectedPOs.length > 0 && (\n              <span className=\"ml-4 text-indigo-600 font-medium\">\n                {selectedPOs.length} selected\n              </span>\n            )}\n          </div>\n\n          {selectedPOs.length > 0 && (\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={() => handleBulkStatusUpdate('approved')}\n                disabled={bulkLoading}\n                className=\"inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50\"\n              >\n                <FiCheckCircle className=\"mr-2\" size={16} />\n                Approve Selected\n              </button>\n              <button\n                onClick={() => handleBulkStatusUpdate('rejected')}\n                disabled={bulkLoading}\n                className=\"inline-flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50\"\n              >\n                <FiXCircle className=\"mr-2\" size={16} />\n                Reject Selected\n              </button>\n              <button\n                onClick={handleBulkDelete}\n                disabled={bulkLoading}\n                className=\"inline-flex items-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50\"\n              >\n                <FiTrash2 className=\"mr-2\" size={16} />\n                Delete Selected\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Statistics Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <FiFileText className=\"h-8 w-8 text-indigo-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <div className=\"text-sm font-medium text-gray-500\">Total POs</div>\n              <div className=\"text-2xl font-bold text-gray-900\">{pos.length}</div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <FiClock className=\"h-8 w-8 text-yellow-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <div className=\"text-sm font-medium text-gray-500\">Pending</div>\n              <div className=\"text-2xl font-bold text-gray-900\">\n                {pos.filter(po => po.status === 'pending').length}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <FiCheckCircle className=\"h-8 w-8 text-green-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <div className=\"text-sm font-medium text-gray-500\">Approved</div>\n              <div className=\"text-2xl font-bold text-gray-900\">\n                {pos.filter(po => po.status === 'approved').length}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white p-6 rounded-lg shadow-sm border border-gray-200\">\n          <div className=\"flex items-center\">\n            <div className=\"flex-shrink-0\">\n              <FiDollarSign className=\"h-8 w-8 text-blue-600\" />\n            </div>\n            <div className=\"ml-4\">\n              <div className=\"text-sm font-medium text-gray-500\">Total Value</div>\n              <div className=\"text-2xl font-bold text-gray-900\">\n                ₹{pos.reduce((sum, po) => sum + (parseFloat(po.totalAmount) || 0), 0).toLocaleString()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* PO Table */}\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"min-w-full divide-y divide-gray-200\">\n            <thead className=\"bg-gray-50\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  <input\n                    type=\"checkbox\"\n                    checked={selectedPOs.length === filteredPOs.length && filteredPOs.length > 0}\n                    onChange={(e) => handleSelectAll(e.target.checked)}\n                    className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                  />\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  PO Details\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Vendor & Operation\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Amount & Priority\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Status & Dates\n                </th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                  Actions\n                </th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {filteredPOs.map((po) => (\n                <tr key={po.id} className={`hover:bg-gray-50 ${selectedPOs.includes(po.id) ? 'bg-indigo-50' : ''}`}>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedPOs.includes(po.id)}\n                      onChange={(e) => handleSelectPO(po.id, e.target.checked)}\n                      className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                    />\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        PO #{po.poNumber}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {po.description}\n                      </div>\n                      <div className=\"text-xs text-gray-400 mt-1\">\n                        {po.createdAt?.toDate?.()?.toLocaleDateString()}\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {getVendorName(po.vendorId)}\n                      </div>\n                      <div className=\"text-sm text-gray-500\">\n                        {(Array.isArray(po.operations) ? po.operations : (po.operation ? [po.operation] : []))\n                          .map(v => v).join(', ')}\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        ₹{parseFloat(po.finalAmount || po.totalAmount || 0).toLocaleString()}\n                      </div>\n                      <div className=\"flex items-center mt-1\">\n                        <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getPriorityColor(po.priority)}`}>\n                          {po.priority}\n                        </span>\n                      </div>\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div>\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusColor(po.status)}`}>\n                        {po.status}\n                      </span>\n                      {po.expectedDeliveryDate && (\n                        <div className=\"text-xs text-gray-500 mt-1\">\n                          Due: {new Date(po.expectedDeliveryDate).toLocaleDateString()}\n                        </div>\n                      )}\n                    </div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <div className=\"flex items-center space-x-2\">\n                      <button\n                        onClick={() => updatePOStatus(po.id, 'approved')}\n                        className=\"text-green-600 hover:text-green-900\"\n                        title=\"Approve\"\n                      >\n                        <FiCheckCircle size={16} />\n                      </button>\n                      <button\n                        onClick={() => updatePOStatus(po.id, 'rejected')}\n                        className=\"text-red-600 hover:text-red-900\"\n                        title=\"Reject\"\n                      >\n                        <FiXCircle size={16} />\n                      </button>\n                      <button\n                        onClick={() => deletePOHandler(po.id)}\n                        className=\"text-red-600 hover:text-red-900\"\n                        title=\"Delete\"\n                      >\n                        <FiTrash2 size={16} />\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n\n        {filteredPOs.length === 0 && (\n          <div className=\"text-center py-12\">\n            <FiFileText className=\"mx-auto h-12 w-12 text-gray-400\" />\n            <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No purchase orders</h3>\n            <p className=\"mt-1 text-sm text-gray-500\">\n              Get started by creating a new purchase order.\n            </p>\n            <div className=\"mt-6\">\n              <Link\n                to=\"/admin/create-po\"\n                className=\"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\n              >\n                <FiPlus className=\"mr-2\" size={16} />\n                Create PO\n              </Link>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":["PO_COLLECTION","ACTIVITY_COLLECTION","normalizePOForSave","raw","_raw$paymentTerms","items","Array","isArray","normalizedOperations","operations","filter","Boolean","operation","String","safeItems","map","it","_it$unitPrice","_it$amount","quantity","Number","unitPrice","rate","description","trim","amount","toFixed","unit","specifications","deliveryDate","itemId","subtotal","reduce","sum","discountAmount","afterDiscount","taxRate","taxAmount","finalAmount","roundOffEnabled","roundOffValue","rounded","Math","round","operationsStatus","acc","op","operationsMeta","meta","status","notes","updatedAt","updatedBy","startedAt","completedAt","vendorId","Date","priority","paymentTerms","shippingAddress","billingAddress","currency","invoiceDate","dueDate","stateOfSupply","totalAmount","qualityRequirements","expectedDeliveryDays","warrantPeriod","terms","poNumber","mapPOFromDoc","docSnap","d","data","id","async","logActivity","poId","action","details","addDoc","collection","db","timestamp","serverTimestamp","_","getPOById","snap","getDoc","doc","exists","createPO","now","ref","createdAt","updatePO","updateDoc","deletePO","deleteDoc","bulkUpdatePOs","ids","fields","batch","writeBatch","forEach","update","commit","bulkDeletePOs","delete","POList","showSuccess","showError","useNotification","pos","setPOs","useState","vendors","setVendors","loading","setLoading","searchTerm","setSearchTerm","statusFilter","setStatusFilter","operationFilter","setOperationFilter","priorityFilter","setPriorityFilter","dateRange","setDateRange","start","end","sortBy","setSortBy","sortOrder","setSortOrder","selectedPOs","setSelectedPOs","showBulkActions","setShowBulkActions","bulkLoading","setBulkLoading","showAdvancedFilters","setShowAdvancedFilters","useEffect","fetchData","posSnapshot","vendorsSnapshot","Promise","all","getDocs","posData","push","vendorsData","error","console","updatePOStatus","newStatus","po","getVendorName","vendor","find","v","name","handleBulkStatusUpdate","length","includes","getStatusColor","getPriorityColor","filteredPOs","_po$poNumber","_po$description","ops","matchesSearch","toLowerCase","join","matchesStatus","matchesOperation","matchesPriority","matchesDateRange","_po$createdAt2","_po$createdAt2$toDate","poDate","toDate","call","sort","a","b","_a$createdAt","_a$createdAt$toDate","_b$createdAt","_b$createdAt$toDate","aValue","bValue","parseFloat","_jsx","className","children","_jsxs","FiFileText","size","onClick","title","FiRefreshCw","exportToCSV","csvData","_po$createdAt","_po$createdAt$toDate","_po$createdAt$toDate$","_po$deliveryDate","_po$deliveryDate$toDa","_po$deliveryDate$toDa2","toLocaleDateString","csvContent","Object","keys","row","values","blob","Blob","type","url","window","URL","createObjectURL","document","createElement","href","download","toISOString","split","click","revokeObjectURL","FiDownload","Link","to","FiPlus","FiFilter","FiSearch","placeholder","value","onChange","e","target","FiTrendingUp","prev","disabled","FiCheckCircle","FiXCircle","confirm","FiTrash2","FiClock","FiDollarSign","toLocaleString","checked","handleSelectAll","_po$createdAt3","_po$createdAt3$toDate","_po$createdAt3$toDate2","handleSelectPO","expectedDeliveryDate","deletePOHandler"],"sourceRoot":""}