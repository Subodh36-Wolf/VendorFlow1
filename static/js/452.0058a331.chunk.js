"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[452],{8452:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(5043),r=t(3216),i=t(5475),l=t(5472),d=t(791),n=t(9369),c=t(3505),x=t(5772),o=t(1847),m=t(579);function h(){var e,s,t,h,p,g,u,j,N,v,y,f,b,w,A,P,k,D,S,z,C;const{id:O}=(0,r.g)(),L=(0,r.Zp)(),{showSuccess:_,showError:F}=(0,c.hN)(),[I,E]=(0,a.useState)(null),[H,$]=(0,a.useState)(null),[q,G]=(0,a.useState)(!0),[R,T]=(0,a.useState)(!1),[V,X]=(0,a.useState)(!1);(0,a.useEffect)(()=>{B()},[O]);const B=async()=>{try{G(!0);const e=await(0,n.KN)(O);if(!e)return F("Purchase order not found"),void L("/admin/purchase-orders");if(E(e),e.vendorId){const s=await(0,l.x7)((0,l.H9)(d.db,"vendors",e.vendorId));s.exists()&&$({id:s.id,...s.data()})}}catch(e){console.error("Error fetching PO details:",e),F("Failed to load purchase order details")}finally{G(!1)}},J=async e=>{try{T(!0),await(0,n.vb)(O,{...I,status:e}),E(s=>({...s,status:e})),_(`Purchase order ${e} successfully`)}catch(s){console.error("Error updating PO status:",s),F("Failed to update purchase order status")}finally{T(!1)}};return q?(0,m.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,m.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):I?(0,m.jsxs)("div",{className:"max-w-6xl mx-auto space-y-6",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("button",{onClick:()=>L("/admin/purchase-orders"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,m.jsx)(x.kRp,{className:"mr-2",size:20}),"Back to POs"]}),(0,m.jsxs)("div",{children:[(0,m.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Purchase Order #",I.poNumber]}),(0,m.jsx)("p",{className:"text-gray-600",children:"Detailed view and status management"})]})]}),(0,m.jsxs)("div",{className:"flex space-x-3",children:[(0,m.jsxs)("button",{onClick:()=>{X(!0)},className:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:[(0,m.jsx)(x.Vap,{className:"mr-2",size:16}),"Preview / Print"]}),(0,m.jsxs)("button",{onClick:()=>{_("PDF download started")},className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,m.jsx)(x.a4x,{className:"mr-2",size:16}),"Download PDF"]}),(0,m.jsxs)(i.N_,{to:`/admin/edit-po/${I.id}`,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,m.jsx)(x.WXf,{className:"mr-2",size:16}),"Edit PO"]})]})]}),(0,m.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"approved":return(0,m.jsx)(x.A3x,{className:"text-green-500"});case"pending":return(0,m.jsx)(x.Ohp,{className:"text-yellow-500"});case"rejected":return(0,m.jsx)(x.q_G,{className:"text-red-500"});case"completed":return(0,m.jsx)(x.A3x,{className:"text-blue-500"});default:return(0,m.jsx)(x.y3G,{className:"text-gray-500"})}})(I.status),(0,m.jsx)("span",{className:`ml-2 inline-flex items-center px-3 py-1 rounded-full text-sm font-medium ${(e=>{switch(e){case"approved":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(I.status)}`,children:(null===(e=I.status)||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===(s=I.status)||void 0===s?void 0:s.slice(1))})]}),(0,m.jsxs)("div",{className:"text-sm text-gray-500",children:["Last updated: ",(null===(t=I.updatedAt)||void 0===t||null===(h=t.toDate)||void 0===h||null===(p=h.call(t))||void 0===p?void 0:p.toLocaleString())||"N/A"]})]}),"pending"===I.status&&(0,m.jsxs)("div",{className:"flex space-x-2",children:[(0,m.jsxs)("button",{onClick:()=>J("approved"),disabled:R,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,m.jsx)(x.A3x,{className:"mr-2",size:16}),"Approve"]}),(0,m.jsxs)("button",{onClick:()=>J("rejected"),disabled:R,className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[(0,m.jsx)(x.q_G,{className:"mr-2",size:16}),"Reject"]})]}),"approved"===I.status&&(0,m.jsxs)("button",{onClick:()=>J("completed"),disabled:R,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:[(0,m.jsx)(x.A3x,{className:"mr-2",size:16}),"Mark Completed"]})]})}),(0,m.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Purchase Order Details"}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.jH2,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"PO Number"}),(0,m.jsx)("p",{className:"text-gray-900 font-mono",children:I.poNumber})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.wIk,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Created Date"}),(0,m.jsx)("p",{className:"text-gray-900",children:(null===(g=I.createdAt)||void 0===g||null===(u=g.toDate)||void 0===u||null===(j=u.call(g))||void 0===j?void 0:j.toLocaleDateString())||"N/A"})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.wIk,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Delivery Date"}),(0,m.jsx)("p",{className:"text-gray-900",children:(null===(N=I.deliveryDate)||void 0===N||null===(v=N.toDate)||void 0===v||null===(y=v.call(N))||void 0===y?void 0:y.toLocaleDateString())||"Not specified"})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.jH2,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Operation(s)"}),(0,m.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(Array.isArray(I.operations)?I.operations:I.operation?[I.operation]:[]).map((e,s)=>(0,m.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:e},s)),!I.operations&&!I.operation&&(0,m.jsx)("span",{className:"text-xs text-gray-500",children:"-"})]})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.z8N,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Amount"}),(0,m.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",parseFloat(I.totalAmount||0).toLocaleString()]})]})]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendor Information"}),H?(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.JXP,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Vendor Name"}),(0,m.jsx)(i.N_,{to:`/admin/vendor-preview/${H.id}`,className:"text-indigo-600 hover:text-indigo-800 font-medium",children:H.name})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.pHD,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,m.jsx)("a",{href:`mailto:${H.email}`,className:"text-indigo-600 hover:text-indigo-800",children:H.email})]})]}),(0,m.jsxs)("div",{className:"flex items-center",children:[(0,m.jsx)(x.QFc,{className:"text-gray-400 mr-3",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,m.jsx)("a",{href:`tel:${H.phone}`,className:"text-indigo-600 hover:text-indigo-800",children:H.phone})]})]}),(0,m.jsxs)("div",{className:"flex items-start",children:[(0,m.jsx)(x.JXP,{className:"text-gray-400 mr-3 mt-1",size:20}),(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,m.jsx)("p",{className:"text-gray-900",children:H.address||"N/A"})]})]})]}):(0,m.jsx)("p",{className:"text-gray-500",children:"Vendor information not available"})]})]}),(0,m.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,m.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Items & Services"})}),(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,m.jsx)("thead",{className:"bg-gray-50",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),(0,m.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Operation"}),(0,m.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Quantity"}),(0,m.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Unit Price"}),(0,m.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"Amount"})]})}),(0,m.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[null===(f=I.items)||void 0===f?void 0:f.map((e,s)=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.description}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.operation||"-"}),(0,m.jsx)("td",{className:"px-6 py-4 text-sm text-gray-900 text-center",children:e.quantity}),(0,m.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:["\u20b9",parseFloat(e.unitPrice||0).toLocaleString()]}),(0,m.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right font-medium",children:["\u20b9",parseFloat(e.amount||0).toLocaleString()]})]},s)),(0,m.jsxs)("tr",{className:"bg-gray-50 font-semibold",children:[(0,m.jsx)("td",{colSpan:"3",className:"px-6 py-4 text-sm text-gray-900 text-right",children:"Total Amount:"}),(0,m.jsxs)("td",{className:"px-6 py-4 text-sm text-gray-900 text-right",children:["\u20b9",parseFloat(I.totalAmount||0).toLocaleString()]})]})]})]})})]}),(I.description||I.specifications||I.terms)&&(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Information"}),(0,m.jsxs)("div",{className:"space-y-6",children:[I.description&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Description"}),(0,m.jsx)("p",{className:"text-gray-900",children:I.description})]}),I.specifications&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Technical Specifications"}),(0,m.jsx)("p",{className:"text-gray-900 whitespace-pre-line",children:I.specifications})]}),I.terms&&(0,m.jsxs)("div",{children:[(0,m.jsx)("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Terms & Conditions"}),(0,m.jsx)("p",{className:"text-gray-900 whitespace-pre-line",children:I.terms})]})]})]}),(0,m.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Status History"}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,m.jsx)(x.jH2,{className:"w-4 h-4 text-blue-600"})})}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Purchase Order Created"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:(null===(b=I.createdAt)||void 0===b||null===(w=b.toDate)||void 0===w||null===(A=w.call(b))||void 0===A?void 0:A.toLocaleString())||"N/A"})]})]}),"pending"!==I.status&&(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center "+("approved"===I.status?"bg-green-100":"bg-red-100"),children:"approved"===I.status?(0,m.jsx)(x.A3x,{className:"w-4 h-4 text-green-600"}):(0,m.jsx)(x.q_G,{className:"w-4 h-4 text-red-600"})})}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:["Purchase Order ","approved"===I.status?"Approved":"Rejected"]}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:(null===(P=I.updatedAt)||void 0===P||null===(k=P.toDate)||void 0===k||null===(D=k.call(P))||void 0===D?void 0:D.toLocaleString())||"N/A"})]})]}),"completed"===I.status&&(0,m.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,m.jsx)("div",{className:"flex-shrink-0",children:(0,m.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,m.jsx)(x.A3x,{className:"w-4 h-4 text-blue-600"})})}),(0,m.jsxs)("div",{className:"flex-1",children:[(0,m.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Work Completed"}),(0,m.jsx)("p",{className:"text-sm text-gray-500",children:(null===(S=I.updatedAt)||void 0===S||null===(z=S.toDate)||void 0===z||null===(C=z.call(S))||void 0===C?void 0:C.toLocaleString())||"N/A"})]})]})]})]}),V&&(0,m.jsx)(o.A,{poData:I,vendor:H,vendorId:I.vendorId,onClose:()=>X(!1),autoPrint:!1})]}):(0,m.jsxs)("div",{className:"text-center py-8",children:[(0,m.jsx)("p",{className:"text-gray-500",children:"Purchase order not found"}),(0,m.jsxs)(i.N_,{to:"/admin/purchase-orders",className:"mt-4 inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,m.jsx)(x.kRp,{className:"mr-2",size:16}),"Back to Purchase Orders"]})]})}}}]);
//# sourceMappingURL=452.0058a331.chunk.js.map