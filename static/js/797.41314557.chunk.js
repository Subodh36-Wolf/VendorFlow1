"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[797],{4797:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var a=t(5043),r=t(3216),i=t(5475),l=t(5472),d=t(791),n=t(3505),c=t(5772),x=t(579);function m(){var e,s,t,m,o;const{id:h}=(0,r.g)(),g=(0,r.Zp)(),{showError:p}=(0,n.hN)(),[j,N]=(0,a.useState)(null),[u,y]=(0,a.useState)([]),[v,f]=(0,a.useState)([]),[b,w]=(0,a.useState)(!0),[A,P]=(0,a.useState)({totalPOs:0,totalJobs:0,totalSpend:0,completedJobs:0,pendingPOs:0});(0,a.useEffect)(()=>{S()},[h]);const S=async()=>{try{w(!0);const e=await(0,l.x7)((0,l.H9)(d.db,"vendors",h));if(!e.exists())return p("Vendor not found"),void g("/admin/vendors");const s={id:e.id,...e.data()};N(s);const t=(0,l.P)((0,l.rJ)(d.db,"purchaseOrders"),(0,l._M)("vendorId","==",h)),a=await(0,l.GG)(t),r=[];a.forEach(e=>{r.push({id:e.id,...e.data()})}),y(r);const i=(0,l.P)((0,l.rJ)(d.db,"jobAssignments"),(0,l._M)("vendorId","==",h)),n=await(0,l.GG)(i),c=[];n.forEach(e=>{c.push({id:e.id,...e.data()})}),f(c);const x=r.reduce((e,s)=>e+(parseFloat(s.totalAmount)||0),0),m=c.filter(e=>"completed"===e.status).length,o=r.filter(e=>"pending"===e.status).length;P({totalPOs:r.length,totalJobs:c.length,totalSpend:x,completedJobs:m,pendingPOs:o})}catch(e){console.error("Error fetching vendor details:",e),p("Failed to load vendor details")}finally{w(!1)}},k=e=>{switch(e){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};return b?(0,x.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,x.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):j?(0,x.jsxs)("div",{className:"max-w-7xl mx-auto space-y-6",children:[(0,x.jsxs)("div",{className:"flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,x.jsxs)("button",{onClick:()=>g("/admin/vendors"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[(0,x.jsx)(c.kRp,{className:"mr-2",size:20}),"Back to Vendors"]}),(0,x.jsxs)("div",{children:[(0,x.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:j.name}),(0,x.jsx)("p",{className:"text-gray-600",children:"Vendor Details & Analytics"})]})]}),(0,x.jsxs)("div",{className:"flex space-x-3",children:[(0,x.jsxs)(i.N_,{to:`/admin/create-po?vendorId=${j.id}`,className:"inline-flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[(0,x.jsx)(c.GGD,{className:"mr-2",size:16}),"Create PO"]}),(0,x.jsxs)(i.N_,{to:`/admin/edit-vendor/${j.id}`,className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,x.jsx)(c.WXf,{className:"mr-2",size:16}),"Edit Vendor"]})]})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-6",children:[(0,x.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)(c.jH2,{className:"h-8 w-8 text-blue-600"})}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total POs"}),(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:A.totalPOs})]})]})}),(0,x.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)(c.Ohp,{className:"h-8 w-8 text-yellow-600"})}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Pending POs"}),(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:A.pendingPOs})]})]})}),(0,x.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)(c.hht,{className:"h-8 w-8 text-purple-600"})}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Jobs"}),(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:A.totalJobs})]})]})}),(0,x.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)(c.A3x,{className:"h-8 w-8 text-green-600"})}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Completed Jobs"}),(0,x.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:A.completedJobs})]})]})}),(0,x.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"flex-shrink-0",children:(0,x.jsx)(c.z8N,{className:"h-8 w-8 text-indigo-600"})}),(0,x.jsxs)("div",{className:"ml-4",children:[(0,x.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Spend"}),(0,x.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",A.totalSpend.toLocaleString()]})]})]})})]}),(0,x.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,x.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vendor Information"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.JXP,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Vendor Name"}),(0,x.jsx)("p",{className:"text-gray-900",children:j.name})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.cnX,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Category"}),(0,x.jsx)("p",{className:"text-gray-900",children:j.category||"N/A"})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)("div",{className:"mr-3",children:(e=>{switch(e){case"active":return(0,x.jsx)(c.A3x,{className:"text-green-500"});case"inactive":return(0,x.jsx)(c.y3G,{className:"text-red-500"});case"pending":return(0,x.jsx)(c.Ohp,{className:"text-yellow-500"});default:return(0,x.jsx)(c.y3G,{className:"text-gray-500"})}})(j.status)}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,x.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(j.status)}`,children:(null===(e=j.status)||void 0===e?void 0:e.charAt(0).toUpperCase())+(null===(s=j.status)||void 0===s?void 0:s.slice(1))})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.wIk,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Created Date"}),(0,x.jsx)("p",{className:"text-gray-900",children:(null===(t=j.createdAt)||void 0===t||null===(m=t.toDate)||void 0===m||null===(o=m.call(t))||void 0===o?void 0:o.toLocaleDateString())||"N/A"})]})]})]})]}),(0,x.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),(0,x.jsxs)("div",{className:"space-y-4",children:[(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.pHD,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),(0,x.jsx)("a",{href:`mailto:${j.email}`,className:"text-indigo-600 hover:text-indigo-800",children:j.email})]})]}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.QFc,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Phone"}),(0,x.jsx)("a",{href:`tel:${j.phone}`,className:"text-indigo-600 hover:text-indigo-800",children:j.phone})]})]}),(0,x.jsxs)("div",{className:"flex items-start",children:[(0,x.jsx)(c.HzC,{className:"text-gray-400 mr-3 mt-1",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Address"}),(0,x.jsx)("p",{className:"text-gray-900",children:j.address||"N/A"})]})]}),j.website&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.VeH,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Website"}),(0,x.jsx)("a",{href:j.website,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:text-indigo-800",children:j.website})]})]}),j.contactPerson&&(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsx)(c.cfS,{className:"text-gray-400 mr-3",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Contact Person"}),(0,x.jsx)("p",{className:"text-gray-900",children:j.contactPerson})]})]}),j.services&&j.services.length>0&&(0,x.jsxs)("div",{className:"flex items-start",children:[(0,x.jsx)(c.ydS,{className:"text-gray-400 mr-3 mt-1",size:20}),(0,x.jsxs)("div",{children:[(0,x.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Services"}),(0,x.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:j.services.map((e,s)=>(0,x.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full",children:e},s))})]})]})]})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Purchase Orders"}),(0,x.jsx)(i.N_,{to:`/admin/purchase-orders?vendor=${j.id}`,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View All POs"})]})}),(0,x.jsxs)("div",{className:"overflow-x-auto",children:[(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,x.jsx)("thead",{className:"bg-gray-50",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PO Number"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Operation"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"})]})}),(0,x.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:u.slice(0,5).map(e=>{var s,t,a,r,l;return(0,x.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)(i.N_,{to:`/admin/po-details/${e.id}`,className:"text-indigo-600 hover:text-indigo-900 font-medium",children:e.poNumber})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800",children:e.operation})}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",parseFloat(e.totalAmount||0).toLocaleString()]}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(e.status)}`,children:(null===(s=e.status)||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===(t=e.status)||void 0===t?void 0:t.slice(1))})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(null===(a=e.createdAt)||void 0===a||null===(r=a.toDate)||void 0===r||null===(l=r.call(a))||void 0===l?void 0:l.toLocaleDateString())||"N/A"})]},e.id)})})]}),0===u.length&&(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsx)(c.jH2,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,x.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No purchase orders"}),(0,x.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No purchase orders found for this vendor."})]})]})]}),(0,x.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:[(0,x.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,x.jsxs)("div",{className:"flex justify-between items-center",children:[(0,x.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Job Assignments"}),(0,x.jsx)(i.N_,{to:`/admin/job-assignments?vendor=${j.id}`,className:"text-indigo-600 hover:text-indigo-800 text-sm font-medium",children:"View All Jobs"})]})}),(0,x.jsxs)("div",{className:"overflow-x-auto",children:[(0,x.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,x.jsx)("thead",{className:"bg-gray-50",children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Job Title"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Priority"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Budget"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),(0,x.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Deadline"})]})}),(0,x.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:v.slice(0,5).map(e=>{var s,t,a,r;return(0,x.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.jobTitle})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("high"===e.priority?"bg-red-100 text-red-800":"medium"===e.priority?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"),children:(null===(s=e.priority)||void 0===s?void 0:s.charAt(0).toUpperCase())+(null===(t=e.priority)||void 0===t?void 0:t.slice(1))})}),(0,x.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",parseFloat(e.budget||0).toLocaleString()]}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,x.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k(e.status)}`,children:(null===(a=e.status)||void 0===a?void 0:a.charAt(0).toUpperCase())+(null===(r=e.status)||void 0===r?void 0:r.slice(1))})}),(0,x.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.deadline?new Date(e.deadline).toLocaleDateString():"N/A"})]},e.id)})})]}),0===v.length&&(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsx)(c.hht,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,x.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No job assignments"}),(0,x.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"No job assignments found for this vendor."})]})]})]})]}):(0,x.jsxs)("div",{className:"text-center py-8",children:[(0,x.jsx)("p",{className:"text-gray-500",children:"Vendor not found"}),(0,x.jsxs)(i.N_,{to:"/admin/vendors",className:"mt-4 inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:[(0,x.jsx)(c.kRp,{className:"mr-2",size:16}),"Back to Vendors"]})]})}}}]);
//# sourceMappingURL=797.41314557.chunk.js.map