"use strict";(self.webpackChunkvendor_management_system=self.webpackChunkvendor_management_system||[]).push([[660],{9369:(e,t,r)=>{r.d(t,{B8:()=>o,G8:()=>u,KN:()=>c,Oh:()=>p,Zz:()=>m,uM:()=>h,vb:()=>x});var s=r(5472),a=r(791);const i="purchaseOrders",n="poActivity";function o(e){var t;const r=Array.isArray(e.items)?e.items:[],s=Array.isArray(e.operations)?e.operations.filter(Boolean):e.operation?[String(e.operation)]:[],a=r.map(e=>{var t,r;const s=Number(e.quantity)||0,a=Number(null!==(t=e.unitPrice)&&void 0!==t?t:e.rate)||0;return{description:String(e.description||"").trim(),quantity:s,unitPrice:a,amount:Number(null!==(r=e.amount)&&void 0!==r?r:s*a).toFixed?Number((s*a).toFixed(2)):s*a,unit:String(e.unit||"pcs"),specifications:String(e.specifications||""),deliveryDate:e.deliveryDate||"",itemId:e.itemId||null,operation:e.operation||null}}),i=a.reduce((e,t)=>e+(Number(t.amount)||0),0),n=Number(e.discountAmount||0),o=i-n,d=Number(e.taxRate||0),l=o*d/100;let c=o+l;const u=Boolean(e.roundOffEnabled);let x=Number(e.roundOffValue||0);if(u){const e=Math.round(c);x=Number((e-c).toFixed(2)),c=e}const m=s.reduce((t,r)=>(t[String(r)]=e.operationsStatus&&e.operationsStatus[r]||"pending",t),{}),p=s.reduce((t,r)=>{const s=e.operationsMeta&&e.operationsMeta[r]||{};return t[String(r)]={status:m[String(r)]||"pending",notes:s.notes||"",updatedAt:s.updatedAt||null,updatedBy:s.updatedBy||null,startedAt:s.startedAt||null,completedAt:s.completedAt||null},t},{});return{vendorId:String(e.vendorId||"").trim(),operation:s[0]?String(s[0]).trim():"",operations:s,operationsStatus:m,operationsMeta:p,description:String(e.description||""),deliveryDate:e.deliveryDate?e.deliveryDate instanceof Date?e.deliveryDate:new Date(e.deliveryDate):null,priority:e.priority||"medium",status:e.status||"pending",paymentTerms:String(null!==(t=e.paymentTerms)&&void 0!==t?t:"30"),shippingAddress:String(e.shippingAddress||""),billingAddress:String(e.billingAddress||""),currency:e.currency||"INR",invoiceDate:e.invoiceDate||null,dueDate:e.dueDate||null,stateOfSupply:String(e.stateOfSupply||""),taxRate:d,discountAmount:n,items:a,totalAmount:Number(i.toFixed(2)),taxAmount:Number(l.toFixed(2)),finalAmount:Number(c.toFixed(2)),roundOffEnabled:u,roundOffValue:x,specifications:String(e.specifications||""),qualityRequirements:String(e.qualityRequirements||""),expectedDeliveryDays:Number(e.expectedDeliveryDays||0)||0,warrantPeriod:String(e.warrantPeriod||""),terms:String(e.terms||""),poNumber:e.poNumber||null}}function d(e){const t=e.data()||{};return{id:e.id,...t}}async function l(e,t,r){try{await(0,s.gS)((0,s.rJ)(a.db,n),{poId:e,action:t,details:r||{},timestamp:(0,s.O5)()})}catch(i){}}async function c(e){const t=await(0,s.x7)((0,s.H9)(a.db,i,e));return t.exists()?d(t):null}async function u(e){const t=o(e),r=(0,s.O5)(),n=await(0,s.gS)((0,s.rJ)(a.db,i),{...t,createdAt:r,updatedAt:r});return await l(n.id,"create",{vendorId:t.vendorId,amount:t.finalAmount}),{id:n.id,...t}}async function x(e,t){const r=o(t);await(0,s.mZ)((0,s.H9)(a.db,i,e),{...r,updatedAt:(0,s.O5)()}),await l(e,"update",{status:r.status})}async function m(e){await(0,s.kd)((0,s.H9)(a.db,i,e)),await l(e,"delete")}async function p(e,t){const r=(0,s.wP)(a.db);e.forEach(e=>r.update((0,s.H9)(a.db,i,e),{...t,updatedAt:(0,s.O5)()})),await r.commit();for(const s of e)l(s,"bulk_update",{fields:t})}async function h(e){const t=(0,s.wP)(a.db);e.forEach(e=>t.delete((0,s.H9)(a.db,i,e))),await t.commit();for(const r of e)l(r,"bulk_delete")}},9660:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var s=r(5043),a=r(5475),i=r(5472),n=r(791),o=r(9369),d=r(3505),l=r(5772),c=r(579);function u(){const{showSuccess:e,showError:t}=(0,d.hN)(),[r,u]=(0,s.useState)([]),[x,m]=(0,s.useState)([]),[p,h]=(0,s.useState)(!0),[g,v]=(0,s.useState)(""),[y,f]=(0,s.useState)("all"),[b,j]=(0,s.useState)("all"),[N,w]=(0,s.useState)("all"),[A,S]=(0,s.useState)({start:"",end:""}),[D,O]=(0,s.useState)("createdAt"),[k,C]=(0,s.useState)("desc"),[P,L]=(0,s.useState)([]),[z,F]=(0,s.useState)(!1),[R,E]=(0,s.useState)(!1),[I,V]=(0,s.useState)(!1);(0,s.useEffect)(()=>{G()},[]);const G=async()=>{try{const[e,t]=await Promise.all([(0,i.GG)((0,i.rJ)(n.db,"purchaseOrders")),(0,i.GG)((0,i.rJ)(n.db,"vendors"))]),r=[];e.forEach(e=>{r.push({id:e.id,...e.data()})});const s=[];t.forEach(e=>{s.push({id:e.id,...e.data()})}),u(r),m(s)}catch(e){console.error("Error fetching data:",e),t("Failed to load purchase orders")}finally{h(!1)}},H=async(s,a)=>{try{await(0,o.Oh)([s],{status:a}),u(r.map(e=>e.id===s?{...e,status:a}:e)),e(`Purchase order ${a} successfully`)}catch(i){console.error("Error updating PO status:",i),t("Failed to update purchase order status")}},M=e=>{const t=x.find(t=>t.id===e);return t?t.name:"Unknown Vendor"},_=async s=>{if(0!==P.length)try{E(!0),await(0,o.Oh)(P,{status:s}),u(r.map(e=>P.includes(e.id)?{...e,status:s}:e)),L([]),e(`${P.length} POs updated to ${s}`)}catch(a){console.error("Error updating POs:",a),t("Failed to update POs")}finally{E(!1)}else t("Please select POs to update")},B=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-green-100 text-green-800";case"rejected":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},T=e=>{switch(e){case"low":default:return"bg-gray-100 text-gray-800";case"medium":return"bg-blue-100 text-blue-800";case"high":return"bg-orange-100 text-orange-800";case"urgent":return"bg-red-100 text-red-800"}},q=r.filter(e=>{var t,r;const s=Array.isArray(e.operations)?e.operations:e.operation?[e.operation]:[],a=(null===(t=e.poNumber)||void 0===t?void 0:t.toLowerCase().includes(g.toLowerCase()))||M(e.vendorId).toLowerCase().includes(g.toLowerCase())||s.join(" ").toLowerCase().includes(g.toLowerCase())||(null===(r=e.description)||void 0===r?void 0:r.toLowerCase().includes(g.toLowerCase())),i="all"===y||e.status===y,n="all"===b||s.includes(b),o="all"===N||e.priority===N;let d=!0;if(A.start||A.end){var l,c;const t=null===(l=e.createdAt)||void 0===l||null===(c=l.toDate)||void 0===c?void 0:c.call(l);t&&(A.start&&new Date(A.start)>t&&(d=!1),A.end&&new Date(A.end)<t&&(d=!1))}return a&&i&&n&&o&&d}).sort((e,t)=>{var r,s,a,i;let n,o;switch(D){case"poNumber":n=e.poNumber||"",o=t.poNumber||"";break;case"vendor":n=M(e.vendorId),o=M(t.vendorId);break;case"amount":n=parseFloat(e.finalAmount||e.totalAmount||0),o=parseFloat(t.finalAmount||t.totalAmount||0);break;default:n=(null===(r=e.createdAt)||void 0===r||null===(s=r.toDate)||void 0===s?void 0:s.call(r))||new Date(0),o=(null===(a=t.createdAt)||void 0===a||null===(i=a.toDate)||void 0===i?void 0:i.call(a))||new Date(0)}return"asc"===k?n>o?1:-1:n<o?1:-1});r.length,r.filter(e=>"pending"===e.status).length,r.filter(e=>"approved"===e.status).length,r.filter(e=>"completed"===e.status).length,r.reduce((e,t)=>e+parseFloat(t.finalAmount||t.totalAmount||0),0);return p?(0,c.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,c.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):(0,c.jsxs)("div",{className:"space-y-6",children:[(0,c.jsx)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:(0,c.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center",children:(0,c.jsx)(l.jH2,{className:"text-white",size:20})}),(0,c.jsxs)("div",{children:[(0,c.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Purchase Orders"}),(0,c.jsx)("p",{className:"text-gray-600",children:"Manage purchase orders for vendor operations"})]})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,c.jsx)("button",{onClick:()=>G(),className:"inline-flex items-center px-4 py-3 bg-gradient-to-r from-gray-500 to-slate-600 text-white font-medium rounded-xl hover:from-gray-600 hover:to-slate-700 transition-all duration-200 shadow-sm hover:shadow-md",title:"Refresh",children:(0,c.jsx)(l.jTZ,{size:16})}),(0,c.jsxs)("button",{onClick:()=>{const e=q.map(e=>{var t,r,s,a,i,n;const o=Array.isArray(e.operations)?e.operations:e.operation?[e.operation]:[];return{"PO Number":e.poNumber,Vendor:M(e.vendorId),Operations:o.join(" | "),Amount:e.finalAmount||e.totalAmount,Status:e.status,Priority:e.priority,"Created Date":(null===(t=e.createdAt)||void 0===t||null===(r=t.toDate)||void 0===r||null===(s=r.call(t))||void 0===s?void 0:s.toLocaleDateString())||"N/A","Delivery Date":(null===(a=e.deliveryDate)||void 0===a||null===(i=a.toDate)||void 0===i||null===(n=i.call(a))||void 0===n?void 0:n.toLocaleDateString())||"N/A"}}),t=[Object.keys(e[0]).join(","),...e.map(e=>Object.values(e).join(","))].join("\n"),r=new Blob([t],{type:"text/csv"}),s=window.URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`purchase-orders-${(new Date).toISOString().split("T")[0]}.csv`,a.click(),window.URL.revokeObjectURL(s)},className:"inline-flex items-center px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-medium rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,c.jsx)(l.a4x,{className:"mr-2",size:16}),"Export CSV"]}),(0,c.jsxs)(a.N_,{to:"/admin/create-po",className:"inline-flex items-center px-4 py-3 bg-gradient-to-r from-indigo-500 to-purple-600 text-white font-medium rounded-xl hover:from-indigo-600 hover:to-purple-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[(0,c.jsx)(l.GGD,{className:"mr-2",size:16}),"Create PO"]})]})]})}),(0,c.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,c.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,c.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,c.jsx)(l.K7R,{className:"text-white",size:16})}),(0,c.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Search & Filter"})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)(l.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),(0,c.jsx)("input",{type:"text",placeholder:"Search POs, vendors, operations...",value:g,onChange:e=>v(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400"})]}),(0,c.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400",children:[(0,c.jsx)("option",{value:"all",children:"All Status"}),(0,c.jsx)("option",{value:"pending",children:"Pending"}),(0,c.jsx)("option",{value:"approved",children:"Approved"}),(0,c.jsx)("option",{value:"completed",children:"Completed"}),(0,c.jsx)("option",{value:"rejected",children:"Rejected"})]}),(0,c.jsxs)("select",{value:N,onChange:e=>w(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400",children:[(0,c.jsx)("option",{value:"all",children:"All Priorities"}),(0,c.jsx)("option",{value:"low",children:"Low"}),(0,c.jsx)("option",{value:"medium",children:"Medium"}),(0,c.jsx)("option",{value:"high",children:"High"}),(0,c.jsx)("option",{value:"urgent",children:"Urgent"})]}),(0,c.jsxs)("select",{value:D,onChange:e=>O(e.target.value),className:"px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 hover:border-gray-400",children:[(0,c.jsx)("option",{value:"createdAt",children:"Sort by Date"}),(0,c.jsx)("option",{value:"poNumber",children:"Sort by PO Number"}),(0,c.jsx)("option",{value:"vendor",children:"Sort by Vendor"}),(0,c.jsx)("option",{value:"amount",children:"Sort by Amount"})]}),(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("button",{onClick:()=>C("asc"===k?"desc":"asc"),className:"p-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",title:"Sort "+("asc"===k?"Descending":"Ascending"),children:(0,c.jsx)(l.ARf,{className:"transform transition-transform duration-200 "+("desc"===k?"rotate-180":""),size:16})}),(0,c.jsxs)("button",{onClick:()=>V(!I),className:"inline-flex items-center px-4 py-3 border border-gray-300 rounded-xl hover:bg-gray-50 transition-all duration-200",children:[(0,c.jsx)(l.K7R,{className:"mr-2",size:16}),"Advanced"]})]})]}),I&&(0,c.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,c.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,c.jsx)("option",{value:"all",children:"All Operations"}),(0,c.jsx)("option",{value:"HBL",children:"HBL (Horizontal Boring & Lathe)"}),(0,c.jsx)("option",{value:"VTL",children:"VTL (Vertical Turning Lathe)"}),(0,c.jsx)("option",{value:"Drilling",children:"Drilling"}),(0,c.jsx)("option",{value:"VMC",children:"VMC (Vertical Machining Center)"})]}),(0,c.jsx)("div",{children:(0,c.jsx)("input",{type:"date",placeholder:"Start Date",value:A.start,onChange:e=>S(t=>({...t,start:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),(0,c.jsx)("div",{children:(0,c.jsx)("input",{type:"date",placeholder:"End Date",value:A.end,onChange:e=>S(t=>({...t,end:e.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})})]})}),(0,c.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-gray-200",children:[(0,c.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,c.jsx)(l.K7R,{className:"mr-2",size:16}),q.length," of ",r.length," POs",P.length>0&&(0,c.jsxs)("span",{className:"ml-4 text-indigo-600 font-medium",children:[P.length," selected"]})]}),P.length>0&&(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsxs)("button",{onClick:()=>_("approved"),disabled:R,className:"inline-flex items-center px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,c.jsx)(l.A3x,{className:"mr-2",size:16}),"Approve Selected"]}),(0,c.jsxs)("button",{onClick:()=>_("rejected"),disabled:R,className:"inline-flex items-center px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50",children:[(0,c.jsx)(l.q_G,{className:"mr-2",size:16}),"Reject Selected"]}),(0,c.jsxs)("button",{onClick:async()=>{if(0!==P.length){if(window.confirm(`Are you sure you want to delete ${P.length} purchase orders?`))try{E(!0),await(0,o.uM)(P),u(r.filter(e=>!P.includes(e.id))),L([]),e(`${P.length} POs deleted successfully`)}catch(s){console.error("Error deleting POs:",s),t("Failed to delete POs")}finally{E(!1)}}else t("Please select POs to delete")},disabled:R,className:"inline-flex items-center px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:opacity-50",children:[(0,c.jsx)(l.IXo,{className:"mr-2",size:16}),"Delete Selected"]})]})]})]}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,c.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)(l.jH2,{className:"h-8 w-8 text-indigo-600"})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total POs"}),(0,c.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.length})]})]})}),(0,c.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)(l.Ohp,{className:"h-8 w-8 text-yellow-600"})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Pending"}),(0,c.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.filter(e=>"pending"===e.status).length})]})]})}),(0,c.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)(l.A3x,{className:"h-8 w-8 text-green-600"})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Approved"}),(0,c.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:r.filter(e=>"approved"===e.status).length})]})]})}),(0,c.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:(0,c.jsxs)("div",{className:"flex items-center",children:[(0,c.jsx)("div",{className:"flex-shrink-0",children:(0,c.jsx)(l.z8N,{className:"h-8 w-8 text-blue-600"})}),(0,c.jsxs)("div",{className:"ml-4",children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-500",children:"Total Value"}),(0,c.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",r.reduce((e,t)=>e+(parseFloat(t.totalAmount)||0),0).toLocaleString()]})]})]})})]}),(0,c.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{className:"bg-gray-50",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsx)("input",{type:"checkbox",checked:P.length===q.length&&q.length>0,onChange:e=>{return t=e.target.checked,void L(t?q.map(e=>e.id):[]);var t},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PO Details"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Vendor & Operation"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount & Priority"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status & Dates"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:q.map(s=>{var a,i,n;return(0,c.jsxs)("tr",{className:"hover:bg-gray-50 "+(P.includes(s.id)?"bg-indigo-50":""),children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("input",{type:"checkbox",checked:P.includes(s.id),onChange:e=>{return t=s.id,r=e.target.checked,void L(r?[...P,t]:P.filter(e=>e!==t));var t,r},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["PO #",s.poNumber]}),(0,c.jsx)("div",{className:"text-sm text-gray-500",children:s.description}),(0,c.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:null===(a=s.createdAt)||void 0===a||null===(i=a.toDate)||void 0===i||null===(n=i.call(a))||void 0===n?void 0:n.toLocaleDateString()})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{className:"text-sm font-medium text-gray-900",children:M(s.vendorId)}),(0,c.jsx)("div",{className:"text-sm text-gray-500",children:(Array.isArray(s.operations)?s.operations:s.operation?[s.operation]:[]).map(e=>e).join(", ")})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:["\u20b9",parseFloat(s.finalAmount||s.totalAmount||0).toLocaleString()]}),(0,c.jsx)("div",{className:"flex items-center mt-1",children:(0,c.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${T(s.priority)}`,children:s.priority})})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${B(s.status)}`,children:s.status}),s.expectedDeliveryDate&&(0,c.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Due: ",new Date(s.expectedDeliveryDate).toLocaleDateString()]})]})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,c.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,c.jsx)("button",{onClick:()=>H(s.id,"approved"),className:"text-green-600 hover:text-green-900",title:"Approve",children:(0,c.jsx)(l.A3x,{size:16})}),(0,c.jsx)("button",{onClick:()=>H(s.id,"rejected"),className:"text-red-600 hover:text-red-900",title:"Reject",children:(0,c.jsx)(l.q_G,{size:16})}),(0,c.jsx)("button",{onClick:()=>(async s=>{if(window.confirm("Are you sure you want to delete this purchase order?"))try{await(0,o.Zz)(s),u(r.filter(e=>e.id!==s)),e("Purchase order deleted successfully")}catch(a){console.error("Error deleting PO:",a),t("Failed to delete purchase order")}})(s.id),className:"text-red-600 hover:text-red-900",title:"Delete",children:(0,c.jsx)(l.IXo,{size:16})})]})})]},s.id)})})]})}),0===q.length&&(0,c.jsxs)("div",{className:"text-center py-12",children:[(0,c.jsx)(l.jH2,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,c.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No purchase orders"}),(0,c.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new purchase order."}),(0,c.jsx)("div",{className:"mt-6",children:(0,c.jsxs)(a.N_,{to:"/admin/create-po",className:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:[(0,c.jsx)(l.GGD,{className:"mr-2",size:16}),"Create PO"]})})]})]})]})}}}]);
//# sourceMappingURL=660.3b6e81b0.chunk.js.map