{"version":3,"file":"static/js/38.c67197c0.chunk.js","mappings":"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","sources":["components/Admin/ItemList.jsx","services/itemService.js"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport { FiPlus, FiSearch, FiFilter, FiEdit2, FiTrash2, FiRefreshCw } from 'react-icons/fi';\r\nimport { getItemsOrdered, searchItems, bulkDeleteItems } from '../../services/itemService';\r\nimport { useNotification } from './NotificationSystem';\r\n\r\nexport default function ItemList() {\r\n  const { showError, showSuccess } = useNotification();\r\n  const [loading, setLoading] = useState(false);\r\n  const [items, setItems] = useState([]);\r\n  const [query, setQuery] = useState('');\r\n  const [filters, setFilters] = useState({ type: '', category: '', status: '' });\r\n  const [selected, setSelected] = useState([]);\r\n\r\n  useEffect(() => { fetchData(); }, []);\r\n\r\n  const fetchData = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await getItemsOrdered();\r\n      setItems(data);\r\n    } catch (e) {\r\n      console.error(e);\r\n      showError('Failed to load items');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const runSearch = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await searchItems({ text: query, ...filters });\r\n      setItems(data);\r\n    } catch (e) {\r\n      showError('Search failed');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  const toggleSelect = (id) => {\r\n    setSelected((prev) => prev.includes(id) ? prev.filter((x) => x !== id) : [...prev, id]);\r\n  };\r\n\r\n  const handleBulkDelete = async () => {\r\n    if (selected.length === 0) return;\r\n    if (!window.confirm(`Delete ${selected.length} item(s)?`)) return;\r\n    try {\r\n      setLoading(true);\r\n      await bulkDeleteItems(selected);\r\n      showSuccess('Items deleted');\r\n      setSelected([]);\r\n      fetchData();\r\n    } catch (e) {\r\n      showError('Delete failed');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <div className=\"relative\">\r\n            <FiSearch className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n            <input\r\n              className=\"pl-9 pr-3 py-2 border rounded-lg w-64\"\r\n              placeholder=\"Search by name/code/HSN\"\r\n              value={query}\r\n              onChange={(e) => setQuery(e.target.value)}\r\n              onKeyDown={(e) => e.key === 'Enter' && runSearch()}\r\n            />\r\n          </div>\r\n          <select className=\"border rounded-lg px-3 py-2\" value={filters.type} onChange={(e) => setFilters({ ...filters, type: e.target.value })}>\r\n            <option value=\"\">All Types</option>\r\n            <option value=\"product\">Product</option>\r\n            <option value=\"service\">Service</option>\r\n          </select>\r\n          <select className=\"border rounded-lg px-3 py-2\" value={filters.status} onChange={(e) => setFilters({ ...filters, status: e.target.value })}>\r\n            <option value=\"\">All Status</option>\r\n            <option value=\"active\">Active</option>\r\n            <option value=\"inactive\">Inactive</option>\r\n          </select>\r\n          <button onClick={runSearch} className=\"px-3 py-2 border rounded-lg flex items-center space-x-2\"><FiFilter /><span>Filter</span></button>\r\n          <button onClick={fetchData} className=\"px-3 py-2 border rounded-lg flex items-center space-x-2\"><FiRefreshCw /><span>Refresh</span></button>\r\n        </div>\r\n        <Link to=\"/admin/items/new\" className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg flex items-center space-x-2\">\r\n          <FiPlus />\r\n          <span>Add Item</span>\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"bg-white border rounded-lg overflow-hidden\">\r\n        <table className=\"min-w-full\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              <th className=\"p-3 text-left\"><input type=\"checkbox\" onChange={(e) => setSelected(e.target.checked ? items.map(i => i.id) : [])} checked={selected.length>0 && selected.length===items.length} /></th>\r\n              <th className=\"p-3 text-left\">Name</th>\r\n              <th className=\"p-3 text-left\">Type</th>\r\n              <th className=\"p-3 text-left\">Code</th>\r\n              <th className=\"p-3 text-right\">Sale Price</th>\r\n              <th className=\"p-3 text-right\">Tax %</th>\r\n              <th className=\"p-3 text-left\">Status</th>\r\n              <th className=\"p-3 text-right\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {items.map((it) => (\r\n              <tr key={it.id} className=\"border-t\">\r\n                <td className=\"p-3\"><input type=\"checkbox\" checked={selected.includes(it.id)} onChange={() => toggleSelect(it.id)} /></td>\r\n                <td className=\"p-3\">{it.name}</td>\r\n                <td className=\"p-3 capitalize\">{it.type}</td>\r\n                <td className=\"p-3\">{it.code}</td>\r\n                <td className=\"p-3 text-right\">₹{Number(it.pricing?.salePrice || 0).toLocaleString()}</td>\r\n                <td className=\"p-3 text-right\">{Number(it.pricing?.taxRate || 0)}%</td>\r\n                <td className=\"p-3\">{it.status}</td>\r\n                <td className=\"p-3 text-right\">\r\n                  <Link to={`/admin/items/${it.id}/edit`} className=\"inline-flex items-center px-3 py-1 border rounded mr-2\"><FiEdit2 className=\"mr-1\" />Edit</Link>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n            {items.length === 0 && (\r\n              <tr><td className=\"p-6 text-center text-gray-500\" colSpan={8}>No items found</td></tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {selected.length > 0 && (\r\n        <div className=\"flex justify-between items-center bg-yellow-50 border border-yellow-200 p-3 rounded\">\r\n          <span>{selected.length} selected</span>\r\n          <button onClick={handleBulkDelete} className=\"px-3 py-2 bg-red-600 text-white rounded flex items-center\"><FiTrash2 className=\"mr-2\" /> Delete Selected</button>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n\r\n","import { collection, addDoc, getDoc, getDocs, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, where, writeBatch } from 'firebase/firestore';\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage';\r\nimport { db } from '../firebase';\r\nimport { storage } from '../firebase';\r\n\r\nconst ITEMS_COLLECTION = 'items';\r\n\r\nexport function normalizeItemForSave(raw) {\r\n  const numeric = (v) => (v === '' || v === null || v === undefined ? null : Number(v));\r\n  return {\r\n    name: String(raw.name || '').trim(),\r\n    type: raw.type === 'service' ? 'service' : 'product',\r\n    hsn: String(raw.hsn || '').trim(),\r\n    code: String(raw.code || '').trim(),\r\n    unit: String(raw.unit || '').trim(),\r\n    category: String(raw.category || '').trim(),\r\n    imageUrl: String(raw.imageUrl || '').trim(),\r\n    pricing: {\r\n      salePrice: numeric(raw.pricing?.salePrice) ?? 0,\r\n      purchasePrice: numeric(raw.pricing?.purchasePrice) ?? 0,\r\n      discountType: ['percentage', 'flat'].includes(raw.pricing?.discountType) ? raw.pricing.discountType : 'percentage',\r\n      discountValue: numeric(raw.pricing?.discountValue) ?? 0,\r\n      taxRate: numeric(raw.pricing?.taxRate) ?? 0,\r\n      taxMode: ['with_tax', 'without_tax'].includes(raw.pricing?.taxMode) ? raw.pricing.taxMode : 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(raw.stock?.track),\r\n      openingQty: numeric(raw.stock?.openingQty) ?? 0,\r\n      minQty: numeric(raw.stock?.minQty) ?? 0,\r\n      location: String(raw.stock?.location || '').trim(),\r\n    },\r\n    status: raw.status === 'inactive' ? 'inactive' : 'active',\r\n    notes: String(raw.notes || '').trim(),\r\n  };\r\n}\r\n\r\nexport function mapItemFromDoc(docSnap) {\r\n  const d = docSnap.data() || {};\r\n  return {\r\n    id: docSnap.id,\r\n    name: d.name || '',\r\n    type: d.type || 'product',\r\n    hsn: d.hsn || '',\r\n    code: d.code || '',\r\n    unit: d.unit || '',\r\n    category: d.category || '',\r\n    imageUrl: d.imageUrl || '',\r\n    pricing: {\r\n      salePrice: typeof d.pricing?.salePrice === 'number' ? d.pricing.salePrice : Number(d.pricing?.salePrice || 0),\r\n      purchasePrice: typeof d.pricing?.purchasePrice === 'number' ? d.pricing.purchasePrice : Number(d.pricing?.purchasePrice || 0),\r\n      discountType: d.pricing?.discountType || 'percentage',\r\n      discountValue: typeof d.pricing?.discountValue === 'number' ? d.pricing.discountValue : Number(d.pricing?.discountValue || 0),\r\n      taxRate: typeof d.pricing?.taxRate === 'number' ? d.pricing.taxRate : Number(d.pricing?.taxRate || 0),\r\n      taxMode: d.pricing?.taxMode || 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(d.stock?.track),\r\n      openingQty: typeof d.stock?.openingQty === 'number' ? d.stock.openingQty : Number(d.stock?.openingQty || 0),\r\n      minQty: typeof d.stock?.minQty === 'number' ? d.stock.minQty : Number(d.stock?.minQty || 0),\r\n      location: d.stock?.location || '',\r\n    },\r\n    status: d.status || 'active',\r\n    notes: d.notes || '',\r\n    createdAt: d.createdAt,\r\n    updatedAt: d.updatedAt,\r\n  };\r\n}\r\n\r\nexport function validateItem(raw) {\r\n  const errors = {};\r\n  if (!raw.name || String(raw.name).trim().length < 2) errors.name = 'Item name is required';\r\n  if (!raw.unit) errors.unit = 'Unit is required';\r\n  if (raw.pricing && raw.pricing.salePrice < 0) errors.salePrice = 'Sale price must be >= 0';\r\n  if (raw.pricing && raw.pricing.purchasePrice < 0) errors.purchasePrice = 'Purchase price must be >= 0';\r\n  if (raw.pricing && raw.pricing.taxRate < 0) errors.taxRate = 'Tax rate must be >= 0';\r\n  return errors;\r\n}\r\n\r\nexport async function uploadItemImage(file, itemIdHint) {\r\n  const path = `items/${itemIdHint || 'tmp'}_${Date.now()}_${file.name}`;\r\n  const storageRef = ref(storage, path);\r\n  const snap = await uploadBytes(storageRef, file);\r\n  return getDownloadURL(snap.ref);\r\n}\r\n\r\nexport async function createItem(raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  const now = serverTimestamp();\r\n  const ref = await addDoc(collection(db, ITEMS_COLLECTION), { ...data, createdAt: now, updatedAt: now });\r\n  return { id: ref.id, ...data };\r\n}\r\n\r\nexport async function updateItem(id, raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  await updateDoc(doc(db, ITEMS_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\r\n}\r\n\r\nexport async function deleteItem(id) {\r\n  await deleteDoc(doc(db, ITEMS_COLLECTION, id));\r\n}\r\n\r\nexport async function getItemById(id) {\r\n  const snap = await getDoc(doc(db, ITEMS_COLLECTION, id));\r\n  if (!snap.exists()) return null;\r\n  return mapItemFromDoc(snap);\r\n}\r\n\r\nexport async function getItemsOrdered() {\r\n  const q = query(collection(db, ITEMS_COLLECTION), orderBy('createdAt', 'desc'));\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(mapItemFromDoc);\r\n}\r\n\r\nexport async function searchItems({ text, type, category, status }) {\r\n  // Basic fetch and in-memory filter to avoid complex composite indexes\r\n  const snapshot = await getDocs(collection(db, ITEMS_COLLECTION));\r\n  let items = snapshot.docs.map(mapItemFromDoc);\r\n  if (text) {\r\n    const t = text.toLowerCase();\r\n    items = items.filter((i) => (i.name || '').toLowerCase().includes(t) || (i.code || '').toLowerCase().includes(t) || (i.hsn || '').toLowerCase().includes(t));\r\n  }\r\n  if (type) items = items.filter((i) => i.type === type);\r\n  if (category) items = items.filter((i) => i.category === category);\r\n  if (status) items = items.filter((i) => i.status === status);\r\n  return items;\r\n}\r\n\r\nexport async function bulkDeleteItems(ids) {\r\n  const batch = writeBatch(db);\r\n  ids.forEach((id) => batch.delete(doc(db, ITEMS_COLLECTION, id)));\r\n  await batch.commit();\r\n}\r\n\r\n\r\n"],"names":["ItemList","showError","showSuccess","useNotification","loading","setLoading","useState","items","setItems","query","setQuery","filters","setFilters","type","category","status","selected","setSelected","useEffect","fetchData","async","data","getItemsOrdered","e","console","error","runSearch","searchItems","text","_jsxs","className","children","_jsx","FiSearch","placeholder","value","onChange","target","onKeyDown","key","onClick","FiFilter","FiRefreshCw","Link","to","FiPlus","checked","map","i","id","length","it","_it$pricing","_it$pricing2","includes","toggleSelect","prev","filter","x","name","code","Number","pricing","salePrice","toLocaleString","taxRate","FiEdit2","colSpan","window","confirm","bulkDeleteItems","FiTrash2","ITEMS_COLLECTION","normalizeItemForSave","raw","_numeric","_raw$pricing","_numeric2","_raw$pricing2","_raw$pricing3","_numeric3","_raw$pricing4","_numeric4","_raw$pricing5","_raw$pricing6","_raw$stock","_numeric5","_raw$stock2","_numeric6","_raw$stock3","_raw$stock4","numeric","v","undefined","String","trim","hsn","unit","imageUrl","purchasePrice","discountType","discountValue","taxMode","stock","track","Boolean","openingQty","minQty","location","notes","mapItemFromDoc","docSnap","_d$pricing","_d$pricing2","_d$pricing3","_d$pricing4","_d$pricing5","_d$pricing6","_d$pricing7","_d$pricing8","_d$pricing9","_d$pricing0","_d$stock","_d$stock2","_d$stock3","_d$stock4","_d$stock5","_d$stock6","d","createdAt","updatedAt","validateItem","errors","uploadItemImage","file","itemIdHint","path","Date","now","storageRef","ref","storage","snap","uploadBytes","getDownloadURL","createItem","Object","keys","err","Error","details","serverTimestamp","addDoc","collection","db","updateItem","updateDoc","doc","getItemById","getDoc","exists","q","orderBy","getDocs","docs","_ref","t","toLowerCase","ids","batch","writeBatch","forEach","delete","commit"],"sourceRoot":""}