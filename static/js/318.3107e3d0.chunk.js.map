{"version":3,"file":"static/js/318.3107e3d0.chunk.js","mappings":"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","sources":["services/deliveryChallanService.js","components/Admin/DeliveryChallanForm.jsx","services/itemService.js"],"sourcesContent":["import { collection, addDoc, getDocs, getDoc, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, writeBatch } from 'firebase/firestore';\r\nimport { db } from '../firebase';\r\n\r\nconst DC_COLLECTION = 'deliveryChallans';\r\nconst DC_ACTIVITY_COLLECTION = 'dcActivity';\r\n\r\nexport function normalizeChallanForSave(raw) {\r\n\tconst items = Array.isArray(raw.items) ? raw.items : [];\r\n\tconst safeItems = items.map((it) => {\r\n\t\tconst quantity = Number(it.quantity) || 0;\r\n\t\tconst price = Number(it.price) || 0;\r\n\t\treturn {\r\n\t\t\tdescription: String(it.description || '').trim(),\r\n\t\t\thsnCode: String(it.hsnCode || ''),\r\n\t\t\tquantity,\r\n\t\t\tunit: String(it.unit || 'Nos'),\r\n\t\t\tprice,\r\n\t\t\tamount: Number((quantity * price).toFixed(2)),\r\n\t\t\titemId: it.itemId || null,\r\n\t\t};\r\n\t});\r\n\r\n\tconst totalAmount = safeItems.reduce((sum, it) => sum + (Number(it.amount) || 0), 0);\r\n\tconst totalQuantity = safeItems.reduce((sum, it) => sum + (Number(it.quantity) || 0), 0);\r\n\r\n\treturn {\r\n\t\tchallanNumber: String(raw.challanNumber || '').trim(),\r\n\t\tdate: raw.date || new Date().toISOString().split('T')[0],\r\n\t\tpoId: raw.poId ? String(raw.poId) : null,\r\n\t\tpoNumber: raw.poNumber ? String(raw.poNumber) : (raw.reference ? String(raw.reference) : ''),\r\n\t\tvendorId: String(raw.vendorId || '').trim(),\r\n\t\tvendorName: String(raw.vendorName || ''),\r\n\t\tvendorAddress: String(raw.vendorAddress || ''),\r\n\t\treference: String(raw.reference || ''),\r\n\t\tvehicleNo: String(raw.vehicleNo || ''),\r\n\t\tdriverName: String(raw.driverName || ''),\r\n\t\tremarks: String(raw.remarks || ''),\r\n\t\titems: safeItems,\r\n\t\ttotalAmount: Number(totalAmount.toFixed(2)),\r\n\t\ttotalQuantity,\r\n\t\tamountInWords: String(raw.amountInWords || ''),\r\n\t};\r\n}\r\n\r\nexport function mapChallanFromDoc(docSnap) {\r\n\treturn { id: docSnap.id, ...docSnap.data() };\r\n}\r\n\r\nasync function logActivity(dcId, action, details) {\r\n\ttry {\r\n\t\tawait addDoc(collection(db, DC_ACTIVITY_COLLECTION), { dcId, action, details: details || {}, timestamp: serverTimestamp() });\r\n\t} catch (_) {}\r\n}\r\n\r\nexport async function getChallansOrdered() {\r\n\tconst q = query(collection(db, DC_COLLECTION), orderBy('createdAt', 'desc'));\r\n\tconst snap = await getDocs(q);\r\n\treturn snap.docs.map(mapChallanFromDoc);\r\n}\r\n\r\nexport async function getChallanById(id) {\r\n\tconst snap = await getDoc(doc(db, DC_COLLECTION, id));\r\n\tif (!snap.exists()) return null;\r\n\treturn mapChallanFromDoc(snap);\r\n}\r\n\r\nexport async function createChallan(raw) {\r\n\tconst data = normalizeChallanForSave(raw);\r\n\tconst now = serverTimestamp();\r\n\tconst ref = await addDoc(collection(db, DC_COLLECTION), { ...data, createdAt: now, updatedAt: now });\r\n\tawait logActivity(ref.id, 'create', { vendorId: data.vendorId, totalAmount: data.totalAmount });\r\n\treturn { id: ref.id, ...data };\r\n}\r\n\r\nexport async function updateChallan(id, raw) {\r\n\tconst data = normalizeChallanForSave(raw);\r\n\tawait updateDoc(doc(db, DC_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\r\n\tawait logActivity(id, 'update');\r\n}\r\n\r\nexport async function deleteChallan(id) {\r\n\tawait deleteDoc(doc(db, DC_COLLECTION, id));\r\n\tawait logActivity(id, 'delete');\r\n}\r\n\r\nexport async function bulkDeleteChallans(ids) {\r\n\tconst batch = writeBatch(db);\r\n\tids.forEach((id) => batch.delete(doc(db, DC_COLLECTION, id)));\r\n\tawait batch.commit();\r\n\tfor (const id of ids) logActivity(id, 'bulk_delete');\r\n}\r\n","import { useEffect, useState, useCallback } from 'react';\nimport { useNavigate, useParams } from 'react-router-dom';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../../firebase';\nimport { createChallan, getChallanById, updateChallan, normalizeChallanForSave } from '../../services/deliveryChallanService';\nimport { getItemsOrdered } from '../../services/itemService';\nimport { useNotification } from './NotificationSystem';\nimport { \n  FiArrowLeft, FiSave, FiPlus, FiTrash2, FiFileText, FiUser, FiTruck, \n  FiPackage, FiCalendar, FiMapPin, FiDollarSign, FiEye, FiPrinter, \n  FiDownload, FiCheck, FiAlertCircle, FiInfo, FiPercent, FiMinus\n} from 'react-icons/fi';\n\nexport default function DeliveryChallanForm() {\n  const navigate = useNavigate();\n  const { id } = useParams();\n  const isEditMode = Boolean(id);\n  const { showSuccess, showError } = useNotification();\n\n  const [loading, setLoading] = useState(false);\n  const [vendors, setVendors] = useState([]);\n  const [masterItems, setMasterItems] = useState([]);\n  const [formData, setFormData] = useState({\n    challanNumber: '',\n    date: new Date().toISOString().split('T')[0],\n    invoiceDate: new Date().toISOString().split('T')[0],\n    dueDate: new Date().toISOString().split('T')[0],\n    stateOfSupply: '',\n    vendorId: '',\n    vendorName: '',\n    vendorAddress: '',\n    reference: '',\n    vehicleNo: '',\n    driverName: '',\n    remarks: '',\n    items: [\n      { id: Date.now(), description: '', hsnCode: '', quantity: 1, unit: 'Nos', price: 0, amount: 0 }\n    ],\n    discountType: 'amount', // 'amount' or 'percentage'\n    discountValue: 0,\n    taxRate: 0,\n    taxAmount: 0,\n    subtotal: 0,\n    finalAmount: 0,\n    roundOffEnabled: true,\n    roundOffValue: 0,\n    paymentType: 'Cash',\n    approvalRequired: false,\n  });\n\n  // Calculate totals whenever items or discount/tax changes\n  useEffect(() => {\n    calculateTotals();\n  }, [formData.items, formData.discountType, formData.discountValue, formData.taxRate]);\n\n  const calculateTotals = useCallback(() => {\n    // Calculate subtotal from all items\n    const subtotal = formData.items.reduce((sum, item) => {\n      return sum + (Number(item.amount) || 0);\n    }, 0);\n    \n    // Calculate discount\n    let discountAmount = 0;\n    if (formData.discountType === 'percentage') {\n      discountAmount = (subtotal * (formData.discountValue || 0)) / 100;\n    } else {\n      discountAmount = Number(formData.discountValue) || 0;\n    }\n    \n    // Calculate taxable amount\n    const taxableAmount = Math.max(0, subtotal - discountAmount);\n    \n    // Calculate tax\n    const taxAmount = (taxableAmount * (formData.taxRate || 0)) / 100;\n    \n    // Calculate final amount\n    let finalAmount = taxableAmount + taxAmount;\n    \n    // Apply round off if enabled\n    let roundOffValue = 0;\n    if (formData.roundOffEnabled) {\n      roundOffValue = Math.round(finalAmount) - finalAmount;\n      finalAmount = Math.round(finalAmount);\n    }\n    \n    setFormData(prev => ({\n      ...prev,\n      subtotal,\n      discountAmount,\n      taxAmount,\n      finalAmount,\n      roundOffValue\n    }));\n  }, [formData.items, formData.discountType, formData.discountValue, formData.taxRate, formData.roundOffEnabled]);\n\n  useEffect(() => {\n    fetchVendors();\n    fetchItems();\n    if (isEditMode) {\n      fetchChallan();\n    }\n  }, [id]);\n\n  const fetchVendors = async () => {\n    try {\n      const snap = await getDocs(collection(db, 'vendors'));\n      const list = snap.docs.map(d => ({ id: d.id, ...d.data() }));\n      setVendors(list);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const fetchItems = async () => {\n    try {\n      const items = await getItemsOrdered();\n      setMasterItems(items);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  const fetchChallan = async () => {\n    try {\n      const data = await getChallanById(id);\n      if (data) {\n        // Normalize items to ensure controlled inputs and stable keys\n        const normalizedItems = Array.isArray(data.items) && data.items.length > 0\n          ? data.items.map((it, idx) => ({\n              id: it.id ?? (Date.now() + idx),\n              description: it.description ?? '',\n              hsnCode: it.hsnCode ?? '',\n              quantity: typeof it.quantity === 'number' ? it.quantity : Number(it.quantity) || 0,\n              unit: it.unit ?? 'Nos',\n              price: typeof it.price === 'number' ? it.price : Number(it.price) || 0,\n              discountPercent: typeof it.discountPercent === 'number' ? it.discountPercent : Number(it.discountPercent) || 0,\n              discountAmount: typeof it.discountAmount === 'number' ? it.discountAmount : Number(it.discountAmount) || 0,\n              taxRate: typeof it.taxRate === 'number' ? it.taxRate : Number(it.taxRate) || 0,\n              taxAmount: typeof it.taxAmount === 'number' ? it.taxAmount : Number(it.taxAmount) || 0,\n              amount: typeof it.amount === 'number' ? it.amount : Number(it.amount) || 0,\n              itemId: it.itemId ?? '',\n            }))\n          : [{ id: Date.now(), description: '', hsnCode: '', quantity: 1, unit: 'Nos', price: 0, amount: 0 }];\n\n        setFormData(prev => ({\n          ...prev,\n          challanNumber: data.challanNumber ?? prev.challanNumber,\n          date: data.date ?? prev.date,\n          invoiceDate: data.invoiceDate ?? prev.invoiceDate,\n          dueDate: data.dueDate ?? prev.dueDate,\n          stateOfSupply: data.stateOfSupply ?? prev.stateOfSupply,\n          vendorId: data.vendorId ?? prev.vendorId,\n          vendorName: data.vendorName ?? prev.vendorName,\n          vendorAddress: data.vendorAddress ?? prev.vendorAddress,\n          reference: data.reference ?? prev.reference,\n          vehicleNo: data.vehicleNo ?? prev.vehicleNo,\n          driverName: data.driverName ?? prev.driverName,\n          remarks: data.remarks ?? prev.remarks,\n          items: normalizedItems,\n          discountType: data.discountType ?? prev.discountType,\n          discountValue: typeof data.discountValue === 'number' ? data.discountValue : Number(data.discountValue) || prev.discountValue,\n          taxRate: typeof data.taxRate === 'number' ? data.taxRate : Number(data.taxRate) || prev.taxRate,\n          taxAmount: typeof data.taxAmount === 'number' ? data.taxAmount : Number(data.taxAmount) || prev.taxAmount,\n          subtotal: typeof data.subtotal === 'number' ? data.subtotal : Number(data.subtotal) || prev.subtotal,\n          finalAmount: typeof data.finalAmount === 'number' ? data.finalAmount : Number(data.finalAmount) || prev.finalAmount,\n          roundOffEnabled: typeof data.roundOffEnabled === 'boolean' ? data.roundOffEnabled : prev.roundOffEnabled,\n          roundOffValue: typeof data.roundOffValue === 'number' ? data.roundOffValue : Number(data.roundOffValue) || prev.roundOffValue,\n          paymentType: data.paymentType ?? prev.paymentType,\n          approvalRequired: typeof data.approvalRequired === 'boolean' ? data.approvalRequired : prev.approvalRequired,\n        }));\n      }\n    } catch (e) {\n      console.error('Failed to load challan', e);\n      showError('Failed to load challan');\n    }\n  };\n\n  const handleChange = (field, value) => {\n    if (field === 'vendorId') {\n      const selected = vendors.find(v => v.id === value);\n      setFormData(prev => ({\n        ...prev,\n        vendorId: value,\n        vendorName: selected?.name || prev.vendorName,\n        vendorAddress: selected?.address || prev.vendorAddress\n      }));\n      return;\n    }\n    setFormData(prev => ({ ...prev, [field]: value }));\n  };\n\n  const handleInputChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    const numericFields = new Set(['discountValue', 'taxRate', 'roundOffValue']);\n    const nextValue = type === 'checkbox' ? checked : (numericFields.has(name) ? Number(value) : value);\n    setFormData(prev => ({\n      ...prev,\n      [name]: nextValue\n    }));\n  };\n\n  const recalcItem = (raw) => {\n    const item = { ...raw };\n    const qty = Math.max(0, Number(item.quantity) || 0);\n    const unitPrice = Math.max(0, Number(item.price) || 0);\n    \n    // Calculate base amount\n    const baseAmount = qty * unitPrice;\n    \n    // Calculate discount if percentage is provided\n    let discountAmount = Number(item.discountAmount) || 0;\n    if (item.discountPercent > 0) {\n      discountAmount = (baseAmount * item.discountPercent) / 100;\n    }\n    \n    // Amount after discount\n    const amountAfterDiscount = Math.max(0, baseAmount - discountAmount);\n    \n    // Calculate tax\n    const taxRate = Number(item.taxRate) || 0;\n    const taxAmount = (amountAfterDiscount * taxRate) / 100;\n    \n    // Final amount for this item\n    const amount = amountAfterDiscount + taxAmount;\n    \n    return {\n      ...item,\n      quantity: qty,\n      price: unitPrice,\n      discountAmount: Number(discountAmount.toFixed(2)),\n      taxAmount: Number(taxAmount.toFixed(2)),\n      amount: Number(amount.toFixed(2))\n    };\n  };\n\n  const handleItemChange = (index, field, value) => {\n    setFormData(prev => {\n      const items = [...prev.items];\n      const updatedItem = { ...items[index], [field]: value };\n      \n      // If quantity or price changes, recalculate the item\n      if (field === 'quantity' || field === 'price') {\n        items[index] = recalcItem(updatedItem);\n      } else {\n        items[index] = updatedItem;\n      }\n      \n      return { ...prev, items };\n    });\n  };\n\n  const handleSelectMasterItem = (index, itemId) => {\n    const selected = masterItems.find(it => it.id === itemId);\n    if (!selected) {\n      handleItemChange(index, 'itemId', '');\n      return;\n    }\n    \n    setFormData(prev => {\n      const items = [...prev.items];\n      const current = items[index] || {};\n      const quantity = Number(current.quantity) || 1;\n      // Prefer SALE price, fallback to purchase price, then existing\n      const price = (selected?.pricing?.salePrice != null ? Number(selected.pricing.salePrice) : null) \n                 ?? (selected?.pricing?.purchasePrice != null ? Number(selected.pricing.purchasePrice) : null) \n                 ?? (Number(current.price) || 0);\n      \n      items[index] = {\n        ...current,\n        itemId: selected.id,\n        description: selected.name || current.description || '',\n        hsnCode: selected.hsn || current.hsnCode || '',\n        unit: selected.unit || current.unit || 'Nos',\n        price: price,\n        taxRate: (selected?.pricing?.taxRate != null ? Number(selected.pricing.taxRate) : (Number(current.taxRate) || 0))\n      };\n      \n      // Recalculate this item\n      items[index] = recalcItem(items[index]);\n      \n      return { ...prev, items };\n    });\n  };\n\n  const addItem = () => {\n    setFormData(prev => ({\n      ...prev,\n      items: [\n        ...prev.items, \n        { \n          id: Date.now(), \n          description: '', \n          hsnCode: '', \n          quantity: 1, \n          unit: 'Nos', \n          price: 0, \n          discountPercent: 0, \n          discountAmount: 0, \n          taxRate: 0, \n          taxAmount: 0, \n          amount: 0 \n        }\n      ]\n    }));\n  };\n\n  const removeItem = (index) => {\n    if (formData.items.length <= 1) {\n      showError('At least one item is required');\n      return;\n    }\n    \n    setFormData(prev => ({\n      ...prev,\n      items: prev.items.filter((_, i) => i !== index)\n    }));\n  };\n\n  const onSubmit = async (e) => {\n    e.preventDefault();\n    \n    // Validate form\n    if (!formData.challanNumber.trim()) {\n      showError('Challan number is required');\n      return;\n    }\n    \n    if (!formData.vendorId) {\n      showError('Please select a vendor');\n      return;\n    }\n    \n    if (formData.items.some(item => !item.description.trim())) {\n      showError('All items must have a description');\n      return;\n    }\n    \n    try {\n      setLoading(true);\n      const payload = normalizeChallanForSave({\n        ...formData,\n        vendorName: vendors.find(v => v.id === formData.vendorId)?.name || formData.vendorName || '',\n        vendorAddress: vendors.find(v => v.id === formData.vendorId)?.address || formData.vendorAddress || '',\n        amountInWords: numberToIndianWords(formData.finalAmount),\n      });\n      \n      if (isEditMode) {\n        await updateChallan(id, payload);\n        showSuccess('Challan updated successfully');\n      } else {\n        const res = await createChallan(payload);\n        showSuccess('Challan created successfully');\n        navigate(`/admin/challan-details/${res.id}`);\n        return;\n      }\n      navigate('/admin/delivery-challans');\n    } catch (error) {\n      console.error('Save failed', error);\n      showError('Failed to save challan: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Format currency for display\n  const formatCurrency = (value) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    }).format(value);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {/* Header */}\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 mb-8 overflow-hidden\">\n          <div className=\"bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 px-8 py-6\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <button \n                  onClick={() => navigate(-1)} \n                  className=\"p-3 bg-white/20 hover:bg-white/30 rounded-xl transition-all duration-200 backdrop-blur-sm\"\n                >\n                  <FiArrowLeft className=\"text-white\" size={20} />\n                </button>\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm\">\n                    <FiFileText className=\"text-white\" size={24} />\n                  </div>\n                  <div>\n                    <h1 className=\"text-2xl font-bold text-white\">\n                      {isEditMode ? 'Edit Delivery Challan' : 'Create New Delivery Challan'}\n                    </h1>\n                    <p className=\"text-blue-100 text-sm\">\n                      {isEditMode ? 'Update challan details and items' : 'Generate professional delivery challan for your shipments'}\n                    </p>\n                  </div>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2\">\n                  <span className=\"text-white text-sm font-medium\">\n                    {new Date().toLocaleDateString('en-IN', { \n                      day: 'numeric', \n                      month: 'short', \n                      year: 'numeric' \n                    })}\n                  </span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <form onSubmit={onSubmit} className=\"space-y-8\">\n          {/* Primary Details Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center\">\n                  <FiInfo className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Primary Details</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Required Information\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Challan Number *\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.challanNumber} \n                      onChange={e => handleChange('challanNumber', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter challan number\"\n                      required \n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Challan Date *\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.date} \n                      onChange={e => handleChange('date', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      required \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Select Vendor *\n                  </label>\n                  <div className=\"relative\">\n                    <select \n                      value={formData.vendorId} \n                      onChange={e => handleChange('vendorId', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 appearance-none bg-white\"\n                      required\n                    >\n                      <option value=\"\">Choose vendor...</option>\n                      {vendors.map(v => (\n                        <option key={v.id} value={v.id}>{v.name || v.companyName || v.displayName || v.id}</option>\n                      ))}\n                    </select>\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Invoice Date\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.invoiceDate} \n                      onChange={e => handleChange('invoiceDate', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Due Date\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      type=\"date\" \n                      value={formData.dueDate} \n                      onChange={e => handleChange('dueDate', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                    />\n                    <FiCalendar className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    State of Supply\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.stateOfSupply} \n                      onChange={e => handleChange('stateOfSupply', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter state name\"\n                    />\n                    <FiMapPin className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-3 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Reference (PO/Job Number)\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.reference} \n                      onChange={e => handleChange('reference', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter PO or Job reference number\"\n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Party & Billing Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-green-50 to-emerald-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-green-500 to-emerald-600 rounded-lg flex items-center justify-center\">\n                  <FiUser className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Party Information</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Billing Details\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Party Name\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.vendorName} \n                      onChange={e => handleChange('vendorName', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Auto-filled from vendor selection\"\n                    />\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-2 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Billing Address\n                  </label>\n                  <div className=\"relative\">\n                    <textarea \n                      value={formData.vendorAddress} \n                      onChange={e => handleChange('vendorAddress', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none\" \n                      rows={3}\n                      placeholder=\"Enter complete billing address...\"\n                    />\n                    <FiMapPin className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Logistics Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-orange-50 to-amber-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-orange-500 to-amber-600 rounded-lg flex items-center justify-center\">\n                  <FiTruck className=\"text-white\" size={16} />\n                </div>\n                <h2 className=\"text-lg font-semibold text-gray-900\">Logistics Information</h2>\n                <div className=\"flex-1\"></div>\n                <span className=\"bg-orange-100 text-orange-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                  Delivery Details\n                </span>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Vehicle Number\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.vehicleNo} \n                      onChange={e => handleChange('vehicleNo', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter vehicle number\"\n                    />\n                    <FiTruck className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Driver Name\n                  </label>\n                  <div className=\"relative\">\n                    <input \n                      value={formData.driverName} \n                      onChange={e => handleChange('driverName', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200\" \n                      placeholder=\"Enter driver name\"\n                    />\n                    <FiUser className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n                <div className=\"md:col-span-3 space-y-2\">\n                  <label className=\"block text-sm font-medium text-gray-700\">\n                    Delivery Remarks\n                  </label>\n                  <div className=\"relative\">\n                    <textarea \n                      value={formData.remarks} \n                      onChange={e => handleChange('remarks', e.target.value)} \n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200 resize-none\" \n                      rows={3}\n                      placeholder=\"Add any special delivery instructions or remarks...\"\n                    />\n                    <FiFileText className=\"absolute left-3 top-3.5 text-gray-400\" size={16} />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Items Section */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden\">\n            <div className=\"bg-gradient-to-r from-purple-50 to-pink-50 px-6 py-4 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-600 rounded-lg flex items-center justify-center\">\n                    <FiPackage className=\"text-white\" size={16} />\n                  </div>\n                  <h2 className=\"text-lg font-semibold text-gray-900\">Items & Services</h2>\n                  <span className=\"bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded-full\">\n                    {formData.items.length} Item{formData.items.length !== 1 ? 's' : ''}\n                  </span>\n                </div>\n                <button\n                  type=\"button\"\n                  onClick={addItem}\n                  className=\"inline-flex items-center px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-medium rounded-xl hover:from-purple-600 hover:to-pink-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n                >\n                  <FiPlus className=\"mr-2\" size={16} />\n                  Add Item\n                </button>\n              </div>\n            </div>\n            <div className=\"p-6\">\n              <div className=\"space-y-4\">\n                {formData.items.map((item, index) => (\n                  <div key={item.id} className=\"p-4 border border-gray-200 rounded-lg bg-gray-50/50\">\n                    <div className=\"grid grid-cols-1 md:grid-cols-12 gap-4\">\n                      <div className=\"md:col-span-3\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Item/Service\n                        </label>\n                        <div className=\"flex gap-2\">\n                          <select\n                            value={item.itemId || ''}\n                            onChange={(e) => handleSelectMasterItem(index, e.target.value)}\n                            className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          >\n                            <option value=\"\">-- Select Item --</option>\n                            {masterItems.map(mi => (\n                              <option key={mi.id} value={mi.id}>{mi.name}</option>\n                            ))}\n                          </select>\n                          <button\n                            type=\"button\"\n                            onClick={() => removeItem(index)}\n                            className=\"p-2 text-red-600 hover:text-red-800 bg-red-50 rounded-lg\"\n                            title=\"Remove Item\"\n                            disabled={formData.items.length <= 1}\n                          >\n                            <FiTrash2 size={16} />\n                          </button>\n                        </div>\n                      </div>\n                      \n                      <div className=\"md:col-span-5\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Description *\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={item.description}\n                          onChange={(e) => handleItemChange(index, 'description', e.target.value)}\n                          placeholder=\"Item description\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          HSN Code\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={item.hsnCode}\n                          onChange={(e) => handleItemChange(index, 'hsnCode', e.target.value)}\n                          placeholder=\"HSN code\"\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Unit\n                        </label>\n                        <select\n                          value={item.unit}\n                          onChange={(e) => handleItemChange(index, 'unit', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"Nos\">Nos</option>\n                          <option value=\"Kg\">Kg</option>\n                          <option value=\"Meter\">Meter</option>\n                          <option value=\"Set\">Set</option>\n                          <option value=\"Box\">Box</option>\n                          <option value=\"Packet\">Packet</option>\n                        </select>\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Quantity *\n                        </label>\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          step=\"0.01\"\n                          value={item.quantity}\n                          onChange={(e) => handleItemChange(index, 'quantity', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Unit Price (₹) *\n                        </label>\n                        <input\n                          type=\"number\"\n                          step=\"0.01\"\n                          min=\"0\"\n                          value={item.price}\n                          onChange={(e) => handleItemChange(index, 'price', e.target.value)}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          required\n                        />\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Tax Rate (%)\n                        </label>\n                        <div className=\"relative\">\n                          <input\n                            type=\"number\"\n                            step=\"0.01\"\n                            min=\"0\"\n                            max=\"100\"\n                            value={item.taxRate}\n                            onChange={(e) => handleItemChange(index, 'taxRate', e.target.value)}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                          />\n                          <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                        </div>\n                      </div>\n                      \n                      <div className=\"md:col-span-2\">\n                        <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n                          Amount (₹)\n                        </label>\n                        <input\n                          type=\"text\"\n                          value={formatCurrency(item.amount)}\n                          readOnly\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 font-medium text-right\"\n                        />\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Pricing Summary */}\n              <div className=\"mt-8 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl border border-gray-200\">\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-4 flex items-center\">\n                  <FiDollarSign className=\"mr-2\" />\n                  Pricing Summary\n                </h3>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <div className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Discount Type\n                        </label>\n                        <select\n                          value={formData.discountType}\n                          onChange={(e) => setFormData(prev => ({ ...prev, discountType: e.target.value }))}\n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"amount\">Amount (₹)</option>\n                          <option value=\"percentage\">Percentage (%)</option>\n                        </select>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Discount {formData.discountType === 'percentage' ? '(%)' : '(₹)'}\n                        </label>\n                        <div className=\"relative\">\n                          <input\n                            type=\"number\"\n                            name=\"discountValue\"\n                            value={formData.discountValue}\n                            onChange={handleInputChange}\n                            min=\"0\"\n                            step={formData.discountType === 'percentage' ? 0.1 : 0.01}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-right\"\n                            placeholder=\"0.00\"\n                          />\n                          {formData.discountType === 'percentage' ? (\n                            <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                          ) : (\n                            <FiDollarSign className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Tax Rate (%)\n                        </label>\n                        <div className=\"relative\">\n                          <select\n                            name=\"taxRate\"\n                            value={formData.taxRate}\n                            onChange={handleInputChange}\n                            className=\"w-full pl-8 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                          >\n                            <option value=\"0\">No Tax (0%)</option>\n                            <option value=\"5\">GST 5%</option>\n                            <option value=\"12\">GST 12%</option>\n                            <option value=\"18\">GST 18%</option>\n                            <option value=\"28\">GST 28%</option>\n                          </select>\n                          <FiPercent className=\"absolute left-2 top-2.5 text-gray-400\" size={16} />\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Payment Type\n                        </label>\n                        <select \n                          value={formData.paymentType} \n                          onChange={(e) => setFormData(prev => ({ ...prev, paymentType: e.target.value }))} \n                          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent\"\n                        >\n                          <option value=\"Cash\">Cash</option>\n                          <option value=\"Online\">Online</option>\n                          <option value=\"Credit\">Credit</option>\n                          <option value=\"Cheque\">Cheque</option>\n                        </select>\n                      </div>\n                    </div>\n                    \n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">Round Off</label>\n                        <div className=\"flex items-center gap-3\">\n                          <input \n                            type=\"checkbox\" \n                            checked={formData.roundOffEnabled} \n                            onChange={(e) => setFormData(prev => ({ ...prev, roundOffEnabled: e.target.checked }))} \n                            className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\" \n                          />\n                          <span className=\"text-sm text-gray-700\">Enable rounding</span>\n                        </div>\n                      </div>\n                      \n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                          Approval Required\n                        </label>\n                        <div className=\"flex items-center\">\n                          <input\n                            type=\"checkbox\"\n                            name=\"approvalRequired\"\n                            checked={formData.approvalRequired}\n                            onChange={(e) => setFormData(prev => ({ ...prev, approvalRequired: e.target.checked }))}\n                            className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\n                          />\n                          <label className=\"ml-2 text-sm text-gray-700\">\n                            Requires management approval\n                          </label>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"bg-white p-4 rounded-lg border border-gray-200\">\n                    <div className=\"space-y-3\">\n                      <div className=\"flex justify-between text-sm\">\n                        <span className=\"text-gray-600\">Subtotal:</span>\n                        <span className=\"font-medium\">{formatCurrency(formData.subtotal)}</span>\n                      </div>\n                      \n                      {formData.discountValue > 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">\n                            Discount {formData.discountType === 'percentage' ? `(${formData.discountValue}%)` : ''}:\n                          </span>\n                          <span className=\"font-medium text-red-600\">-{formatCurrency(formData.discountAmount)}</span>\n                        </div>\n                      )}\n                      \n                      {formData.taxRate > 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">Tax ({formData.taxRate}%):</span>\n                          <span className=\"font-medium\">{formatCurrency(formData.taxAmount)}</span>\n                        </div>\n                      )}\n                      \n                      {formData.roundOffEnabled && formData.roundOffValue !== 0 && (\n                        <div className=\"flex justify-between text-sm\">\n                          <span className=\"text-gray-600\">Round Off:</span>\n                          <span className=\"font-medium\">\n                            {formData.roundOffValue > 0 ? '+' : ''}{formatCurrency(formData.roundOffValue)}\n                          </span>\n                        </div>\n                      )}\n                      \n                      <div className=\"flex justify-between text-lg font-bold border-t border-gray-300 pt-3\">\n                        <span className=\"text-gray-900\">Final Amount:</span>\n                        <span className=\"text-indigo-600\">{formatCurrency(formData.finalAmount)}</span>\n                      </div>\n                      \n                      <div className=\"text-xs text-gray-500 italic mt-2\">\n                        {numberToIndianWords(formData.finalAmount)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Action Buttons */}\n          <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-6\">\n            <div className=\"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4\">\n              <div className=\"flex items-center space-x-4\">\n                <div className=\"flex items-center space-x-2\">\n                  <div className=\"w-3 h-3 bg-green-400 rounded-full animate-pulse\"></div>\n                  <span className=\"text-sm text-gray-600\">Auto-save enabled</span>\n                </div>\n                {isEditMode && (\n                  <button \n                    type=\"button\" \n                    onClick={() => navigate(`/admin/challan-details/${id}`)} \n                    className=\"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-xl transition-all duration-200\"\n                  >\n                    <FiEye className=\"mr-2\" size={16} />\n                    Preview\n                  </button>\n                )}\n              </div>\n              \n              <div className=\"flex items-center space-x-3\">\n                <button \n                  type=\"button\" \n                  onClick={() => navigate('/admin/delivery-challans')} \n                  className=\"inline-flex items-center px-6 py-3 border border-gray-300 text-gray-700 font-medium rounded-xl hover:bg-gray-50 transition-all duration-200\"\n                >\n                  Cancel\n                </button>\n                \n                {isEditMode && (\n                  <button \n                    type=\"button\" \n                    className=\"inline-flex items-center px-6 py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-medium rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-sm hover:shadow-md\"\n                  >\n                    <FiPrinter className=\"mr-2\" size={16} />\n                    Print\n                  </button>\n                )}\n                \n                <button \n                  type=\"submit\" \n                  disabled={loading} \n                  className=\"inline-flex items-center px-8 py-3 bg-gradient-to-r from-indigo-600 via-purple-600 to-blue-600 text-white font-semibold rounded-xl hover:from-indigo-700 hover:via-purple-700 hover:to-blue-700 transition-all duration-200 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed transform hover:scale-105\"\n                >\n                  {loading ? (\n                    <>\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2\"></div>\n                      Saving...\n                    </>\n                  ) : (\n                    <>\n                      <FiSave className=\"mr-2\" size={16} />\n                      {isEditMode ? 'Update Challan' : 'Create Challan'}\n                    </>\n                  )}\n                </button>\n              </div>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}\n\n// Improved number to words function for Indian currency\nfunction numberToIndianWords(amount) {\n  if (isNaN(amount) || amount === 0) return 'Zero Rupees Only';\n  \n  const num = Math.abs(amount);\n  const rupees = Math.floor(num);\n  const paise = Math.round((num - rupees) * 100);\n  \n  const units = ['', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];\n  const teens = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];\n  const tens = ['', 'Ten', 'Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];\n  const places = ['', 'Thousand', 'Lakh', 'Crore'];\n  \n  const convertToWords = (n) => {\n    if (n === 0) return '';\n    if (n < 10) return units[n] + ' ';\n    if (n < 20) return teens[n - 10] + ' ';\n    if (n < 100) return tens[Math.floor(n / 10)] + ' ' + (n % 10 !== 0 ? units[n % 10] + ' ' : '');\n    if (n < 1000) return units[Math.floor(n / 100)] + ' Hundred ' + convertToWords(n % 100);\n    \n    for (let i = 0; i < places.length; i++) {\n      if (n < 100 * Math.pow(100, i)) {\n        const divisor = i === 0 ? 1000 : 100;\n        return convertToWords(Math.floor(n / divisor)) + places[i] + ' ' + convertToWords(n % divisor);\n      }\n    }\n    \n    return '';\n  };\n  \n  let words = convertToWords(rupees).trim();\n  words = words ? words + ' Rupee' + (rupees !== 1 ? 's' : '') : '';\n  \n  if (paise > 0) {\n    const paiseWords = convertToWords(paise).trim();\n    words += (words ? ' and ' : '') + paiseWords + ' Paise';\n  }\n  \n  words = words || 'Zero';\n  return words + ' Only';\n}","import { collection, addDoc, getDoc, getDocs, updateDoc, deleteDoc, doc, serverTimestamp, query, orderBy, where, writeBatch } from 'firebase/firestore';\r\nimport { getDownloadURL, ref, uploadBytes } from 'firebase/storage';\r\nimport { db } from '../firebase';\r\nimport { storage } from '../firebase';\r\n\r\nconst ITEMS_COLLECTION = 'items';\r\n\r\nexport function normalizeItemForSave(raw) {\r\n  const numeric = (v) => (v === '' || v === null || v === undefined ? null : Number(v));\r\n  return {\r\n    name: String(raw.name || '').trim(),\r\n    type: raw.type === 'service' ? 'service' : 'product',\r\n    hsn: String(raw.hsn || '').trim(),\r\n    code: String(raw.code || '').trim(),\r\n    unit: String(raw.unit || '').trim(),\r\n    category: String(raw.category || '').trim(),\r\n    imageUrl: String(raw.imageUrl || '').trim(),\r\n    pricing: {\r\n      salePrice: numeric(raw.pricing?.salePrice) ?? 0,\r\n      purchasePrice: numeric(raw.pricing?.purchasePrice) ?? 0,\r\n      discountType: ['percentage', 'flat'].includes(raw.pricing?.discountType) ? raw.pricing.discountType : 'percentage',\r\n      discountValue: numeric(raw.pricing?.discountValue) ?? 0,\r\n      taxRate: numeric(raw.pricing?.taxRate) ?? 0,\r\n      taxMode: ['with_tax', 'without_tax'].includes(raw.pricing?.taxMode) ? raw.pricing.taxMode : 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(raw.stock?.track),\r\n      openingQty: numeric(raw.stock?.openingQty) ?? 0,\r\n      minQty: numeric(raw.stock?.minQty) ?? 0,\r\n      location: String(raw.stock?.location || '').trim(),\r\n    },\r\n    status: raw.status === 'inactive' ? 'inactive' : 'active',\r\n    notes: String(raw.notes || '').trim(),\r\n  };\r\n}\r\n\r\nexport function mapItemFromDoc(docSnap) {\r\n  const d = docSnap.data() || {};\r\n  return {\r\n    id: docSnap.id,\r\n    name: d.name || '',\r\n    type: d.type || 'product',\r\n    hsn: d.hsn || '',\r\n    code: d.code || '',\r\n    unit: d.unit || '',\r\n    category: d.category || '',\r\n    imageUrl: d.imageUrl || '',\r\n    pricing: {\r\n      salePrice: typeof d.pricing?.salePrice === 'number' ? d.pricing.salePrice : Number(d.pricing?.salePrice || 0),\r\n      purchasePrice: typeof d.pricing?.purchasePrice === 'number' ? d.pricing.purchasePrice : Number(d.pricing?.purchasePrice || 0),\r\n      discountType: d.pricing?.discountType || 'percentage',\r\n      discountValue: typeof d.pricing?.discountValue === 'number' ? d.pricing.discountValue : Number(d.pricing?.discountValue || 0),\r\n      taxRate: typeof d.pricing?.taxRate === 'number' ? d.pricing.taxRate : Number(d.pricing?.taxRate || 0),\r\n      taxMode: d.pricing?.taxMode || 'without_tax',\r\n    },\r\n    stock: {\r\n      track: Boolean(d.stock?.track),\r\n      openingQty: typeof d.stock?.openingQty === 'number' ? d.stock.openingQty : Number(d.stock?.openingQty || 0),\r\n      minQty: typeof d.stock?.minQty === 'number' ? d.stock.minQty : Number(d.stock?.minQty || 0),\r\n      location: d.stock?.location || '',\r\n    },\r\n    status: d.status || 'active',\r\n    notes: d.notes || '',\r\n    createdAt: d.createdAt,\r\n    updatedAt: d.updatedAt,\r\n  };\r\n}\r\n\r\nexport function validateItem(raw) {\r\n  const errors = {};\r\n  if (!raw.name || String(raw.name).trim().length < 2) errors.name = 'Item name is required';\r\n  if (!raw.unit) errors.unit = 'Unit is required';\r\n  if (raw.pricing && raw.pricing.salePrice < 0) errors.salePrice = 'Sale price must be >= 0';\r\n  if (raw.pricing && raw.pricing.purchasePrice < 0) errors.purchasePrice = 'Purchase price must be >= 0';\r\n  if (raw.pricing && raw.pricing.taxRate < 0) errors.taxRate = 'Tax rate must be >= 0';\r\n  return errors;\r\n}\r\n\r\nexport async function uploadItemImage(file, itemIdHint) {\r\n  const path = `items/${itemIdHint || 'tmp'}_${Date.now()}_${file.name}`;\r\n  const storageRef = ref(storage, path);\r\n  const snap = await uploadBytes(storageRef, file);\r\n  return getDownloadURL(snap.ref);\r\n}\r\n\r\nexport async function createItem(raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  const now = serverTimestamp();\r\n  const ref = await addDoc(collection(db, ITEMS_COLLECTION), { ...data, createdAt: now, updatedAt: now });\r\n  return { id: ref.id, ...data };\r\n}\r\n\r\nexport async function updateItem(id, raw) {\r\n  const errors = validateItem(raw);\r\n  if (Object.keys(errors).length) {\r\n    const err = new Error('ITEM_VALIDATION_FAILED');\r\n    err.details = errors;\r\n    throw err;\r\n  }\r\n  const data = normalizeItemForSave(raw);\r\n  await updateDoc(doc(db, ITEMS_COLLECTION, id), { ...data, updatedAt: serverTimestamp() });\r\n}\r\n\r\nexport async function deleteItem(id) {\r\n  await deleteDoc(doc(db, ITEMS_COLLECTION, id));\r\n}\r\n\r\nexport async function getItemById(id) {\r\n  const snap = await getDoc(doc(db, ITEMS_COLLECTION, id));\r\n  if (!snap.exists()) return null;\r\n  return mapItemFromDoc(snap);\r\n}\r\n\r\nexport async function getItemsOrdered() {\r\n  const q = query(collection(db, ITEMS_COLLECTION), orderBy('createdAt', 'desc'));\r\n  const snapshot = await getDocs(q);\r\n  return snapshot.docs.map(mapItemFromDoc);\r\n}\r\n\r\nexport async function searchItems({ text, type, category, status }) {\r\n  // Basic fetch and in-memory filter to avoid complex composite indexes\r\n  const snapshot = await getDocs(collection(db, ITEMS_COLLECTION));\r\n  let items = snapshot.docs.map(mapItemFromDoc);\r\n  if (text) {\r\n    const t = text.toLowerCase();\r\n    items = items.filter((i) => (i.name || '').toLowerCase().includes(t) || (i.code || '').toLowerCase().includes(t) || (i.hsn || '').toLowerCase().includes(t));\r\n  }\r\n  if (type) items = items.filter((i) => i.type === type);\r\n  if (category) items = items.filter((i) => i.category === category);\r\n  if (status) items = items.filter((i) => i.status === status);\r\n  return items;\r\n}\r\n\r\nexport async function bulkDeleteItems(ids) {\r\n  const batch = writeBatch(db);\r\n  ids.forEach((id) => batch.delete(doc(db, ITEMS_COLLECTION, id)));\r\n  await batch.commit();\r\n}\r\n\r\n\r\n"],"names":["DC_COLLECTION","DC_ACTIVITY_COLLECTION","normalizeChallanForSave","raw","safeItems","Array","isArray","items","map","it","quantity","Number","price","description","String","trim","hsnCode","unit","amount","toFixed","itemId","totalAmount","reduce","sum","totalQuantity","challanNumber","date","Date","toISOString","split","poId","poNumber","reference","vendorId","vendorName","vendorAddress","vehicleNo","driverName","remarks","amountInWords","mapChallanFromDoc","docSnap","id","data","async","logActivity","dcId","action","details","addDoc","collection","db","timestamp","serverTimestamp","_","getChallanById","snap","getDoc","doc","exists","createChallan","now","ref","createdAt","updatedAt","updateChallan","updateDoc","deleteChallan","deleteDoc","bulkDeleteChallans","ids","batch","writeBatch","forEach","delete","commit","DeliveryChallanForm","navigate","useNavigate","useParams","isEditMode","Boolean","showSuccess","showError","useNotification","loading","setLoading","useState","vendors","setVendors","masterItems","setMasterItems","formData","setFormData","invoiceDate","dueDate","stateOfSupply","discountType","discountValue","taxRate","taxAmount","subtotal","finalAmount","roundOffEnabled","roundOffValue","paymentType","approvalRequired","useEffect","calculateTotals","useCallback","item","discountAmount","taxableAmount","Math","max","round","prev","fetchVendors","fetchItems","fetchChallan","list","getDocs","docs","d","e","console","error","getItemsOrdered","normalizedItems","length","idx","_it$id","_it$description","_it$hsnCode","_it$unit","_it$itemId","discountPercent","_data$challanNumber","_data$date","_data$invoiceDate","_data$dueDate","_data$stateOfSupply","_data$vendorId","_data$vendorName","_data$vendorAddress","_data$reference","_data$vehicleNo","_data$driverName","_data$remarks","_data$discountType","_data$paymentType","handleChange","field","value","selected","find","v","name","address","handleInputChange","type","checked","target","numericFields","Set","nextValue","has","recalcItem","qty","unitPrice","baseAmount","amountAfterDiscount","handleItemChange","index","updatedItem","formatCurrency","Intl","NumberFormat","style","currency","minimumFractionDigits","maximumFractionDigits","format","_jsx","className","children","_jsxs","onClick","FiArrowLeft","size","FiFileText","toLocaleDateString","day","month","year","onSubmit","preventDefault","some","_vendors$find","_vendors$find2","payload","numberToIndianWords","res","message","FiInfo","onChange","placeholder","required","FiCalendar","companyName","displayName","FiUser","FiMapPin","rows","FiTruck","FiPackage","addItem","FiPlus","handleSelectMasterItem","_ref","_ref2","_selected$pricing","_selected$pricing2","_selected$pricing3","current","pricing","salePrice","purchasePrice","hsn","mi","filter","i","removeItem","title","disabled","FiTrash2","min","step","FiPercent","readOnly","FiDollarSign","FiEye","FiPrinter","_Fragment","FiSave","isNaN","num","abs","rupees","floor","paise","units","teens","tens","places","convertToWords","n","pow","divisor","words","ITEMS_COLLECTION","normalizeItemForSave","_numeric","_raw$pricing","_numeric2","_raw$pricing2","_raw$pricing3","_numeric3","_raw$pricing4","_numeric4","_raw$pricing5","_raw$pricing6","_raw$stock","_numeric5","_raw$stock2","_numeric6","_raw$stock3","_raw$stock4","numeric","undefined","code","category","imageUrl","includes","taxMode","stock","track","openingQty","minQty","location","status","notes","mapItemFromDoc","_d$pricing","_d$pricing2","_d$pricing3","_d$pricing4","_d$pricing5","_d$pricing6","_d$pricing7","_d$pricing8","_d$pricing9","_d$pricing0","_d$stock","_d$stock2","_d$stock3","_d$stock4","_d$stock5","_d$stock6","validateItem","errors","uploadItemImage","file","itemIdHint","path","storageRef","storage","uploadBytes","getDownloadURL","createItem","Object","keys","err","Error","updateItem","getItemById","q","query","orderBy","searchItems","text","t","toLowerCase","bulkDeleteItems"],"sourceRoot":""}